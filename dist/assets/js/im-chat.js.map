{"version":3,"sources":["webpack:///./src/assets/css/public.css?ed96*******","webpack:///app.vue?922c","webpack:///./src/assets/css/icons-extra.css?c5ca***","webpack:///./src/pages/im-chat/app.js","webpack:///./src/pages/im-chat/app.vue?11d3","webpack:///./src/assets/css/mui.imageviewer.css?a4ad**","webpack:///./src/pages/im-chat/app.vue?106a","webpack:///./src/assets/js/arttmpl.js?0389*","webpack:///./src/assets/js/mui.imageViewer.js?f878*","webpack:///./src/assets/js/arttmpl.js?671a**","webpack:///./src/assets/css/match_one.css?d28c","webpack:///./src/assets/js/mui.js?ece6*********","webpack:///./src/pages/im-chat/app.vue","webpack:///./src/assets/js/mui.js?8957*********"],"names":["Vue","config","productionTip","el","render","h","a","replace","t","u","v","w","x","split","y","b","c","d","e","m","length","k","s","f","j","g","indexOf","l","test","n","r","p","o","debug","openTag","i","closeTag","parser","compress","escape","$data","$filename","$utils","$helpers","$out","$line","q","trim","z","A","Function","prototype","B","temp","filename","version","defaults","cache","renderFile","get","name","message","document","getElementById","value","innerHTML","call","Array","isArray","toString","utils","$include","$string","$escape","$each","helper","helpers","onerror","console","error","compile","RegExp","join","exports","module","template","mui","init","gestureConfig","tap","doubletap","longtap","swipe","drag","hold","release","touchSupport","tapEventName","enterEventName","imageClassName","className","dom","str","__create_dom_div__","createElement","childNodes","ImageViewer","Class","extend","selector","options","self","dbl","findAllImage","createViewer","bindEvent","viewer","closeButton","querySelector","state","leftButton","rightButton","mask","body","appendChild","images","slice","checkImage","target","tagName","some","image","addEventListener","event","style","display","setTimeout","opacity","index","currentItem","createImage","disposeImage","preventDefault","cancelBubble","prev","next","EVENT_MOVE","scaleValue","EVENT_START","touches","p1","p2","pageX","pageY","scaleStart","Math","sqrt","isMultiTouch","dragStart","img","changedTouches","scaleEnd","_scaleValue","webkitTransform","dragEnd","_dragX","dragX","_dragY","dragY","marginLeft","marginTop","EVENT_END","__tap_num","newItem","classList","remove","add","oldItem","all","sel","willdisposes","each","item","parentNode","removeChild","type","src","innerText","imageViewer","ready","undefined","readyRE","idSelectorRE","classSelectorRE","tagSelectorRE","translateRE","translateMatrixRE","$","context","wrap","isArrayLike","found","$1","qsa","Object","setPrototypeOf","fn","uuid","data","copy","copyIsArray","clone","arguments","deep","isFunction","isPlainObject","noop","filter","obj","String","class2type","object","isWindow","window","isObject","getPrototypeOf","isEmptyObject","getElementsByClassName","getElementsByTagName","querySelectorAll","callback","readyState","buffer","ms","timer","lastStart","lastEnd","run","cancel","now","apply","later","stop","elements","hasOwnProperty","every","idx","key","focus","element","os","ios","trigger","eventType","eventData","dispatchEvent","CustomEvent","detail","bubbles","cancelable","getStyles","property","styles","ownerDocument","defaultView","getComputedStyle","getPropertyValue","parseTranslate","translateString","position","result","match","parseFloat","parseTranslateMatrix","matrix","is3D","push","hooks","addAction","hook","sort","doAction","handle","when","id","clearTimeout","Date","toLowerCase","JSON","parseJSON","parse","define","detect","ua","funcs","wechat","android","isBadAndroid","navigator","appVersion","iphone","ipad","func","userAgent","plus","stream","isTouchable","EVENT_CANCEL","EVENT_CLICK","_mid","delegates","eventMethods","stopImmediatePropagation","stopPropagation","returnTrue","returnFalse","compatible","currentTarget","predicate","sourceMethod","mid","delegateFns","delegateFn","callbackObjs","handlerQueue","selectorAlls","disabled","contains","matches","callbacks","handlers","handler","gesture","isPropagationStopped","findDelegateFn","delegateCallbacks","filterFn","preventDefaultException","on","isAddEventListener","delegateEvents","delegateCallbackObjs","delegateFnArray","delegateCallback","href","off","splice","forEach","removeEventListener","bind","targets","targetHandles","registerTarget","founds","isFound","targetHandle","isContinue","isReset","proto","params","evt","createEvent","initEvent","Event","to","partial","bound","args","concat","documentElement","defineProperty","HTMLElement","update","classes","ret","toggle","requestAnimationFrame","lastTime","webkitRequestAnimationFrame","currTime","getTime","timeToCall","max","cancelAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","FastClick","targetElement","click","clickEvent","touch","activeElement","blur","initMouseEvent","screenX","screenY","clientX","clientY","forwardedTouchEvent","propagationStopped","CLASS_FOCUSIN","CLASS_BAR_TAB","CLASS_BAR_FOOTER","CLASS_BAR_FOOTER_SECONDARY","CLASS_BAR_FOOTER_SECONDARY_TAB","webview","currentWebview","children","readOnly","isFooter","scrollTop","scrollHeight","scrollLeft","scrollTo","namespace","classNamePrefix","classSelectorPrefix","classSelector","eventName","gestures","session","addGesture","round","abs","atan","atan2","getDistance","props","getScale","starts","moves","getAngle","PI","getDirection","getRotation","start","end","getVelocity","deltaTime","stoped","hasParent","node","parent","uniqueArray","results","values","val","sortUniqueArray","getMultiCenter","touchesLength","multiTouch","pinch","copySimpleTouchData","timestamp","center","deltaX","deltaY","calDelta","offset","offsetDelta","prevDelta","prevTouch","calTouchData","firstTouch","firstMultiTouch","offsetCenter","angle","distance","offsetDirection","scale","rotation","calIntervalTouchData","CAL_INTERVAL","last","lastInterval","velocity","velocityX","velocityY","direction","targetIds","convertTouches","getTouches","allTouches","targetTouches","changedTargetTouches","identifier","sessionTarget","changedTouchesLength","isFirst","isFinal","handleTouchEvent","popover","tab","offcanvas","modal","isScrolling","scrollingTimeout","flickStartTime","flickStart","flick","flickMaxTime","flickMinDistince","flickTime","flickDistanceX","flickDistanceY","swipeMaxTime","swipeMinDistince","lockDirection","startDirection","fingers","lastTarget","lastTapTime","tapMaxDistance","tapMaxTime","tapMaxInterval","holdTimeout","holdThreshold","lastScale","scaleDiff","minRotationAngle","global","initGlobal","inits","isInitialized","isInit","repeat","addInit","subpages","createIframe","wrapper","top","bottom","iframe","url","handleScroll","location","localStorage","getItem","onload","setInterval","_scrollTop","scrollY","setItem","osObj","classArray","defaultOptions","swipeBack","preloadPages","preloadLimit","keyEventBind","backbutton","menubutton","defaultShow","autoShow","duration","aniShow","show","isHomePage","waitingOptions","title","showOptions","windowOptions","scalable","bounce","plusReady","receive","fire","stringify","evalJS","triggerPreload","preloaded","list","timeChecked","openWindow","webviewCache","nShow","nWaiting","webviews","getWebviewById","afterShowMethodName","createNew","Error","waitingConfig","waiting","nativeUI","showWaiting","createWindow","showWebview","close","showed","isCreate","preload","getURL","create","extras","subpage","subpageId","subWebview","append","preloads","first","shift","closeAll","closeOpened","opened","len","openedWebview","open_open","createWindows","option","appendWebview","runtime","appid","statusBarBackground","setStatusBarBackground","supportStatusbarOffset","addBack","back","history","beforeback","action","_popover","offCanvas","previewImage","getPreviewImage","isShown","closePopup","__back__first","wobj","canBack","toast","quit","hide","menu","__back","__menu","pullRefreshOptions","pullRefresh","hasPulldown","down","hasPullup","up","container","$container","upOptions","webviewId","downOptions","jsonType","htmlType","rscript","scriptTypeRE","xmlTypeRE","blankRE","ajaxSettings","beforeSend","success","complete","xhr","protocol","XMLHttpRequest","accepts","script","json","xml","html","text","timeout","processData","ajaxBeforeSend","settings","ajaxSuccess","ajaxComplete","ajaxError","status","serialize","traditional","scope","array","hash","serializeData","contentType","headers","param","toUpperCase","appendQuery","query","mimeToDataType","mime","parseArguments","dataType","ajax","setHeader","nativeSetHeader","setRequestHeader","abortTimeout","mimeType","overrideMimeType","onreadystatechange","isLocal","responseText","getResponseHeader","eval","responseXML","statusText","abort","xhrFields","async","open","username","password","send","encodeURIComponent","post","getJSON","load","parts","response","div","selectorDiv","childs","originAnchor","crossDomain","net","urlAnchor","host","box","left","getBoundingClientRect","pageYOffset","clientTop","pageXOffset","clientLeft","scroll","distaince","animationFrame","cb","isQueued","initializing","fnTest","xyz","prop","_super","tmp","constructor","callee","CLASS_PULL_TOP_POCKET","CLASS_PULL_BOTTOM_POCKET","CLASS_PULL","CLASS_PULL_LOADING","CLASS_PULL_CAPTION","CLASS_PULL_CAPTION_DOWN","CLASS_PULL_CAPTION_REFRESH","CLASS_PULL_CAPTION_NOMORE","CLASS_ICON","CLASS_SPINNER","CLASS_ICON_PULLDOWN","CLASS_BLOCK","CLASS_HIDDEN","CLASS_VISIBILITY","CLASS_LOADING_UP","CLASS_LOADING_DOWN","CLASS_LOADING","pocketHtml","PullRefresh","scrollX","indicators","deceleration","height","contentinit","contentdown","contentover","contentrefresh","auto","contentnomore","_init","_initPocket","_initPulldownRefresh","pulldown","pullPocket","topPocket","pullCaption","topCaption","pullLoading","topLoading","_initPullupRefresh","bottomPocket","bottomCaption","bottomLoading","scroller","_createPocket","insertBefore","firstChild","clazz","iconClass","pocket","_resetPullDownLoading","loading","webkitTransition","webkitAnimation","_setCaptionClass","isPulldown","caption","_setCaption","reset","lastTitle","CLASS_SCROLL","CLASS_SCROLLBAR","CLASS_INDICATOR","CLASS_SCROLLBAR_VERTICAL","CLASS_SCROLLBAR_HORIZONTAL","CLASS_ACTIVE","ease","quadratic","circular","outCirc","outCubic","Scroll","scrollerStyle","stopped","startX","startY","hardwareAccelerated","fixedBadAndorid","momentum","snapX","snap","bounceTime","bounceEasing","scrollTime","scrollEasing","directionLockThreshold","parallaxElement","parallaxRatio","translateZ","refresh","_initParallax","_initIndicators","_initEvent","parallaxStyle","parallaxHeight","offsetHeight","parallaxImgStyle","indicator","_createScrollBar","listenX","listenY","Indicator","_initSnap","currentPage","pages","snaps","leftX","rightX","offsetLeft","offsetWidth","_getSnapX","maxScrollX","min","wrapperWidth","_gotoPage","_nearestSnap","nearestX","detach","segmentedControl","_handleIndicatorScrollend","map","fade","_handleIndicatorScrollstart","_handleIndicatorRefresh","handleEvent","resetPosition","_start","_drag","_flick","_end","transitionTimer","_transitionEnd","_scrollend","_resize","moved","needReset","_transitionTime","isInTransition","pos","setTranslate","reLayout","_getDirectionByAngle","innerHeight","isPreventDefault","isReturn","absDeltaX","absDeltaY","hasHorizontalScroll","hasVerticalScroll","newX","newY","maxScrollY","_updateTranslate","_clearRequestAnimationFrame","time","easing","momentumX","_momentum","destination","momentumY","wrapperHeight","that","resizeTimeout","resizePolling","transitionTime","_transitionTimingFunction","transitionTimingFunction","_translate","lastX","lastY","scrollbar","scrollbarY","scrollbarIndicatorY","scrollbarX","scrollbarIndicatorX","_preventDefaultException","exceptions","_reLayout","scrollerWidth","scrollerHeight","items","itemLength","current","lowerMargin","wrapperSize","speed","_getTranslateStr","setStopped","parallaxY","updatePosition","paddingLeft","paddingRight","paddingTop","paddingBottom","clientWidth","clientHeight","_reInit","groups","scrollToBottom","gotoPage","destroy","getAttribute","setAttribute","wrapperStyle","indicatorStyle","speedRatioX","speedRatioY","sizeRatioX","sizeRatioY","maxPosX","maxPosY","indicatorWidth","width","minBoundaryX","maxBoundaryX","indicatorHeight","minBoundaryY","maxBoundaryY","visible","fadeTimeout","delay","scrollApis","scrollApi","_options","_scrollbottom","pullupLoading","pulldownLoading","endPulldownToRefresh","endPullupToRefresh","finished","disablePullupToRefresh","enablePullupToRefresh","pullRefreshApi","autoY","CLASS_SLIDER","CLASS_SLIDER_GROUP","CLASS_SLIDER_LOOP","CLASS_SLIDER_INDICATOR","CLASS_ACTION_PREVIOUS","CLASS_ACTION_NEXT","CLASS_SLIDER_ITEM","SELECTOR_SLIDER_ITEM","SELECTOR_SLIDER_INDICATOR","SELECTOR_SLIDER_PROGRESS_BAR","Slider","interval","slideTime","progressBar","progressBarWidth","progressBarStyle","_initTimer","_triggerSlide","page","slideNumber","_fixedSlideNumber","loop","lastSlideNumber","lastPage","_handleSlide","temps","_slideNumber","indicatorWrap","number","controlItems","_handleTabShow","gotoItem","tabNumber","_handleIndicatorTap","slidershowTimer","slider","nextItem","_getScroll","_getPage","isFlick","_gotoItem","prevItem","getSlideNumber","sliderElement","CLASS_PLUS_PULLREFRESH","PlusPullRefresh","_initPulldownRefreshEvent","scrollInterval","isScroll","setBounce","changeoffset","setStyle","_pulldownLoading","childWebview","_endPulldownToRefresh","endPullToRefresh","isLoading","attrWebviewId","CLASS_OFF_CANVAS_LEFT","CLASS_OFF_CANVAS_RIGHT","CLASS_ACTION_BACKDROP","CLASS_OFF_CANVAS_WRAP","CLASS_SLIDE_IN","CLASS_TRANSITIONING","SELECTOR_INNER_WRAP","OffCanvas","dragThresholdX","slideIn","offCanvasLefts","offCanvasRights","offCanvasLeft","offCanvasRight","offCanvasRightWidth","offCanvasLeftWidth","offCanvasLeftSlideIn","offCanvasRightSlideIn","backdrop","offsetX","lastTranslateX","_dispatchEvent","isDragging","offCanvasWidth","getTranslateX","_initOffCanvasVisible","updateTranslate","ratio","openPercentage","visibility","percentage","setTranslateX","leftShowing","rightShowing","zIndex","percent","zoomOutScale","zoomInScale","zoomOutOpacity","zoomInOpacity","webkitTransformOrigin","shown","directionOrOffCanvas","findOffCanvasContainer","_container","offCanvasApis","offCanvasApi","CLASS_ACTION","CLASS_MODAL","CLASS_POPOVER","CLASS_POPOVER_ARROW","CLASS_ACTION_POPOVER","CLASS_BACKDROP","CLASS_BAR_POPOVER","CLASS_BAR_BACKDROP","CLASS_BOTTOM","fixedPopoverScroll","isPopoverScroll","onPopoverShown","onPopoverHidden","removeBackdrop","removeBackdropTimer","togglePopover","anchor","isActionSheet","calPosition","wWidth","innerWidth","wHeight","pWidth","pHeight","aWidth","aHeight","arrow","arrowSize","pTop","pLeft","diff","arrowLeft","defaultPadding","createMask","_show","_remove","CLASS_CONTROL_ITEM","CLASS_SEGMENTED_CONTROL","CLASS_SEGMENTED_CONTROL_VERTICAL","CLASS_CONTROL_CONTENT","CLASS_TAB_BAR","CLASS_TAB_ITEM","targetTab","activeTab","activeBodies","targetBody","isLastActive","activeBody","contents","_contents","CLASS_SWITCH","CLASS_SWITCH_HANDLE","CLASS_DRAGGING","CLASS_DISABLED","SELECTOR_SWITCH_HANDLE","Toggle","toggleWidth","handleWidth","handleX","swiperight","webkitTransitionDuration","lastChanged","initialState","isActive","animate","isChanged","switchApis","switchApi","CLASS_SELECTED","CLASS_GRID_VIEW","CLASS_RADIO_VIEW","CLASS_TABLE_VIEW_CELL","CLASS_COLLAPSE_CONTENT","CLASS_TOGGLE","CLASS_BTN","CLASS_SLIDER_HANDLE","CLASS_SLIDER_LEFT","CLASS_SLIDER_RIGHT","SELECTOR_SLIDER_HANDLE","SELECTOR_SLIDER_LEFT","SELECTOR_SLIDER_RIGHT","SELECTOR_SELECTED","SELECTOR_BUTTON","overFactor","cell","isMoved","isOpened","openedActions","progress","sliderHandle","sliderActionLeft","sliderActionRight","buttonsLeft","buttonsRight","sliderDirection","sliderRequestAnimationFrame","translateX","sliderActionLeftWidth","sliderActionRightWidth","toggleActive","pow","buttonRight","_buttonOffset","buttonOffset","buttonLeft","isDisabled","selected","swipeoutClose","link","toggleEvents","dragend","swipeleft","translate","actionsWidth","isToggle","buttons","newTranslate","button","isRemove","method","swipeoutOpen","swipeoutAction","swipeoutWidth","radioOrCheckboxClick","input","checked","isExpand","ul","collapse","alert","btnValue","confirm","btnArray","prompt","defaultText","verticalAlign","CLASS_POPUP","CLASS_POPUP_BACKDROP","CLASS_POPUP_IN","CLASS_POPUP_OUT","CLASS_POPUP_INNER","CLASS_POPUP_TITLE","CLASS_POPUP_TEXT","CLASS_POPUP_INPUT","CLASS_POPUP_BUTTONS","CLASS_POPUP_BUTTON","CLASS_POPUP_BUTTON_BOLD","popupStack","createInput","placeholder","createInner","extra","createButtons","btns","createPopup","popupElement","removePopupElement","popup","pop","createAlert","createConfirm","createPrompt","closePopups","CLASS_PROGRESSBAR","CLASS_PROGRESSBAR_IN","CLASS_PROGRESSBAR_OUT","CLASS_PROGRESSBAR_INFINITE","SELECTOR_PROGRESSBAR","_findProgressbar","progressbars","progressbar","showProgressbar","color","_progressbar","setProgressbar","hideProgressbar","span","progressbarApis","progressbarApi","mui_plugin_progressbar","setOptions","setProgress","CLASS_ICON_CLEAR","CLASS_ICON_SPEECH","CLASS_ICON_SEARCH","CLASS_ICON_PASSWORD","CLASS_INPUT_ROW","CLASS_PLACEHOLDER","CLASS_TOOLTIP","SELECTOR_ICON_CLOSE","SELECTOR_ICON_SPEECH","SELECTOR_ICON_PASSWORD","SELECTOR_PLACEHOLDER","SELECTOR_TOOLTIP","findRow","Input","actions","sliderActionClass","sliderActionSelector","clearActionClass","clearActionSelector","speechActionClass","speechActionSelector","searchActionClass","searchActionSelector","passwordActionClass","passwordActionSelector","initAction","initElementEvent","row","sliderAction","createAction","searchAction","speechAction","speechActionClick","clearAction","clearActionClick","passwordAction","passwordActionClick","actionClass","actionSelector","nextSibling","tooltip","showTip","tooltipWidth","distince","scaleWidth","setPlaceholder","oldValue","speech","startRecognize","engine","stopRecognize","inputApis","inputApi","rgbaRegex","getColor","colorStr","Transparent","_style","_bgColor","backgroundColor","_R","_G","_B","_A","_bufferFn","destory","mui_plugin_transparent","transparent","transparentApis","transparentApi","changeEventName","holderClassName","plusClassSelector","minusClassSelector","inputClassSelector","Numbox","holder","step","parseInt","minus","checkValue","getValue","isNaN","setOption","numbox","instanceArray","optionsText"],"mappings":";;;;;AAAA,yC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyDA;AACA;AACA;AACA;AACA;;aAGA;mBACA;iBACA;eACA;cACA;cACA;gBAEA;AARA;AADA;AAUA;AACA;AACA,0BACA;;iBAGA;AAFA;4CAGA;kBACA;+CACA;;4CAGA;AAFA;SAGA;0CACA;qDACA;2BACA;2CACA;6CACA;AACA;yEACA;AACA;AACA;AACA;;UAEA;QACA;WAEA;AAJA;;+BAMA;iCACA;sCACA;qCACA;qCACA;qCACA;sCACA;sCACA;sCACA;wCACA;4BACA;kCAEA;AAbA;gDAcA;AACA;4DACA;sDACA;qCACA;wCACA;0BACA;oCACA;yCACA;yBACA;2BACA;0BACA;mBACA;0BACA;AACA;AACA;AACA;;OAGA;AAFA;0CAGA;AACA;AAKA;;;;;;aAGA;AAFA;iDAGA;mDACA;iDACA;qBACA;MACA;AACA;cACA;0EACA;AACA;AACA;+CACA;0EACA;IACA;+BACA;cACA;AACA;cACA;AACA;sCACA;eACA;;UAEA;WACA;yBACA;AAHA,qBAIA;AACA;;YAEA;UACA;kBAEA;AAJA;AAKA;AACA;AAEA;;yBACA;gBACA;yBACA;iBACA;KACA;AACA;AACA;gEACA;+DACA;AACA;SACA;AACA;AACA;AACA;+DACA;+DACA;AACA;SACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;6DACA;+DACA;AACA;iBACA;0BACA;kBACA;MACA;AACA;;YAEA;UACA;iEAEA;AAJA;yBAKA;uCACA;+DACA;+BACA;kCACA;iCACA;kCACA;iBACA;iBACA;mEACA;+BACA;kCACA;kCACA;iCACA;AACA;AACA;iBACA;0BACA;kBACA;MACA;AACA;IACA;wDACA;;UAEA;AADA;UAIA;AAFA;;UAIA;WACA;YACA;AAHA,kBAIA;iBACA;WACA;SACA;AACA;SACA;2BACA;sCACA;;eAEA;aACA;8DAEA;AAJA;wBAKA;AACA;SACA;uCACA;;eAEA;aACA;gBAEA;AAJA;2BAKA;AAEA;;AACA;IACA;gEACA;YACA;oCACA;oCACA;SACA;oCACA;AACA;0BACA;qCACA;MACA;AACA;AACA;oBACA;gBACA;0CACA;sBACA;qBACA;iBACA;0DACA;iBACA;8BACA;yBACA;oCACA;uBACA;wBACA;wBACA;uBACA;AACA;AACA;8BACA;;aAEA;AADA,qBAEA;qBACA;;YAEA;UACA;aAEA;AAJA;kBAKA;uCACA;AACA;IACA;mDACA;AACA;0CACA;sBACA;mBACA;kDACA;8BACA;AACA;2BACA;AACA;SACA;qBACA;mBACA;iDACA;iCACA;AACA;2BACA;AACA;AACA;IACA;6DACA;AACA;+CACA;+BACA;0BACA;AACA;AACA;6BACA;uDACA;0BACA;kCACA;kBACA;sCACA;yBACA;MACA;SACA;wBACA;AACA;WACA;IACA;4DACA;AACA;IACA;AACA;0DACA;wEACA;qEACA;iFACA;+DACA;mDACA;AACA;aACA;wDACA;gBACA;yBACA;iBACA;KACA;UACA;yBACA;WACA;KACA;uBACA;IACA;AACA;2DACA;cACA;iBACA;AACA;AAEA;;;AAOA,mE;;;;;;;ACnZA,yC;;;;;;;;;;;;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAAAA,CAAIC,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACA,IAAI,2CAAJ,CAAQ;AACJC,QAAI,MADA;AAEJC,YAAQ;AAAA,eAAKC,EAAE,gDAAF,CAAL;AAAA;AAFJ,CAAR,E;;;;;;;ACRA,yC;;;;;;;ACAA,yC;;;;;;;ACAA,gBAAgB,mBAAmB,aAAa,0BAA0B;AAC1E;AACA,CAAC,+BAA+B,aAAa,0BAA0B;AACvE;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG,yCAAyC,oBAAoB,yLAAyL,gFAAgF,OAAO,2GAA2G,8HAA8H,iEAAiE,+BAA+B,yGAAyG,uBAAuB,+BAA+B,iFAAiF,kBAAkB,kFAAkF,8JAA8J;AAC3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","file":"assets/js/im-chat.js","sourcesContent":["// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/css/public.css\n// module id = 1\n// module chunks = 0 1 4 5 6 7 8 10 12 14 15 16 17 18 20 21 22 23 24 25 26 27 29 30 31 32 33","<template>\n\t<span>\n\t\t<header class=\"mui-bar mui-bar-nav\">\n\t\t\t<a class=\"mui-action-back mui-icon mui-icon-left-nav mui-pull-left\"></a>\n\t\t\t<h1 class=\"mui-title\">chat (聊天窗口)</h1>\n\t\t</header>\n\t\t<pre id='h'></pre>\n\t\t<script id='msg-template' type=\"text/template\">\n\t\t\t<% for(var i in record){ var item=record[i]; %>\n\t\t\t\t<div class=\"msg-item <%= (item.sender=='self'?' msg-item-self':'') %>\" msg-type='<%=(item.type)%>' msg-content='<%=(item.content)%>'>\n\t\t\t\t\t<% if(item.sender=='self' ) { %>\n\t\t\t\t\t\t<i class=\"msg-user mui-icon mui-icon-person\"></i>\n\t\t\t\t\t<% } else { %>\n\t\t\t\t\t\t<img class=\"msg-user-img\" src=\"../../assets/img/grzxbg_02.jpg\" alt=\"\" />\n\t\t\t\t\t<% } %>\n\t\t\t\t\t<div class=\"msg-content\">\n\t\t\t\t\t\t<div class=\"msg-content-inner\">\n\t\t\t\t\t\t\t<% if(item.type=='text' ) { %>\n\t\t\t\t\t\t\t\t<%=( item.content|| '&nbsp;&nbsp;') %>\n\t\t\t\t\t\t\t<% } else if(item.type=='image' ) { %>\n\t\t\t\t\t\t\t\t<img class=\"msg-content-image\" src=\"<%=(item.content)%>\" style=\"max-width: 100px;\" />\n\t\t\t\t\t\t\t<% } else if(item.type=='sound' ) { %>\n\t\t\t\t\t\t\t\t<span class=\"mui-icon mui-icon-mic\" style=\"font-size: 18px;font-weight: bold;\"></span>\n\t\t\t\t\t\t\t\t<span class=\"play-state\">点击播放</span>\n\t\t\t\t\t\t\t<% } %>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"msg-content-arrow\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"mui-item-clear\"></div>\n\t\t\t\t</div>\n\t\t\t<% } %>\n\t\t</script>\n\t\t<div class=\"mui-content\">\n\t\t\t<div id='msg-list'>\n\t\t\t</div>\n\t\t</div>\n\t\t<footer>\n\t\t\t<div class=\"footer-left\">\n\t\t\t\t<i id='msg-image' class=\"mui-icon mui-icon-camera\" style=\"font-size: 28px;\"></i>\n\t\t\t</div>\n\t\t\t<div class=\"footer-center\">\n\t\t\t\t<textarea id='msg-text' type=\"text\" class='input-text'></textarea>\n\t\t\t\t<button id='msg-sound' type=\"button\" class='input-sound' style=\"display: none;\">按住说话</button>\n\t\t\t</div>\n\t\t\t<label for=\"\" class=\"footer-right\">\n\t\t\t\t<i id='msg-type' class=\"mui-icon mui-icon-mic\"></i>\n\t\t\t</label>\n\t\t</footer>\n\t\t<div id='sound-alert' class=\"rprogress\">\n\t\t\t<div class=\"rschedule\"></div>\n\t\t\t<div class=\"r-sigh\">!</div>\n\t\t\t<div id=\"audio_tips\" class=\"rsalert\">手指上滑，取消发送</div>\n\t\t</div>\n\t</span>\n</template>\n\n<script>\nrequire(\"expose-loader?mui!assets/js/mui.js\");\nrequire(\"assets/js/mui.imageViewer.js\");\nrequire(\"expose-loader?template!assets/js/arttmpl.js\");\nvar MIN_SOUND_TIME = 800;\nmui.init({\n\tgestureConfig: {\n\t\ttap: true, //默认为true\n\t\tdoubletap: true, //默认为false\n\t\tlongtap: true, //默认为false\n\t\tswipe: true, //默认为true\n\t\tdrag: true, //默认为true\n\t\thold: true, //默认为false，不监听\n\t\trelease: true //默认为false，不监听\n\t}\n});\ntemplate.config('escape', false);\n//mui.plusReady=function(fn){fn();};\nmui.plusReady(function () {\n\tplus.webview.currentWebview().setStyle({\n\t\tsoftinputMode: \"adjustResize\"\n\t});\n\tvar showKeyboard = function () {\n\t\tif (mui.os.ios) {\n\t\t\tvar webView = plus.webview.currentWebview().nativeInstanceObject();\n\t\t\twebView.plusCallMethod({\n\t\t\t\t\"setKeyboardDisplayRequiresUserAction\": false\n\t\t\t});\n\t\t} else {\n\t\t\tvar Context = plus.android.importClass(\"android.content.Context\");\n\t\t\tvar InputMethodManager = plus.android.importClass(\"android.view.inputmethod.InputMethodManager\");\n\t\t\tvar main = plus.android.runtimeMainActivity();\n\t\t\tvar imm = main.getSystemService(Context.INPUT_METHOD_SERVICE);\n\t\t\timm.toggleSoftInput(0, InputMethodManager.SHOW_FORCED);\n\t\t\t//var view = ((ViewGroup)main.findViewById(android.R.id.content)).getChildAt(0);\n\t\t\timm.showSoftInput(main.getWindow().getDecorView(), InputMethodManager.SHOW_IMPLICIT);\n\t\t\t//alert(\"ll\");\n\t\t}\n\t};\n\tvar record = [{\n\t\tsender: 'zs',\n\t\ttype: 'text',\n\t\tcontent: 'Hi，我是 MUI 小管家！'\n\t}];\n\tvar ui = {\n\t\tbody: document.querySelector('body'),\n\t\tfooter: document.querySelector('footer'),\n\t\tfooterRight: document.querySelector('.footer-right'),\n\t\tfooterLeft: document.querySelector('.footer-left'),\n\t\tbtnMsgType: document.querySelector('#msg-type'),\n\t\tboxMsgText: document.querySelector('#msg-text'),\n\t\tboxMsgSound: document.querySelector('#msg-sound'),\n\t\tbtnMsgImage: document.querySelector('#msg-image'),\n\t\tareaMsgList: document.querySelector('#msg-list'),\n\t\tboxSoundAlert: document.querySelector('#sound-alert'),\n\t\th: document.querySelector('#h'),\n\t\tcontent: document.querySelector('.mui-content')\n\t};\n\tui.h.style.width = ui.boxMsgText.offsetWidth + 'px';\n\t//alert(ui.boxMsgText.offsetWidth );\n\tvar footerPadding = ui.footer.offsetHeight - ui.boxMsgText.offsetHeight;\n\tvar msgItemTap = function (msgItem, event) {\n\t\tvar msgType = msgItem.getAttribute('msg-type');\n\t\tvar msgContent = msgItem.getAttribute('msg-content')\n\t\tif (msgType == 'sound') {\n\t\t\tplayer = plus.audio.createPlayer(msgContent);\n\t\t\tvar playState = msgItem.querySelector('.play-state');\n\t\t\tplayState.innerText = '正在播放...';\n\t\t\tplayer.play(function () {\n\t\t\t\tplayState.innerText = '点击播放';\n\t\t\t}, function (e) {\n\t\t\t\tplayState.innerText = '点击播放';\n\t\t\t});\n\t\t}\n\t};\n\tvar imageViewer = new mui.ImageViewer('.msg-content-image', {\n\t\tdbl: false\n\t});\n\tvar bindMsgList = function () {\n\t\t//绑定数据:\n\t\t/*tp.bind({\n\t\t\ttemplate: 'msg-template',\n\t\t\telement: 'msg-list',\n\t\t\tmodel: record\n\t\t});*/\n\t\tui.areaMsgList.innerHTML = template('msg-template', {\n\t\t\t\"record\": record\n\t\t});\n\t\tvar msgItems = ui.areaMsgList.querySelectorAll('.msg-item');\n\t\t[].forEach.call(msgItems, function (item, index) {\n\t\t\titem.addEventListener('tap', function (event) {\n\t\t\t\tmsgItemTap(item, event);\n\t\t\t}, false);\n\t\t});\n\t\timageViewer.findAllImage();\n\t\tui.areaMsgList.scrollTop = ui.areaMsgList.scrollHeight + ui.areaMsgList.offsetHeight;\n\t};\n\tbindMsgList();\n\twindow.addEventListener('resize', function () {\n\t\tui.areaMsgList.scrollTop = ui.areaMsgList.scrollHeight + ui.areaMsgList.offsetHeight;\n\t}, false);\n\tvar send = function (msg) {\n\t\trecord.push(msg);\n\t\tbindMsgList();\n\t\ttoRobot(msg.content);\n\t};\n\tvar toRobot = function (info) {\n\t\tvar apiUrl = 'http://www.tuling123.com/openapi/api';\n\t\tmui.getJSON(apiUrl, {\n\t\t\t\"key\": 'acfbca724ea1b5db96d2eef88ce677dc',\n\t\t\t\"info\": info,\n\t\t\t\"userid\": plus.device.uuid\n\t\t}, function (data) {\n\t\t\t//alert(JSON.stringify(data));\n\t\t\trecord.push({\n\t\t\t\tsender: 'zs',\n\t\t\t\ttype: 'text',\n\t\t\t\tcontent: data.text\n\t\t\t});\n\t\t\tbindMsgList();\n\t\t});\n\t};\n\n\tfunction msgTextFocus() {\n\t\tui.boxMsgText.focus();\n\t\tsetTimeout(function () {\n\t\t\tui.boxMsgText.focus();\n\t\t}, 150);\n\t}\n\t//解决长按“发送”按钮，导致键盘关闭的问题；\n\tui.footerRight.addEventListener('touchstart', function (event) {\n\t\tif (ui.btnMsgType.classList.contains('mui-icon-paperplane')) {\n\t\t\tmsgTextFocus();\n\t\t\tevent.preventDefault();\n\t\t}\n\t});\n\t//解决长按“发送”按钮，导致键盘关闭的问题；\n\tui.footerRight.addEventListener('touchmove', function (event) {\n\t\tif (ui.btnMsgType.classList.contains('mui-icon-paperplane')) {\n\t\t\tmsgTextFocus();\n\t\t\tevent.preventDefault();\n\t\t}\n\t});\n\t//\t\t\t\t\tui.footerRight.addEventListener('touchcancel', function(event) {\n\t//\t\t\t\t\t\tif (ui.btnMsgType.classList.contains('mui-icon-paperplane')) {\n\t//\t\t\t\t\t\t\tmsgTextFocus();\n\t//\t\t\t\t\t\t\tevent.preventDefault();\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t});\n\t//\t\t\t\t\tui.footerRight.addEventListener('touchend', function(event) {\n\t//\t\t\t\t\t\tif (ui.btnMsgType.classList.contains('mui-icon-paperplane')) {\n\t//\t\t\t\t\t\t\tmsgTextFocus();\n\t//\t\t\t\t\t\t\tevent.preventDefault();\n\t//\t\t\t\t\t\t}\n\t//\t\t\t\t\t});\n\tui.footerRight.addEventListener('release', function (event) {\n\t\tif (ui.btnMsgType.classList.contains('mui-icon-paperplane')) {\n\t\t\t//showKeyboard();\n\t\t\tui.boxMsgText.focus();\n\t\t\tsetTimeout(function () {\n\t\t\t\tui.boxMsgText.focus();\n\t\t\t}, 150);\n\t\t\t//event.detail.gesture.preventDefault();\n\t\t\tsend({\n\t\t\t\tsender: 'self',\n\t\t\t\ttype: 'text',\n\t\t\t\tcontent: ui.boxMsgText.value.replace(new RegExp('\\n', 'gm'), '<br/>')\n\t\t\t});\n\t\t\tui.boxMsgText.value = '';\n\t\t\tmui.trigger(ui.boxMsgText, 'input', null);\n\t\t} else if (ui.btnMsgType.classList.contains('mui-icon-mic')) {\n\t\t\tui.btnMsgType.classList.add('mui-icon-compose');\n\t\t\tui.btnMsgType.classList.remove('mui-icon-mic');\n\t\t\tui.boxMsgText.style.display = 'none';\n\t\t\tui.boxMsgSound.style.display = 'block';\n\t\t\tui.boxMsgText.blur();\n\t\t\tdocument.body.focus();\n\t\t} else if (ui.btnMsgType.classList.contains('mui-icon-compose')) {\n\t\t\tui.btnMsgType.classList.add('mui-icon-mic');\n\t\t\tui.btnMsgType.classList.remove('mui-icon-compose');\n\t\t\tui.boxMsgSound.style.display = 'none';\n\t\t\tui.boxMsgText.style.display = 'block';\n\t\t\t//--\n\t\t\t//showKeyboard();\n\t\t\tui.boxMsgText.focus();\n\t\t\tsetTimeout(function () {\n\t\t\t\tui.boxMsgText.focus();\n\t\t\t}, 150);\n\t\t}\n\t}, false);\n\tui.footerLeft.addEventListener('tap', function (event) {\n\t\tvar btnArray = [{\n\t\t\ttitle: \"拍照\"\n\t\t}, {\n\t\t\ttitle: \"从相册选择\"\n\t\t}];\n\t\tplus.nativeUI.actionSheet({\n\t\t\ttitle: \"选择照片\",\n\t\t\tcancel: \"取消\",\n\t\t\tbuttons: btnArray\n\t\t}, function (e) {\n\t\t\tvar index = e.index;\n\t\t\tswitch (index) {\n\t\t\t\tcase 0:\n\t\t\t\t\tbreak;\n\t\t\t\tcase 1:\n\t\t\t\t\tvar cmr = plus.camera.getCamera();\n\t\t\t\t\tcmr.captureImage(function (path) {\n\t\t\t\t\t\tsend({\n\t\t\t\t\t\t\tsender: 'self',\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\tcontent: \"file://\" + plus.io.convertLocalFileSystemURL(path)\n\t\t\t\t\t\t});\n\t\t\t\t\t}, function (err) { });\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tplus.gallery.pick(function (path) {\n\t\t\t\t\t\tsend({\n\t\t\t\t\t\t\tsender: 'self',\n\t\t\t\t\t\t\ttype: 'image',\n\t\t\t\t\t\t\tcontent: path\n\t\t\t\t\t\t});\n\t\t\t\t\t}, function (err) { }, null);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}, false);\n\tvar setSoundAlertVisable = function (show) {\n\t\tif (show) {\n\t\t\tui.boxSoundAlert.style.display = 'block';\n\t\t\tui.boxSoundAlert.style.opacity = 1;\n\t\t} else {\n\t\t\tui.boxSoundAlert.style.opacity = 0;\n\t\t\t//fadeOut 完成再真正隐藏\n\t\t\tsetTimeout(function () {\n\t\t\t\tui.boxSoundAlert.style.display = 'none';\n\t\t\t}, 200);\n\t\t}\n\t};\n\tvar recordCancel = false;\n\tvar recorder = null;\n\tvar audio_tips = document.getElementById(\"audio_tips\");\n\tvar startTimestamp = null;\n\tvar stopTimestamp = null;\n\tvar stopTimer = null;\n\tui.boxMsgSound.addEventListener('hold', function (event) {\n\t\trecordCancel = false;\n\t\tif (stopTimer) clearTimeout(stopTimer);\n\t\taudio_tips.innerHTML = \"手指上划，取消发送\";\n\t\tui.boxSoundAlert.classList.remove('rprogress-sigh');\n\t\tsetSoundAlertVisable(true);\n\t\trecorder = plus.audio.getRecorder();\n\t\tif (recorder == null) {\n\t\t\tplus.nativeUI.toast(\"不能获取录音对象\");\n\t\t\treturn;\n\t\t}\n\t\tstartTimestamp = (new Date()).getTime();\n\t\trecorder.record({\n\t\t\tfilename: \"_doc/audio/\"\n\t\t}, function (path) {\n\t\t\tif (recordCancel) return;\n\t\t\tsend({\n\t\t\t\tsender: 'self',\n\t\t\t\ttype: 'sound',\n\t\t\t\tcontent: path\n\t\t\t});\n\t\t}, function (e) {\n\t\t\tplus.nativeUI.toast(\"录音时出现异常: \" + e.message);\n\t\t});\n\t}, false);\n\tui.body.addEventListener('drag', function (event) {\n\t\t//console.log('drag');\n\t\tif (Math.abs(event.detail.deltaY) > 50) {\n\t\t\tif (!recordCancel) {\n\t\t\t\trecordCancel = true;\n\t\t\t\tif (!audio_tips.classList.contains(\"cancel\")) {\n\t\t\t\t\taudio_tips.classList.add(\"cancel\");\n\t\t\t\t}\n\t\t\t\taudio_tips.innerHTML = \"松开手指，取消发送\";\n\t\t\t}\n\t\t} else {\n\t\t\tif (recordCancel) {\n\t\t\t\trecordCancel = false;\n\t\t\t\tif (audio_tips.classList.contains(\"cancel\")) {\n\t\t\t\t\taudio_tips.classList.remove(\"cancel\");\n\t\t\t\t}\n\t\t\t\taudio_tips.innerHTML = \"手指上划，取消发送\";\n\t\t\t}\n\t\t}\n\t}, false);\n\tui.boxMsgSound.addEventListener('release', function (event) {\n\t\t//console.log('release');\n\t\tif (audio_tips.classList.contains(\"cancel\")) {\n\t\t\taudio_tips.classList.remove(\"cancel\");\n\t\t\taudio_tips.innerHTML = \"手指上划，取消发送\";\n\t\t}\n\t\t//\n\t\tstopTimestamp = (new Date()).getTime();\n\t\tif (stopTimestamp - startTimestamp < MIN_SOUND_TIME) {\n\t\t\taudio_tips.innerHTML = \"录音时间太短\";\n\t\t\tui.boxSoundAlert.classList.add('rprogress-sigh');\n\t\t\trecordCancel = true;\n\t\t\tstopTimer = setTimeout(function () {\n\t\t\t\tsetSoundAlertVisable(false);\n\t\t\t}, 800);\n\t\t} else {\n\t\t\tsetSoundAlertVisable(false);\n\t\t}\n\t\trecorder.stop();\n\t}, false);\n\tui.boxMsgSound.addEventListener(\"touchstart\", function (e) {\n\t\t//console.log(\"start....\");\n\t\te.preventDefault();\n\t});\n\tui.boxMsgText.addEventListener('input', function (event) {\n\t\tui.btnMsgType.classList[ui.boxMsgText.value == '' ? 'remove' : 'add']('mui-icon-paperplane');\n\t\tui.btnMsgType.setAttribute(\"for\", ui.boxMsgText.value == '' ? '' : 'msg-text');\n\t\tui.h.innerText = ui.boxMsgText.value.replace(new RegExp('\\n', 'gm'), '\\n-') || '-';\n\t\tui.footer.style.height = (ui.h.offsetHeight + footerPadding) + 'px';\n\t\tui.content.style.paddingBottom = ui.footer.style.height;\n\t});\n\tvar focus = false;\n\tui.boxMsgText.addEventListener('tap', function (event) {\n\t\tui.boxMsgText.focus();\n\t\tsetTimeout(function () {\n\t\t\tui.boxMsgText.focus();\n\t\t}, 0);\n\t\tfocus = true;\n\t\tsetTimeout(function () {\n\t\t\tfocus = false;\n\t\t}, 1000);\n\t\tevent.detail.gesture.preventDefault();\n\t}, false);\n\t//点击消息列表，关闭键盘\n\tui.areaMsgList.addEventListener('click', function (event) {\n\t\tif (!focus) {\n\t\t\tui.boxMsgText.blur();\n\t\t}\n\t})\n\n});\n\n\n\n\n\n\nexport default {}\n</script>\n\n<style>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// app.vue?fed9ddac","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/css/icons-extra.css\n// module id = 11\n// module chunks = 4 6 7 8 10 21","import Vue from 'vue';\nimport App from './app.vue';\nimport 'assets/css/mui.min.css';\nimport 'assets/css/icons-extra.css';\nimport 'assets/css/mui.imageviewer.css';\nimport 'assets/css/public.css';\nimport 'assets/css/match_one.css';\nVue.config.productionTip = false;\nnew Vue({\n    el: '#app',\n    render: h => h(App)\n});\n\n\n// WEBPACK FOOTER //\n// ./src/pages/im-chat/app.js","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/style-loader!./~/css-loader!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-02c1bc88\",\"scoped\":false,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/pages/im-chat/app.vue\n// module id = 165\n// module chunks = 10","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/css/mui.imageviewer.css\n// module id = 20\n// module chunks = 4 6 7 10","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _vm._m(0)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('span', [_c('header', {\n    staticClass: \"mui-bar mui-bar-nav\"\n  }, [_c('a', {\n    staticClass: \"mui-action-back mui-icon mui-icon-left-nav mui-pull-left\"\n  }), _vm._v(\" \"), _c('h1', {\n    staticClass: \"mui-title\"\n  }, [_vm._v(\"chat (聊天窗口)\")])]), _vm._v(\" \"), _c('pre', {\n    attrs: {\n      \"id\": \"h\"\n    }\n  }), _vm._v(\" \"), _c('script', {\n    attrs: {\n      \"id\": \"msg-template\",\n      \"type\": \"text/template\"\n    }\n  }, [_vm._v(\"\\n\\t\\t<% for(var i in record){ var item=record[i]; %>\\n\\t\\t\\t<div class=\\\"msg-item <%= (item.sender=='self'?' msg-item-self':'') %>\\\" msg-type='<%=(item.type)%>' msg-content='<%=(item.content)%>'>\\n\\t\\t\\t\\t<% if(item.sender=='self' ) { %>\\n\\t\\t\\t\\t\\t<i class=\\\"msg-user mui-icon mui-icon-person\\\"></i>\\n\\t\\t\\t\\t<% } else { %>\\n\\t\\t\\t\\t\\t<img class=\\\"msg-user-img\\\" src=\\\"../../assets/img/grzxbg_02.jpg\\\" alt=\\\"\\\" />\\n\\t\\t\\t\\t<% } %>\\n\\t\\t\\t\\t<div class=\\\"msg-content\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"msg-content-inner\\\">\\n\\t\\t\\t\\t\\t\\t<% if(item.type=='text' ) { %>\\n\\t\\t\\t\\t\\t\\t\\t<%=( item.content|| '  ') %>\\n\\t\\t\\t\\t\\t\\t<% } else if(item.type=='image' ) { %>\\n\\t\\t\\t\\t\\t\\t\\t<img class=\\\"msg-content-image\\\" src=\\\"<%=(item.content)%>\\\" style=\\\"max-width: 100px;\\\" />\\n\\t\\t\\t\\t\\t\\t<% } else if(item.type=='sound' ) { %>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"mui-icon mui-icon-mic\\\" style=\\\"font-size: 18px;font-weight: bold;\\\"></span>\\n\\t\\t\\t\\t\\t\\t\\t<span class=\\\"play-state\\\">点击播放</span>\\n\\t\\t\\t\\t\\t\\t<% } %>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t\\t<div class=\\\"msg-content-arrow\\\"></div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t<div class=\\\"mui-item-clear\\\"></div>\\n\\t\\t\\t</div>\\n\\t\\t<% } %>\\n\\t\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"mui-content\"\n  }, [_c('div', {\n    attrs: {\n      \"id\": \"msg-list\"\n    }\n  })]), _vm._v(\" \"), _c('footer', [_c('div', {\n    staticClass: \"footer-left\"\n  }, [_c('i', {\n    staticClass: \"mui-icon mui-icon-camera\",\n    staticStyle: {\n      \"font-size\": \"28px\"\n    },\n    attrs: {\n      \"id\": \"msg-image\"\n    }\n  })]), _vm._v(\" \"), _c('div', {\n    staticClass: \"footer-center\"\n  }, [_c('textarea', {\n    staticClass: \"input-text\",\n    attrs: {\n      \"id\": \"msg-text\",\n      \"type\": \"text\"\n    }\n  }), _vm._v(\" \"), _c('button', {\n    staticClass: \"input-sound\",\n    staticStyle: {\n      \"display\": \"none\"\n    },\n    attrs: {\n      \"id\": \"msg-sound\",\n      \"type\": \"button\"\n    }\n  }, [_vm._v(\"按住说话\")])]), _vm._v(\" \"), _c('label', {\n    staticClass: \"footer-right\",\n    attrs: {\n      \"for\": \"\"\n    }\n  }, [_c('i', {\n    staticClass: \"mui-icon mui-icon-mic\",\n    attrs: {\n      \"id\": \"msg-type\"\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"rprogress\",\n    attrs: {\n      \"id\": \"sound-alert\"\n    }\n  }, [_c('div', {\n    staticClass: \"rschedule\"\n  }), _vm._v(\" \"), _c('div', {\n    staticClass: \"r-sigh\"\n  }, [_vm._v(\"!\")]), _vm._v(\" \"), _c('div', {\n    staticClass: \"rsalert\",\n    attrs: {\n      \"id\": \"audio_tips\"\n    }\n  }, [_vm._v(\"手指上滑，取消发送\")])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-02c1bc88\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/pages/im-chat/app.vue\n// module id = 213\n// module chunks = 10","/*!art-template - Template Engine | http://aui.github.com/artTemplate/*/\n!function(){function a(a){return a.replace(t,\"\").replace(u,\",\").replace(v,\"\").replace(w,\"\").replace(x,\"\").split(y)}function b(a){return\"'\"+a.replace(/('|\\\\)/g,\"\\\\$1\").replace(/\\r/g,\"\\\\r\").replace(/\\n/g,\"\\\\n\")+\"'\"}function c(c,d){function e(a){return m+=a.split(/\\n/).length-1,k&&(a=a.replace(/\\s+/g,\" \").replace(/<!--[\\w\\W]*?-->/g,\"\")),a&&(a=s[1]+b(a)+s[2]+\"\\n\"),a}function f(b){var c=m;if(j?b=j(b,d):g&&(b=b.replace(/\\n/g,function(){return m++,\"$line=\"+m+\";\"})),0===b.indexOf(\"=\")){var e=l&&!/^=[=#]/.test(b);if(b=b.replace(/^=[=#]?|[\\s;]*$/g,\"\"),e){var f=b.replace(/\\s*\\([^\\)]+\\)/,\"\");n[f]||/^(include|print)$/.test(f)||(b=\"$escape(\"+b+\")\")}else b=\"$string(\"+b+\")\";b=s[1]+b+s[2]}return g&&(b=\"$line=\"+c+\";\"+b),r(a(b),function(a){if(a&&!p[a]){var b;b=\"print\"===a?u:\"include\"===a?v:n[a]?\"$utils.\"+a:o[a]?\"$helpers.\"+a:\"$data.\"+a,w+=a+\"=\"+b+\",\",p[a]=!0}}),b+\"\\n\"}var g=d.debug,h=d.openTag,i=d.closeTag,j=d.parser,k=d.compress,l=d.escape,m=1,p={$data:1,$filename:1,$utils:1,$helpers:1,$out:1,$line:1},q=\"\".trim,s=q?[\"$out='';\",\"$out+=\",\";\",\"$out\"]:[\"$out=[];\",\"$out.push(\",\");\",\"$out.join('')\"],t=q?\"$out+=text;return $out;\":\"$out.push(text);\",u=\"function(){var text=''.concat.apply('',arguments);\"+t+\"}\",v=\"function(filename,data){data=data||$data;var text=$utils.$include(filename,data,$filename);\"+t+\"}\",w=\"'use strict';var $utils=this,$helpers=$utils.$helpers,\"+(g?\"$line=0,\":\"\"),x=s[0],y=\"return new String(\"+s[3]+\");\";r(c.split(h),function(a){a=a.split(i);var b=a[0],c=a[1];1===a.length?x+=e(b):(x+=f(b),c&&(x+=e(c)))});var z=w+x+y;g&&(z=\"try{\"+z+\"}catch(e){throw {filename:$filename,name:'Render Error',message:e.message,line:$line,source:\"+b(c)+\".split(/\\\\n/)[$line-1].replace(/^\\\\s+/,'')};}\");try{var A=new Function(\"$data\",\"$filename\",z);return A.prototype=n,A}catch(B){throw B.temp=\"function anonymous($data,$filename) {\"+z+\"}\",B}}var d=function(a,b){return\"string\"==typeof b?q(b,{filename:a}):g(a,b)};d.version=\"3.0.0\",d.config=function(a,b){e[a]=b};var e=d.defaults={openTag:\"<%\",closeTag:\"%>\",escape:!0,cache:!0,compress:!1,parser:null},f=d.cache={};d.render=function(a,b){return q(a,b)};var g=d.renderFile=function(a,b){var c=d.get(a)||p({filename:a,name:\"Render Error\",message:\"Template not found\"});return b?c(b):c};d.get=function(a){var b;if(f[a])b=f[a];else if(\"object\"==typeof document){var c=document.getElementById(a);if(c){var d=(c.value||c.innerHTML).replace(/^\\s*|\\s*$/g,\"\");b=q(d,{filename:a})}}return b};var h=function(a,b){return\"string\"!=typeof a&&(b=typeof a,\"number\"===b?a+=\"\":a=\"function\"===b?h(a.call(a)):\"\"),a},i={\"<\":\"&#60;\",\">\":\"&#62;\",'\"':\"&#34;\",\"'\":\"&#39;\",\"&\":\"&#38;\"},j=function(a){return i[a]},k=function(a){return h(a).replace(/&(?![\\w#]+;)|[<>\"']/g,j)},l=Array.isArray||function(a){return\"[object Array]\"==={}.toString.call(a)},m=function(a,b){var c,d;if(l(a))for(c=0,d=a.length;d>c;c++)b.call(a,a[c],c,a);else for(c in a)b.call(a,a[c],c)},n=d.utils={$helpers:{},$include:g,$string:h,$escape:k,$each:m};d.helper=function(a,b){o[a]=b};var o=d.helpers=n.$helpers;d.onerror=function(a){var b=\"Template Error\\n\\n\";for(var c in a)b+=\"<\"+c+\">\\n\"+a[c]+\"\\n\\n\";\"object\"==typeof console&&console.error(b)};var p=function(a){return d.onerror(a),function(){return\"{Template Error}\"}},q=d.compile=function(a,b){function d(c){try{return new i(c,h)+\"\"}catch(d){return b.debug?p(d)():(b.debug=!0,q(a,b)(c))}}b=b||{};for(var g in e)void 0===b[g]&&(b[g]=e[g]);var h=b.filename;try{var i=c(a,b)}catch(j){return j.filename=h||\"anonymous\",j.name=\"Syntax Error\",p(j)}return d.prototype=i.prototype,d.toString=function(){return i.toString()},h&&b.cache&&(f[h]=d),d},r=n.$each,s=\"break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined\",t=/\\/\\*[\\w\\W]*?\\*\\/|\\/\\/[^\\n]*\\n|\\/\\/[^\\n]*$|\"(?:[^\"\\\\]|\\\\[\\w\\W])*\"|'(?:[^'\\\\]|\\\\[\\w\\W])*'|\\s*\\.\\s*[$\\w\\.]+/g,u=/[^\\w$]+/g,v=new RegExp([\"\\\\b\"+s.replace(/,/g,\"\\\\b|\\\\b\")+\"\\\\b\"].join(\"|\"),\"g\"),w=/^\\d[^,]*|,\\d[^,]*/g,x=/^,+|,+$/g,y=/^$|,+/;\"function\"==typeof define?define(function(){return d}):\"undefined\"!=typeof exports?module.exports=d:this.template=d}();\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/arttmpl.js","/**\n * 图片预览组件\n * varstion 0.4.0\n * by Houfeng\n * Houfeng@DCloud.io\n */\n\n\nmui.init({\n    gestureConfig: {\n        tap: true, //默认为true\n        doubletap: true, //默认为false\n        longtap: true, //默认为false\n        swipe: true, //默认为true\n        drag: true, //默认为true\n        hold: true, //默认为false，不监听\n        release: true //默认为false，不监听\n    }\n});\n\nvar touchSupport = ('ontouchstart' in document);\nvar tapEventName = touchSupport ? 'tap' : 'click';\nvar enterEventName = touchSupport ? 'tap' : 'click';\nvar imageClassName = mui.className('image');\n\n\n//创建DOM (此函数是否可放在 mui.js 中)\nmui.dom = function(str) {\n    if (!mui.__create_dom_div__) {\n        mui.__create_dom_div__ = document.createElement('div');\n    }\n    mui.__create_dom_div__.innerHTML = str;\n    return mui.__create_dom_div__.childNodes;\n};\n\n//图片预览组件类\nvar ImageViewer = mui.ImageViewer = mui.Class.extend({\n    //构造函数\n    init: function(selector, options) {\n        var self = this;\n        self.options = options || {};\n        self.selector = selector || 'img';\n        if (self.options.dbl) {\n            enterEventName = touchSupport ? 'doubletap' : 'dblclick';\n        }\n        self.findAllImage();\n        self.createViewer();\n        self.bindEvent();\n    },\n    //创建图片预览组件的整体 UI\n    createViewer: function() {\n        var self = this;\n        self.viewer = mui.dom(\"<div class='mui-imageviewer'><div class='mui-imageviewer-mask'></div><div class='mui-imageviewer-header'><i class='mui-icon mui-icon-closeempty mui-imageviewer-close'></i><span class='mui-imageviewer-state'></span></div><i class='mui-icon mui-icon-arrowleft  mui-imageviewer-left'></i><i class='mui-icon mui-icon-arrowright mui-imageviewer-right'></i></div>\");\n        self.viewer = self.viewer[0] || self.viewer;\n        //self.viewer.style.height = screen.height;\n        self.closeButton = self.viewer.querySelector('.mui-imageviewer-close');\n        self.state = self.viewer.querySelector('.mui-imageviewer-state');\n        self.leftButton = self.viewer.querySelector('.mui-imageviewer-left');\n        self.rightButton = self.viewer.querySelector('.mui-imageviewer-right');\n        self.mask = self.viewer.querySelector('.mui-imageviewer-mask');\n        document.body.appendChild(self.viewer);\n    },\n    //查找所有符合的图片\n    findAllImage: function() {\n        var self = this;\n        self.images = [].slice.call(mui(self.selector));\n    },\n    //检查图片是否为启动预览的图片\n    checkImage: function(target) {\n        var self = this;\n        if (target.tagName !== 'IMG') return false;\n        return self.images.some(function(image) {\n            return image == target;\n        });\n    },\n    //绑定事件\n    bindEvent: function() {\n        var self = this;\n        //绑定图片 tap 事件\n        document.addEventListener(enterEventName, function(event) {\n            if (!self.viewer) return;\n            var target = event.target;\n            if (!self.checkImage(target)) return;\n            self.viewer.style.display = 'block';\n            setTimeout(function() {\n                self.viewer.style.opacity = 1;\n            }, 0);\n            self.index = self.images.indexOf(target);\n            self.currentItem = self.createImage(self.index);\n        }, false);\n        //关系按钮事件\n        self.closeButton.addEventListener(tapEventName, function(event) {\n            self.viewer.style.opacity = 0;\n            setTimeout(function() {\n                self.viewer.style.display = 'none';\n                self.disposeImage(true);\n            }, 600);\n            event.preventDefault();\n            event.cancelBubble = true;\n        }, false);\n        //处理左右按钮\n        self.leftButton.addEventListener(tapEventName, function() {\n            self.prev();\n        }, false);\n        self.rightButton.addEventListener(tapEventName, function() {\n            self.next();\n        }, false);\n        //处理划动\n        self.mask.addEventListener(mui.EVENT_MOVE, function(event) {\n            event.preventDefault();\n            event.cancelBubble = true;\n        }, false);\n        self.viewer.addEventListener('swipeleft', function(event) {\n            if (self.scaleValue == 1) self.next();\n            event.preventDefault();\n            event.cancelBubble = true;\n        }, false);\n        self.viewer.addEventListener('swiperight', function(event) {\n            if (self.scaleValue == 1) self.prev();\n            event.preventDefault();\n            event.cancelBubble = true;\n        }, false);\n        //处理缩放开始\n        self.viewer.addEventListener(mui.EVENT_START, function(event) {\n            var touches = event.touches;\n            if (touches.length == 2) {\n                var p1 = touches[0];\n                var p2 = touches[1];\n                var x = p1.pageX - p2.pageX; //x1-x2\n                var y = p1.pageY - p2.pageY; //y1-y2\n                self.scaleStart = Math.sqrt(x * x + y * y);\n                self.isMultiTouch = true;\n            } else if (touches.length = 1) {\n                self.dragStart = touches[0];\n            }\n        }, false);\n        self.viewer.addEventListener(mui.EVENT_MOVE, function(event) {\n            var img = self.currentItem.querySelector('img');\n            var touches = event.changedTouches;\n            if (touches.length == 2) {\n                event.preventDefault();\n                event.cancelBubble = true;\n                var p1 = touches[0];\n                var p2 = touches[1];\n                var x = p1.pageX - p2.pageX;\n                var y = p1.pageY - p2.pageY;\n                self.scaleEnd = Math.sqrt(x * x + y * y);\n                self._scaleValue = (self.scaleValue * (self.scaleEnd / self.scaleStart));\n                //self.state.innerText = self._scaleValue;\n                img.style.webkitTransform = \"scale(\" + self._scaleValue + \",\" + self._scaleValue + \") \"; // + \" translate(\" + self.dragX || 0 + \"px,\" + self.dragY || 0 + \"px)\";\n            } else if (!self.isMultiTouch && touches.length == 1 && self.scaleValue != 1) {\n                event.preventDefault();\n                event.cancelBubble = true;\n                self.dragEnd = touches[0];\n                self._dragX = self.dragX + (self.dragEnd.pageX - self.dragStart.pageX);\n                self._dragY = self.dragY + (self.dragEnd.pageY - self.dragStart.pageY);\n                img.style.marginLeft = self._dragX + 'px';\n                img.style.marginTop = self._dragY + 'px';\n                //img.style.transform = \"translate(\" + self._dragX + \"px,\" + self._dragY + \"px) \" + \" scale(\" + self.scaleValue || 1 + \",\" + self.scaleValue || 1 + \")\";\n            }\n        }, false);\n        self.viewer.addEventListener(mui.EVENT_END, function() {\n            self.scaleValue = self._scaleValue || self.scaleValue;\n            self._scaleValue = null;\n            self.dragX = self._dragX;\n            self.dragY = self._dragY;\n            self._dragX = null;\n            self._dragY = null;\n            var touches = event.touches;\n            self.isMultiTouch = (touches.length != 0);\n        });\n        // doubletap 好像不能用\n        self.viewer.addEventListener('doubletap', function() {\n            var img = self.currentItem.querySelector('img');\n            if (self.scaleValue === 1) {\n                self.scaleValue = 2;\n            } else {\n                self.scaleValue = 1;\n            }\n            self.dragX = 0;\n            self.dragY = 0;\n            img.style.marginLeft = self.dragX + 'px';\n            img.style.marginTop = self.dragY + 'px';\n            img.style.webkitTransform = \"scale(\" + self.scaleValue + \",\" + self.scaleValue + \") \"; //+ \" translate(\" + self.dragX || 0 + \"px,\" + self.dragY || 0 + \"px)\";\n            self.viewer.__tap_num = 0;\n        }, false);\n        //处理缩放结束\n    },\n    //下一张图片\n    next: function() {\n        var self = this;\n        self.mask.style.display = 'block';\n        self.index++;\n        var newItem = self.createImage(self.index, 'right');\n        setTimeout(function() {\n            self.currentItem.classList.remove('mui-imageviewer-item-center');\n            self.currentItem.classList.add('mui-imageviewer-item-left');\n            newItem.classList.remove('mui-imageviewer-item-right');\n            newItem.classList.add('mui-imageviewer-item-center');\n            self.oldItem = self.currentItem;\n            self.currentItem = newItem;\n            // TODO: 临时,稍候将调整\n            setTimeout(function() {\n                self.disposeImage();\n                self.mask.style.display = 'none';\n            }, 600);\n        }, 25);\n    },\n    //上一张图片\n    prev: function() {\n        var self = this;\n        self.mask.style.display = 'block';\n        self.index--;\n        var newItem = self.createImage(self.index, 'left');\n        setTimeout(function() {\n            self.currentItem.classList.remove('mui-imageviewer-item-center');\n            self.currentItem.classList.add('mui-imageviewer-item-right');\n            newItem.classList.remove('mui-imageviewer-item-left');\n            newItem.classList.add('mui-imageviewer-item-center');\n            self.oldItem = self.currentItem;\n            self.currentItem = newItem;\n            // TODO: 临时,稍候将调整\n            setTimeout(function() {\n                self.disposeImage();\n                self.mask.style.display = 'none';\n            }, 600);\n        }, 25);\n    },\n    //释放不显示的图片\n    disposeImage: function(all) {\n        var sel = '.mui-imageviewer-item-left,.mui-imageviewer-item-right';\n        if (all) sel += \",.mui-imageviewer-item\";\n        var willdisposes = mui(sel);\n        willdisposes.each(function(i, item) {\n            if (item.parentNode && item.parentNode.removeChild)\n                item.parentNode.removeChild(item, true);\n        });\n    },\n    //创建一个图片\n    createImage: function(index, type) {\n        var self = this;\n        type = type || 'center';\n        if (index < 0) index = self.images.length - 1;\n        if (index > self.images.length - 1) index = 0;\n        self.index = index;\n        var item = mui.dom(\"<div class='mui-imageviewer-item'></div>\")[0];\n        item.appendChild(mui.dom('<span><img src=\"' + self.images[self.index].src + '\"/></span>')[0]);\n        item.classList.add('mui-imageviewer-item-' + type);\n        self.viewer.appendChild(item);\n        self.state.innerText = (self.index + 1) + \"/\" + self.images.length;\n        //重置初始缩放比例\n        self.scaleValue = 1;\n        self.dragX = 0;\n        self.dragY = 0;\n        return item;\n    }\n});\n\nmui.imageViewer = function(selector, options) {\n    return new ImageViewer(selector, options);\n};\n\nmui.ready(function() {\n    mui.imageViewer('.' + imageClassName);\n});\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/mui.imageViewer.js","module.exports = global[\"template\"] = require(\"-!/Users/chenxi/work/vue/multi/new-project/node_modules/babel-loader/lib/index.js!./arttmpl.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/expose-loader?template!./src/assets/js/arttmpl.js\n// module id = 44\n// module chunks = 6 7 10","// removed by extract-text-webpack-plugin\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/css/match_one.css\n// module id = 45\n// module chunks = 6 10","module.exports = global[\"mui\"] = require(\"-!/Users/chenxi/work/vue/multi/new-project/node_modules/babel-loader/lib/index.js!./mui.js\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/expose-loader?mui!./src/assets/js/mui.js\n// module id = 6\n// module chunks = 0 1 2 3 4 5 6 7 8 10 11 12 15 16 17 18 19 20 22 23 24 25 26 27 29 30 31","\n/* styles */\nrequire(\"!!../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!style-loader!css-loader!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-02c1bc88\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./app.vue\")\n\nvar Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./app.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-02c1bc88\\\"}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./app.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/im-chat/app.vue\n// module id = 68\n// module chunks = 10","/*!\n * =====================================================\n * Mui v3.3.0 (http://dev.dcloud.net.cn/mui)\n * =====================================================\n */\n/**\n * MUI核心JS\n * @type _L4.$|Function\n */\nvar mui = (function(document, undefined) {\n    var readyRE = /complete|loaded|interactive/;\n    var idSelectorRE = /^#([\\w-]+)$/;\n    var classSelectorRE = /^\\.([\\w-]+)$/;\n    var tagSelectorRE = /^[\\w-]+$/;\n    var translateRE = /translate(?:3d)?\\((.+?)\\)/;\n    var translateMatrixRE = /matrix(3d)?\\((.+?)\\)/;\n\n    var $ = function(selector, context) {\n        context = context || document;\n        if (!selector)\n            return wrap();\n        if (typeof selector === 'object')\n            if ($.isArrayLike(selector)) {\n                return wrap($.slice.call(selector), null);\n            } else {\n                return wrap([selector], null);\n            }\n        if (typeof selector === 'function')\n            return $.ready(selector);\n        if (typeof selector === 'string') {\n            try {\n                selector = selector.trim();\n                if (idSelectorRE.test(selector)) {\n                    var found = document.getElementById(RegExp.$1);\n                    return wrap(found ? [found] : []);\n                }\n                return wrap($.qsa(selector, context), selector);\n            } catch (e) {}\n        }\n        return wrap();\n    };\n\n    var wrap = function(dom, selector) {\n        dom = dom || [];\n        Object.setPrototypeOf(dom, $.fn);\n        dom.selector = selector || '';\n        return dom;\n    };\n\n    $.uuid = 0;\n\n    $.data = {};\n    /**\n     * extend(simple)\n     * @param {type} target\n     * @param {type} source\n     * @param {type} deep\n     * @returns {unresolved}\n     */\n    $.extend = function() { //from jquery2\n        var options, name, src, copy, copyIsArray, clone,\n            target = arguments[0] || {},\n            i = 1,\n            length = arguments.length,\n            deep = false;\n\n        if (typeof target === \"boolean\") {\n            deep = target;\n\n            target = arguments[i] || {};\n            i++;\n        }\n\n        if (typeof target !== \"object\" && !$.isFunction(target)) {\n            target = {};\n        }\n\n        if (i === length) {\n            target = this;\n            i--;\n        }\n\n        for (; i < length; i++) {\n            if ((options = arguments[i]) != null) {\n                for (name in options) {\n                    src = target[name];\n                    copy = options[name];\n\n                    if (target === copy) {\n                        continue;\n                    }\n\n                    if (deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {\n                        if (copyIsArray) {\n                            copyIsArray = false;\n                            clone = src && $.isArray(src) ? src : [];\n\n                        } else {\n                            clone = src && $.isPlainObject(src) ? src : {};\n                        }\n\n                        target[name] = $.extend(deep, clone, copy);\n\n                    } else if (copy !== undefined) {\n                        target[name] = copy;\n                    }\n                }\n            }\n        }\n\n        return target;\n    };\n    /**\n     * mui noop(function)\n     */\n    $.noop = function() {};\n    /**\n     * mui slice(array)\n     */\n    $.slice = [].slice;\n    /**\n     * mui filter(array)\n     */\n    $.filter = [].filter;\n\n    $.type = function(obj) {\n        return obj == null ? String(obj) : class2type[{}.toString.call(obj)] || \"object\";\n    };\n    /**\n     * mui isArray\n     */\n    $.isArray = Array.isArray ||\n        function(object) {\n            return object instanceof Array;\n        };\n    /**\n     * mui isArrayLike \n     * @param {Object} obj\n     */\n    $.isArrayLike = function(obj) {\n        var length = !!obj && \"length\" in obj && obj.length;\n        var type = $.type(obj);\n        if (type === \"function\" || $.isWindow(obj)) {\n            return false;\n        }\n        return type === \"array\" || length === 0 ||\n            typeof length === \"number\" && length > 0 && (length - 1) in obj;\n    };\n    /**\n     * mui isWindow(需考虑obj为undefined的情况)\n     */\n    $.isWindow = function(obj) {\n        return obj != null && obj === obj.window;\n    };\n    /**\n     * mui isObject\n     */\n    $.isObject = function(obj) {\n        return $.type(obj) === \"object\";\n    };\n    /**\n     * mui isPlainObject\n     */\n    $.isPlainObject = function(obj) {\n        return $.isObject(obj) && !$.isWindow(obj) && Object.getPrototypeOf(obj) === Object.prototype;\n    };\n    /**\n     * mui isEmptyObject\n     * @param {Object} o\n     */\n    $.isEmptyObject = function(o) {\n        for (var p in o) {\n            if (p !== undefined) {\n                return false;\n            }\n        }\n        return true;\n    };\n    /**\n     * mui isFunction\n     */\n    $.isFunction = function(value) {\n        return $.type(value) === \"function\";\n    };\n    /**\n     * mui querySelectorAll\n     * @param {type} selector\n     * @param {type} context\n     * @returns {Array}\n     */\n    $.qsa = function(selector, context) {\n        context = context || document;\n        return $.slice.call(classSelectorRE.test(selector) ? context.getElementsByClassName(RegExp.$1) : tagSelectorRE.test(selector) ? context.getElementsByTagName(selector) : context.querySelectorAll(selector));\n    };\n    /**\n     * ready(DOMContentLoaded)\n     * @param {type} callback\n     * @returns {_L6.$}\n     */\n    $.ready = function(callback) {\n        if (readyRE.test(document.readyState)) {\n            callback($);\n        } else {\n            document.addEventListener('DOMContentLoaded', function() {\n                callback($);\n            }, false);\n        }\n        return this;\n    };\n    /**\n     * 将 fn 缓存一段时间后, 再被调用执行\n     * 此方法为了避免在 ms 段时间内, 执行 fn 多次. 常用于 resize , scroll , mousemove 等连续性事件中;\n     * 当 ms 设置为 -1, 表示立即执行 fn, 即和直接调用 fn 一样;\n     * 调用返回函数的 stop 停止最后一次的 buffer 效果\n     * @param {Object} fn\n     * @param {Object} ms\n     * @param {Object} context\n     */\n    $.buffer = function(fn, ms, context) {\n        var timer;\n        var lastStart = 0;\n        var lastEnd = 0;\n        var ms = ms || 150;\n\n        function run() {\n            if (timer) {\n                timer.cancel();\n                timer = 0;\n            }\n            lastStart = $.now();\n            fn.apply(context || this, arguments);\n            lastEnd = $.now();\n        }\n\n        return $.extend(function() {\n            if (\n                (!lastStart) || // 从未运行过\n                (lastEnd >= lastStart && $.now() - lastEnd > ms) || // 上次运行成功后已经超过ms毫秒\n                (lastEnd < lastStart && $.now() - lastStart > ms * 8) // 上次运行或未完成，后8*ms毫秒\n            ) {\n                run();\n            } else {\n                if (timer) {\n                    timer.cancel();\n                }\n                timer = $.later(run, ms, null, arguments);\n            }\n        }, {\n            stop: function() {\n                if (timer) {\n                    timer.cancel();\n                    timer = 0;\n                }\n            }\n        });\n    };\n    /**\n     * each\n     * @param {type} elements\n     * @param {type} callback\n     * @returns {_L8.$}\n     */\n    $.each = function(elements, callback, hasOwnProperty) {\n        if (!elements) {\n            return this;\n        }\n        if (typeof elements.length === 'number') {\n            [].every.call(elements, function(el, idx) {\n                return callback.call(el, idx, el) !== false;\n            });\n        } else {\n            for (var key in elements) {\n                if (hasOwnProperty) {\n                    if (elements.hasOwnProperty(key)) {\n                        if (callback.call(elements[key], key, elements[key]) === false) return elements;\n                    }\n                } else {\n                    if (callback.call(elements[key], key, elements[key]) === false) return elements;\n                }\n            }\n        }\n        return this;\n    };\n    $.focus = function(element) {\n        if ($.os.ios) {\n            setTimeout(function() {\n                element.focus();\n            }, 10);\n        } else {\n            element.focus();\n        }\n    };\n    /**\n     * trigger event\n     * @param {type} element\n     * @param {type} eventType\n     * @param {type} eventData\n     * @returns {_L8.$}\n     */\n    $.trigger = function(element, eventType, eventData) {\n        element.dispatchEvent(new CustomEvent(eventType, {\n            detail: eventData,\n            bubbles: true,\n            cancelable: true\n        }));\n        return this;\n    };\n    /**\n     * getStyles\n     * @param {type} element\n     * @param {type} property\n     * @returns {styles}\n     */\n    $.getStyles = function(element, property) {\n        var styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\n        if (property) {\n            return styles.getPropertyValue(property) || styles[property];\n        }\n        return styles;\n    };\n    /**\n     * parseTranslate\n     * @param {type} translateString\n     * @param {type} position\n     * @returns {Object}\n     */\n    $.parseTranslate = function(translateString, position) {\n        var result = translateString.match(translateRE || '');\n        if (!result || !result[1]) {\n            result = ['', '0,0,0'];\n        }\n        result = result[1].split(\",\");\n        result = {\n            x: parseFloat(result[0]),\n            y: parseFloat(result[1]),\n            z: parseFloat(result[2])\n        };\n        if (position && result.hasOwnProperty(position)) {\n            return result[position];\n        }\n        return result;\n    };\n    /**\n     * parseTranslateMatrix\n     * @param {type} translateString\n     * @param {type} position\n     * @returns {Object}\n     */\n    $.parseTranslateMatrix = function(translateString, position) {\n        var matrix = translateString.match(translateMatrixRE);\n        var is3D = matrix && matrix[1];\n        if (matrix) {\n            matrix = matrix[2].split(\",\");\n            if (is3D === \"3d\")\n                matrix = matrix.slice(12, 15);\n            else {\n                matrix.push(0);\n                matrix = matrix.slice(4, 7);\n            }\n        } else {\n            matrix = [0, 0, 0];\n        }\n        var result = {\n            x: parseFloat(matrix[0]),\n            y: parseFloat(matrix[1]),\n            z: parseFloat(matrix[2])\n        };\n        if (position && result.hasOwnProperty(position)) {\n            return result[position];\n        }\n        return result;\n    };\n    $.hooks = {};\n    $.addAction = function(type, hook) {\n        var hooks = $.hooks[type];\n        if (!hooks) {\n            hooks = [];\n        }\n        hook.index = hook.index || 1000;\n        hooks.push(hook);\n        hooks.sort(function(a, b) {\n            return a.index - b.index;\n        });\n        $.hooks[type] = hooks;\n        return $.hooks[type];\n    };\n    $.doAction = function(type, callback) {\n        if ($.isFunction(callback)) { //指定了callback\n            $.each($.hooks[type], callback);\n        } else { //未指定callback，直接执行\n            $.each($.hooks[type], function(index, hook) {\n                return !hook.handle();\n            });\n        }\n    };\n    /**\n     * setTimeout封装\n     * @param {Object} fn\n     * @param {Object} when\n     * @param {Object} context\n     * @param {Object} data\n     */\n    $.later = function(fn, when, context, data) {\n        when = when || 0;\n        var m = fn;\n        var d = data;\n        var f;\n        var r;\n\n        if (typeof fn === 'string') {\n            m = context[fn];\n        }\n\n        f = function() {\n            m.apply(context, $.isArray(d) ? d : [d]);\n        };\n\n        r = setTimeout(f, when);\n\n        return {\n            id: r,\n            cancel: function() {\n                clearTimeout(r);\n            }\n        };\n    };\n    $.now = Date.now || function() {\n        return +new Date();\n    };\n    var class2type = {};\n    $.each(['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Object', 'Error'], function(i, name) {\n        class2type[\"[object \" + name + \"]\"] = name.toLowerCase();\n    });\n    if (window.JSON) {\n        $.parseJSON = JSON.parse;\n    }\n    /**\n     * $.fn\n     */\n    $.fn = {\n        each: function(callback) {\n            [].every.call(this, function(el, idx) {\n                return callback.call(el, idx, el) !== false;\n            });\n            return this;\n        }\n    };\n\n    /**\n     * 兼容 AMD 模块\n     **/\n    if (typeof define === 'function' && define.amd) {\n        define('mui', [], function() {\n            return $;\n        });\n    }\n\n    return $;\n})(document);\n// window.mui = mui;\n//'$' in window || (window.$ = mui);\n/**\n * $.os\n * @param {type} $\n * @returns {undefined}\n */\n(function($, window) {\n    function detect(ua) {\n        this.os = {};\n        var funcs = [\n\n            function() { //wechat\n                var wechat = ua.match(/(MicroMessenger)\\/([\\d\\.]+)/i);\n                if (wechat) { //wechat\n                    this.os.wechat = {\n                        version: wechat[2].replace(/_/g, '.')\n                    };\n                }\n                return false;\n            },\n            function() { //android\n                var android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\n                if (android) {\n                    this.os.android = true;\n                    this.os.version = android[2];\n\n                    this.os.isBadAndroid = !(/Chrome\\/\\d/.test(window.navigator.appVersion));\n                }\n                return this.os.android === true;\n            },\n            function() { //ios\n                var iphone = ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\n                if (iphone) { //iphone\n                    this.os.ios = this.os.iphone = true;\n                    this.os.version = iphone[2].replace(/_/g, '.');\n                } else {\n                    var ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\n                    if (ipad) { //ipad\n                        this.os.ios = this.os.ipad = true;\n                        this.os.version = ipad[2].replace(/_/g, '.');\n                    }\n                }\n                return this.os.ios === true;\n            }\n        ];\n        [].every.call(funcs, function(func) {\n            return !func.call($);\n        });\n    }\n    detect.call($, navigator.userAgent);\n})(mui, window);\n/**\n * $.os.plus\n * @param {type} $\n * @returns {undefined}\n */\n(function($, document) {\n    function detect(ua) {\n        this.os = this.os || {};\n        var plus = ua.match(/Html5Plus/i); //TODO 5\\+Browser?\n        if (plus) {\n            this.os.plus = true;\n            $(function() {\n                document.body.classList.add('mui-plus');\n            });\n            if (ua.match(/StreamApp/i)) { //TODO 最好有流应用自己的标识\n                this.os.stream = true;\n                $(function() {\n                    document.body.classList.add('mui-plus-stream');\n                });\n            }\n        }\n    }\n    detect.call($, navigator.userAgent);\n})(mui, document);\n/**\n * 仅提供简单的on，off(仅支持事件委托，不支持当前元素绑定，当前元素绑定请直接使用addEventListener,removeEventListener)\n * @param {Object} $\n */\n(function($) {\n    if ('ontouchstart' in window) {\n        $.isTouchable = true;\n        $.EVENT_START = 'touchstart';\n        $.EVENT_MOVE = 'touchmove';\n        $.EVENT_END = 'touchend';\n    } else {\n        $.isTouchable = false;\n        $.EVENT_START = 'mousedown';\n        $.EVENT_MOVE = 'mousemove';\n        $.EVENT_END = 'mouseup';\n    }\n    $.EVENT_CANCEL = 'touchcancel';\n    $.EVENT_CLICK = 'click';\n\n    var _mid = 1;\n    var delegates = {};\n    //需要wrap的函数\n    var eventMethods = {\n        preventDefault: 'isDefaultPrevented',\n        stopImmediatePropagation: 'isImmediatePropagationStopped',\n        stopPropagation: 'isPropagationStopped'\n    };\n    //默认true返回函数\n    var returnTrue = function() {\n        return true\n    };\n    //默认false返回函数\n    var returnFalse = function() {\n        return false\n    };\n    //wrap浏览器事件\n    var compatible = function(event, target) {\n        if (!event.detail) {\n            event.detail = {\n                currentTarget: target\n            };\n        } else {\n            event.detail.currentTarget = target;\n        }\n        $.each(eventMethods, function(name, predicate) {\n            var sourceMethod = event[name];\n            event[name] = function() {\n                this[predicate] = returnTrue;\n                return sourceMethod && sourceMethod.apply(event, arguments)\n            }\n            event[predicate] = returnFalse;\n        }, true);\n        return event;\n    };\n    //简单的wrap对象_mid\n    var mid = function(obj) {\n        return obj && (obj._mid || (obj._mid = _mid++));\n    };\n    //事件委托对象绑定的事件回调列表\n    var delegateFns = {};\n    //返回事件委托的wrap事件回调\n    var delegateFn = function(element, event, selector, callback) {\n        return function(e) {\n            //same event\n            var callbackObjs = delegates[element._mid][event];\n            var handlerQueue = [];\n            var target = e.target;\n            var selectorAlls = {};\n            for (; target && target !== document; target = target.parentNode) {\n                if (target === element) {\n                    break;\n                }\n                if (~['click', 'tap', 'doubletap', 'longtap', 'hold'].indexOf(event) && (target.disabled || target.classList.contains('mui-disabled'))) {\n                    break;\n                }\n                var matches = {};\n                $.each(callbackObjs, function(selector, callbacks) { //same selector\n                    selectorAlls[selector] || (selectorAlls[selector] = $.qsa(selector, element));\n                    if (selectorAlls[selector] && ~(selectorAlls[selector]).indexOf(target)) {\n                        if (!matches[selector]) {\n                            matches[selector] = callbacks;\n                        }\n                    }\n                }, true);\n                if (!$.isEmptyObject(matches)) {\n                    handlerQueue.push({\n                        element: target,\n                        handlers: matches\n                    });\n                }\n            }\n            selectorAlls = null;\n            e = compatible(e); //compatible event\n            $.each(handlerQueue, function(index, handler) {\n                target = handler.element;\n                var tagName = target.tagName;\n                if (event === 'tap' && (tagName !== 'INPUT' && tagName !== 'TEXTAREA' && tagName !== 'SELECT')) {\n                    e.preventDefault();\n                    e.detail && e.detail.gesture && e.detail.gesture.preventDefault();\n                }\n                $.each(handler.handlers, function(index, handler) {\n                    $.each(handler, function(index, callback) {\n                        if (callback.call(target, e) === false) {\n                            e.preventDefault();\n                            e.stopPropagation();\n                        }\n                    }, true);\n                }, true)\n                if (e.isPropagationStopped()) {\n                    return false;\n                }\n            }, true);\n        };\n    };\n    var findDelegateFn = function(element, event) {\n        var delegateCallbacks = delegateFns[mid(element)];\n        var result = [];\n        if (delegateCallbacks) {\n            result = [];\n            if (event) {\n                var filterFn = function(fn) {\n                    return fn.type === event;\n                }\n                return delegateCallbacks.filter(filterFn);\n            } else {\n                result = delegateCallbacks;\n            }\n        }\n        return result;\n    };\n    var preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n    /**\n     * mui delegate events\n     * @param {type} event\n     * @param {type} selector\n     * @param {type} callback\n     * @returns {undefined}\n     */\n    $.fn.on = function(event, selector, callback) { //仅支持简单的事件委托,主要是tap事件使用，类似mouse,focus之类暂不封装支持\n        return this.each(function() {\n            var element = this;\n            mid(element);\n            mid(callback);\n            var isAddEventListener = false;\n            var delegateEvents = delegates[element._mid] || (delegates[element._mid] = {});\n            var delegateCallbackObjs = delegateEvents[event] || ((delegateEvents[event] = {}));\n            if ($.isEmptyObject(delegateCallbackObjs)) {\n                isAddEventListener = true;\n            }\n            var delegateCallbacks = delegateCallbackObjs[selector] || (delegateCallbackObjs[selector] = []);\n            delegateCallbacks.push(callback);\n            if (isAddEventListener) {\n                var delegateFnArray = delegateFns[mid(element)];\n                if (!delegateFnArray) {\n                    delegateFnArray = [];\n                }\n                var delegateCallback = delegateFn(element, event, selector, callback);\n                delegateFnArray.push(delegateCallback);\n                delegateCallback.i = delegateFnArray.length - 1;\n                delegateCallback.type = event;\n                delegateFns[mid(element)] = delegateFnArray;\n                element.addEventListener(event, delegateCallback);\n                if (event === 'tap') { //TODO 需要找个更好的解决方案\n                    element.addEventListener('click', function(e) {\n                        if (e.target) {\n                            var tagName = e.target.tagName;\n                            if (!preventDefaultException.test(tagName)) {\n                                if (tagName === 'A') {\n                                    var href = e.target.href;\n                                    if (!(href && ~href.indexOf('tel:'))) {\n                                        e.preventDefault();\n                                    }\n                                } else {\n                                    e.preventDefault();\n                                }\n                            }\n                        }\n                    });\n                }\n            }\n        });\n    };\n    $.fn.off = function(event, selector, callback) {\n        return this.each(function() {\n            var _mid = mid(this);\n            if (!event) { //mui(selector).off();\n                delegates[_mid] && delete delegates[_mid];\n            } else if (!selector) { //mui(selector).off(event);\n                delegates[_mid] && delete delegates[_mid][event];\n            } else if (!callback) { //mui(selector).off(event,selector);\n                delegates[_mid] && delegates[_mid][event] && delete delegates[_mid][event][selector];\n            } else { //mui(selector).off(event,selector,callback);\n                var delegateCallbacks = delegates[_mid] && delegates[_mid][event] && delegates[_mid][event][selector];\n                $.each(delegateCallbacks, function(index, delegateCallback) {\n                    if (mid(delegateCallback) === mid(callback)) {\n                        delegateCallbacks.splice(index, 1);\n                        return false;\n                    }\n                }, true);\n            }\n            if (delegates[_mid]) {\n                //如果off掉了所有当前element的指定的event事件，则remove掉当前element的delegate回调\n                if ((!delegates[_mid][event] || $.isEmptyObject(delegates[_mid][event]))) {\n                    findDelegateFn(this, event).forEach(function(fn) {\n                        this.removeEventListener(fn.type, fn);\n                        delete delegateFns[_mid][fn.i];\n                    }.bind(this));\n                }\n            } else {\n                //如果delegates[_mid]已不存在，删除所有\n                findDelegateFn(this).forEach(function(fn) {\n                    this.removeEventListener(fn.type, fn);\n                    delete delegateFns[_mid][fn.i];\n                }.bind(this));\n            }\n        });\n\n    };\n})(mui);\n/**\n * mui target(action>popover>modal>tab>toggle)\n */\n(function($, window, document) {\n    /**\n     * targets\n     */\n    $.targets = {};\n    /**\n     * target handles\n     */\n    $.targetHandles = [];\n    /**\n     * register target\n     * @param {type} target\n     * @returns {$.targets}\n     */\n    $.registerTarget = function(target) {\n\n        target.index = target.index || 1000;\n\n        $.targetHandles.push(target);\n\n        $.targetHandles.sort(function(a, b) {\n            return a.index - b.index;\n        });\n\n        return $.targetHandles;\n    };\n    window.addEventListener($.EVENT_START, function(event) {\n        var target = event.target;\n        var founds = {};\n        for (; target && target !== document; target = target.parentNode) {\n            var isFound = false;\n            $.each($.targetHandles, function(index, targetHandle) {\n                var name = targetHandle.name;\n                if (!isFound && !founds[name] && targetHandle.hasOwnProperty('handle')) {\n                    $.targets[name] = targetHandle.handle(event, target);\n                    if ($.targets[name]) {\n                        founds[name] = true;\n                        if (targetHandle.isContinue !== true) {\n                            isFound = true;\n                        }\n                    }\n                } else {\n                    if (!founds[name]) {\n                        if (targetHandle.isReset !== false)\n                            $.targets[name] = false;\n                    }\n                }\n            });\n            if (isFound) {\n                break;\n            }\n        }\n    });\n    window.addEventListener('click', function(event) { //解决touch与click的target不一致的问题(比如链接边缘点击时，touch的target为html，而click的target为A)\n        var target = event.target;\n        var isFound = false;\n        for (; target && target !== document; target = target.parentNode) {\n            if (target.tagName === 'A') {\n                $.each($.targetHandles, function(index, targetHandle) {\n                    var name = targetHandle.name;\n                    if (targetHandle.hasOwnProperty('handle')) {\n                        if (targetHandle.handle(event, target)) {\n                            isFound = true;\n                            event.preventDefault();\n                            return false;\n                        }\n                    }\n                });\n                if (isFound) {\n                    break;\n                }\n            }\n        }\n    });\n})(mui, window, document);\n/**\n * fixed trim\n * @param {type} undefined\n * @returns {undefined}\n */\n(function(undefined) {\n    if (String.prototype.trim === undefined) { // fix for iOS 3.2\n        String.prototype.trim = function() {\n            return this.replace(/^\\s+|\\s+$/g, '');\n        };\n    }\n    Object.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n        obj['__proto__'] = proto;\n        return obj;\n    };\n\n})();\n/**\n * fixed CustomEvent\n */\n(function() {\n    if (typeof window.CustomEvent === 'undefined') {\n        function CustomEvent(event, params) {\n            params = params || {\n                bubbles: false,\n                cancelable: false,\n                detail: undefined\n            };\n            var evt = document.createEvent('Events');\n            var bubbles = true;\n            for (var name in params) {\n                (name === 'bubbles') ? (bubbles = !!params[name]) : (evt[name] = params[name]);\n            }\n            evt.initEvent(event, bubbles, true);\n            return evt;\n        };\n        CustomEvent.prototype = window.Event.prototype;\n        window.CustomEvent = CustomEvent;\n    }\n})();\n/*\n\tA shim for non ES5 supporting browsers.\n\tAdds function bind to Function prototype, so that you can do partial application.\n\tWorks even with the nasty thing, where the first word is the opposite of extranet, the second one is the profession of Columbus, and the version number is 9, flipped 180 degrees.\n*/\n\nFunction.prototype.bind = Function.prototype.bind || function(to) {\n    // Make an array of our arguments, starting from second argument\n    var partial = Array.prototype.splice.call(arguments, 1),\n        // We'll need the original function.\n        fn = this;\n    var bound = function() {\n            // Join the already applied arguments to the now called ones (after converting to an array again).\n            var args = partial.concat(Array.prototype.splice.call(arguments, 0));\n            // If not being called as a constructor\n            if (!(this instanceof bound)) {\n                // return the result of the function called bound to target and partially applied.\n                return fn.apply(to, args);\n            }\n            // If being called as a constructor, apply the function bound to self.\n            fn.apply(this, args);\n        }\n        // Attach the prototype of the function to our newly created function.\n    bound.prototype = fn.prototype;\n    return bound;\n};\n/**\n * mui fixed classList\n * @param {type} document\n * @returns {undefined}\n */\n(function(document) {\n    if (!(\"classList\" in document.documentElement) && Object.defineProperty && typeof HTMLElement !== 'undefined') {\n\n        Object.defineProperty(HTMLElement.prototype, 'classList', {\n            get: function() {\n                var self = this;\n\n                function update(fn) {\n                    return function(value) {\n                        var classes = self.className.split(/\\s+/),\n                            index = classes.indexOf(value);\n\n                        fn(classes, index, value);\n                        self.className = classes.join(\" \");\n                    };\n                }\n\n                var ret = {\n                    add: update(function(classes, index, value) {\n                        ~index || classes.push(value);\n                    }),\n                    remove: update(function(classes, index) {\n                        ~index && classes.splice(index, 1);\n                    }),\n                    toggle: update(function(classes, index, value) {\n                        ~index ? classes.splice(index, 1) : classes.push(value);\n                    }),\n                    contains: function(value) {\n                        return !!~self.className.split(/\\s+/).indexOf(value);\n                    },\n                    item: function(i) {\n                        return self.className.split(/\\s+/)[i] || null;\n                    }\n                };\n\n                Object.defineProperty(ret, 'length', {\n                    get: function() {\n                        return self.className.split(/\\s+/).length;\n                    }\n                });\n\n                return ret;\n            }\n        });\n    }\n})(document);\n\n/**\n * mui fixed requestAnimationFrame\n * @param {type} window\n * @returns {undefined}\n */\n(function(window) {\n    if (!window.requestAnimationFrame) {\n        var lastTime = 0;\n        window.requestAnimationFrame = window.webkitRequestAnimationFrame || function(callback, element) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\n            var id = window.setTimeout(function() {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n        window.cancelAnimationFrame = window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || function(id) {\n            clearTimeout(id);\n        };\n    };\n}(window));\n/**\n * fastclick(only for radio,checkbox)\n */\n(function($, window, name) {\n    if (!$.os.android && !$.os.ios) { //目前仅识别android和ios\n        return;\n    }\n    if (window.FastClick) {\n        return;\n    }\n\n    var handle = function(event, target) {\n        if (target.tagName === 'LABEL') {\n            if (target.parentNode) {\n                target = target.parentNode.querySelector('input');\n            }\n        }\n        if (target && (target.type === 'radio' || target.type === 'checkbox')) {\n            if (!target.disabled) { //disabled\n                return target;\n            }\n        }\n        return false;\n    };\n\n    $.registerTarget({\n        name: name,\n        index: 40,\n        handle: handle,\n        target: false\n    });\n    var dispatchEvent = function(event) {\n        var targetElement = $.targets.click;\n        if (targetElement) {\n            var clickEvent, touch;\n            // On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect\n            if (document.activeElement && document.activeElement !== targetElement) {\n                document.activeElement.blur();\n            }\n            touch = event.detail.gesture.changedTouches[0];\n            // Synthesise a click event, with an extra attribute so it can be tracked\n            clickEvent = document.createEvent('MouseEvents');\n            clickEvent.initMouseEvent('click', true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n            clickEvent.forwardedTouchEvent = true;\n            targetElement.dispatchEvent(clickEvent);\n            event.detail && event.detail.gesture.preventDefault();\n        }\n    };\n    window.addEventListener('tap', dispatchEvent);\n    window.addEventListener('doubletap', dispatchEvent);\n    //捕获\n    window.addEventListener('click', function(event) {\n        if ($.targets.click) {\n            if (!event.forwardedTouchEvent) { //stop click\n                if (event.stopImmediatePropagation) {\n                    event.stopImmediatePropagation();\n                } else {\n                    // Part of the hack for browsers that don't support Event#stopImmediatePropagation\n                    event.propagationStopped = true;\n                }\n                event.stopPropagation();\n                event.preventDefault();\n                return false;\n            }\n        }\n    }, true);\n\n})(mui, window, 'click');\n(function($, document) {\n    $(function() {\n        if (!$.os.ios) {\n            return;\n        }\n        var CLASS_FOCUSIN = 'mui-focusin';\n        var CLASS_BAR_TAB = 'mui-bar-tab';\n        var CLASS_BAR_FOOTER = 'mui-bar-footer';\n        var CLASS_BAR_FOOTER_SECONDARY = 'mui-bar-footer-secondary';\n        var CLASS_BAR_FOOTER_SECONDARY_TAB = 'mui-bar-footer-secondary-tab';\n        // var content = document.querySelector('.' + CLASS_CONTENT);\n        // if (content) {\n        // \tdocument.body.insertBefore(content, document.body.firstElementChild);\n        // }\n        document.addEventListener('focusin', function(e) {\n            if ($.os.plus) { //在父webview里边不fix\n                if (window.plus) {\n                    if (plus.webview.currentWebview().children().length > 0) {\n                        return;\n                    }\n                }\n            }\n            var target = e.target;\n            //TODO 需考虑所有键盘弹起的情况\n            if (target.tagName && (target.tagName === 'TEXTAREA' || (target.tagName === 'INPUT' && (target.type === 'text' || target.type === 'search' || target.type === 'number')))) {\n                if (target.disabled || target.readOnly) {\n                    return;\n                }\n                document.body.classList.add(CLASS_FOCUSIN);\n                var isFooter = false;\n                for (; target && target !== document; target = target.parentNode) {\n                    var classList = target.classList;\n                    if (classList && classList.contains(CLASS_BAR_TAB) || classList.contains(CLASS_BAR_FOOTER) || classList.contains(CLASS_BAR_FOOTER_SECONDARY) || classList.contains(CLASS_BAR_FOOTER_SECONDARY_TAB)) {\n                        isFooter = true;\n                        break;\n                    }\n                }\n                if (isFooter) {\n                    var scrollTop = document.body.scrollHeight;\n                    var scrollLeft = document.body.scrollLeft;\n                    setTimeout(function() {\n                        window.scrollTo(scrollLeft, scrollTop);\n                    }, 20);\n                }\n            }\n        });\n        document.addEventListener('focusout', function(e) {\n            var classList = document.body.classList;\n            if (classList.contains(CLASS_FOCUSIN)) {\n                classList.remove(CLASS_FOCUSIN);\n                setTimeout(function() {\n                    window.scrollTo(document.body.scrollLeft, document.body.scrollTop);\n                }, 20);\n            }\n        });\n    });\n})(mui, document);\n/**\n * mui namespace(optimization)\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n    $.namespace = 'mui';\n    $.classNamePrefix = $.namespace + '-';\n    $.classSelectorPrefix = '.' + $.classNamePrefix;\n    /**\n     * 返回正确的className\n     * @param {type} className\n     * @returns {String}\n     */\n    $.className = function(className) {\n        return $.classNamePrefix + className;\n    };\n    /**\n     * 返回正确的classSelector\n     * @param {type} classSelector\n     * @returns {String}\n     */\n    $.classSelector = function(classSelector) {\n        return classSelector.replace(/\\./g, $.classSelectorPrefix);\n    };\n    /**\n     * 返回正确的eventName\n     * @param {type} event\n     * @param {type} module\n     * @returns {String}\n     */\n    $.eventName = function(event, module) {\n        return event + ($.namespace ? ('.' + $.namespace) : '') + (module ? ('.' + module) : '');\n    };\n})(mui);\n\n/**\n * mui gestures\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n    $.gestures = {\n        session: {}\n    };\n    /**\n     * Gesture preventDefault\n     * @param {type} e\n     * @returns {undefined}\n     */\n    $.preventDefault = function(e) {\n        e.preventDefault();\n    };\n    /**\n     * Gesture stopPropagation\n     * @param {type} e\n     * @returns {undefined}\n     */\n    $.stopPropagation = function(e) {\n        e.stopPropagation();\n    };\n\n    /**\n     * register gesture\n     * @param {type} gesture\n     * @returns {$.gestures}\n     */\n    $.addGesture = function(gesture) {\n        return $.addAction('gestures', gesture);\n\n    };\n\n    var round = Math.round;\n    var abs = Math.abs;\n    var sqrt = Math.sqrt;\n    var atan = Math.atan;\n    var atan2 = Math.atan2;\n    /**\n     * distance\n     * @param {type} p1\n     * @param {type} p2\n     * @returns {Number}\n     */\n    var getDistance = function(p1, p2, props) {\n        if (!props) {\n            props = ['x', 'y'];\n        }\n        var x = p2[props[0]] - p1[props[0]];\n        var y = p2[props[1]] - p1[props[1]];\n        return sqrt((x * x) + (y * y));\n    };\n    /**\n     * scale\n     * @param {Object} starts\n     * @param {Object} moves\n     */\n    var getScale = function(starts, moves) {\n        if (starts.length >= 2 && moves.length >= 2) {\n            var props = ['pageX', 'pageY'];\n            return getDistance(moves[1], moves[0], props) / getDistance(starts[1], starts[0], props);\n        }\n        return 1;\n    };\n    /**\n     * angle\n     * @param {type} p1\n     * @param {type} p2\n     * @returns {Number}\n     */\n    var getAngle = function(p1, p2, props) {\n        if (!props) {\n            props = ['x', 'y'];\n        }\n        var x = p2[props[0]] - p1[props[0]];\n        var y = p2[props[1]] - p1[props[1]];\n        return atan2(y, x) * 180 / Math.PI;\n    };\n    /**\n     * direction\n     * @param {Object} x\n     * @param {Object} y\n     */\n    var getDirection = function(x, y) {\n        if (x === y) {\n            return '';\n        }\n        if (abs(x) >= abs(y)) {\n            return x > 0 ? 'left' : 'right';\n        }\n        return y > 0 ? 'up' : 'down';\n    };\n    /**\n     * rotation\n     * @param {Object} start\n     * @param {Object} end\n     */\n    var getRotation = function(start, end) {\n        var props = ['pageX', 'pageY'];\n        return getAngle(end[1], end[0], props) - getAngle(start[1], start[0], props);\n    };\n    /**\n     * px per ms\n     * @param {Object} deltaTime\n     * @param {Object} x\n     * @param {Object} y\n     */\n    var getVelocity = function(deltaTime, x, y) {\n        return {\n            x: x / deltaTime || 0,\n            y: y / deltaTime || 0\n        };\n    };\n    /**\n     * detect gestures\n     * @param {type} event\n     * @param {type} touch\n     * @returns {undefined}\n     */\n    var detect = function(event, touch) {\n        if ($.gestures.stoped) {\n            return;\n        }\n        $.doAction('gestures', function(index, gesture) {\n            if (!$.gestures.stoped) {\n                if ($.options.gestureConfig[gesture.name] !== false) {\n                    gesture.handle(event, touch);\n                }\n            }\n        });\n    };\n    /**\n     * 暂时无用\n     * @param {Object} node\n     * @param {Object} parent\n     */\n    var hasParent = function(node, parent) {\n        while (node) {\n            if (node == parent) {\n                return true;\n            }\n            node = node.parentNode;\n        }\n        return false;\n    };\n\n    var uniqueArray = function(src, key, sort) {\n        var results = [];\n        var values = [];\n        var i = 0;\n\n        while (i < src.length) {\n            var val = key ? src[i][key] : src[i];\n            if (values.indexOf(val) < 0) {\n                results.push(src[i]);\n            }\n            values[i] = val;\n            i++;\n        }\n\n        if (sort) {\n            if (!key) {\n                results = results.sort();\n            } else {\n                results = results.sort(function sortUniqueArray(a, b) {\n                    return a[key] > b[key];\n                });\n            }\n        }\n\n        return results;\n    };\n    var getMultiCenter = function(touches) {\n        var touchesLength = touches.length;\n        if (touchesLength === 1) {\n            return {\n                x: round(touches[0].pageX),\n                y: round(touches[0].pageY)\n            };\n        }\n\n        var x = 0;\n        var y = 0;\n        var i = 0;\n        while (i < touchesLength) {\n            x += touches[i].pageX;\n            y += touches[i].pageY;\n            i++;\n        }\n\n        return {\n            x: round(x / touchesLength),\n            y: round(y / touchesLength)\n        };\n    };\n    var multiTouch = function() {\n        return $.options.gestureConfig.pinch;\n    };\n    var copySimpleTouchData = function(touch) {\n        var touches = [];\n        var i = 0;\n        while (i < touch.touches.length) {\n            touches[i] = {\n                pageX: round(touch.touches[i].pageX),\n                pageY: round(touch.touches[i].pageY)\n            };\n            i++;\n        }\n        return {\n            timestamp: $.now(),\n            gesture: touch.gesture,\n            touches: touches,\n            center: getMultiCenter(touch.touches),\n            deltaX: touch.deltaX,\n            deltaY: touch.deltaY\n        };\n    };\n\n    var calDelta = function(touch) {\n        var session = $.gestures.session;\n        var center = touch.center;\n        var offset = session.offsetDelta || {};\n        var prevDelta = session.prevDelta || {};\n        var prevTouch = session.prevTouch || {};\n\n        if (touch.gesture.type === $.EVENT_START || touch.gesture.type === $.EVENT_END) {\n            prevDelta = session.prevDelta = {\n                x: prevTouch.deltaX || 0,\n                y: prevTouch.deltaY || 0\n            };\n\n            offset = session.offsetDelta = {\n                x: center.x,\n                y: center.y\n            };\n        }\n        touch.deltaX = prevDelta.x + (center.x - offset.x);\n        touch.deltaY = prevDelta.y + (center.y - offset.y);\n    };\n    var calTouchData = function(touch) {\n        var session = $.gestures.session;\n        var touches = touch.touches;\n        var touchesLength = touches.length;\n\n        if (!session.firstTouch) {\n            session.firstTouch = copySimpleTouchData(touch);\n        }\n\n        if (multiTouch() && touchesLength > 1 && !session.firstMultiTouch) {\n            session.firstMultiTouch = copySimpleTouchData(touch);\n        } else if (touchesLength === 1) {\n            session.firstMultiTouch = false;\n        }\n\n        var firstTouch = session.firstTouch;\n        var firstMultiTouch = session.firstMultiTouch;\n        var offsetCenter = firstMultiTouch ? firstMultiTouch.center : firstTouch.center;\n\n        var center = touch.center = getMultiCenter(touches);\n        touch.timestamp = $.now();\n        touch.deltaTime = touch.timestamp - firstTouch.timestamp;\n\n        touch.angle = getAngle(offsetCenter, center);\n        touch.distance = getDistance(offsetCenter, center);\n\n        calDelta(touch);\n\n        touch.offsetDirection = getDirection(touch.deltaX, touch.deltaY);\n\n        touch.scale = firstMultiTouch ? getScale(firstMultiTouch.touches, touches) : 1;\n        touch.rotation = firstMultiTouch ? getRotation(firstMultiTouch.touches, touches) : 0;\n\n        calIntervalTouchData(touch);\n\n    };\n    var CAL_INTERVAL = 25;\n    var calIntervalTouchData = function(touch) {\n        var session = $.gestures.session;\n        var last = session.lastInterval || touch;\n        var deltaTime = touch.timestamp - last.timestamp;\n        var velocity;\n        var velocityX;\n        var velocityY;\n        var direction;\n\n        if (touch.gesture.type != $.EVENT_CANCEL && (deltaTime > CAL_INTERVAL || last.velocity === undefined)) {\n            var deltaX = last.deltaX - touch.deltaX;\n            var deltaY = last.deltaY - touch.deltaY;\n\n            var v = getVelocity(deltaTime, deltaX, deltaY);\n            velocityX = v.x;\n            velocityY = v.y;\n            velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n            direction = getDirection(deltaX, deltaY) || last.direction;\n\n            session.lastInterval = touch;\n        } else {\n            velocity = last.velocity;\n            velocityX = last.velocityX;\n            velocityY = last.velocityY;\n            direction = last.direction;\n        }\n\n        touch.velocity = velocity;\n        touch.velocityX = velocityX;\n        touch.velocityY = velocityY;\n        touch.direction = direction;\n    };\n    var targetIds = {};\n    var convertTouches = function(touches) {\n        for (var i = 0; i < touches.length; i++) {\n            !touches['identifier'] && (touches['identifier'] = 0);\n        }\n        return touches;\n    };\n    var getTouches = function(event, touch) {\n        var allTouches = convertTouches($.slice.call(event.touches || [event]));\n\n        var type = event.type;\n\n        var targetTouches = [];\n        var changedTargetTouches = [];\n\n        //当touchstart或touchmove且touches长度为1，直接获得all和changed\n        if ((type === $.EVENT_START || type === $.EVENT_MOVE) && allTouches.length === 1) {\n            targetIds[allTouches[0].identifier] = true;\n            targetTouches = allTouches;\n            changedTargetTouches = allTouches;\n            touch.target = event.target;\n        } else {\n            var i = 0;\n            var targetTouches = [];\n            var changedTargetTouches = [];\n            var changedTouches = convertTouches($.slice.call(event.changedTouches || [event]));\n\n            touch.target = event.target;\n            var sessionTarget = $.gestures.session.target || event.target;\n            targetTouches = allTouches.filter(function(touch) {\n                return hasParent(touch.target, sessionTarget);\n            });\n\n            if (type === $.EVENT_START) {\n                i = 0;\n                while (i < targetTouches.length) {\n                    targetIds[targetTouches[i].identifier] = true;\n                    i++;\n                }\n            }\n\n            i = 0;\n            while (i < changedTouches.length) {\n                if (targetIds[changedTouches[i].identifier]) {\n                    changedTargetTouches.push(changedTouches[i]);\n                }\n                if (type === $.EVENT_END || type === $.EVENT_CANCEL) {\n                    delete targetIds[changedTouches[i].identifier];\n                }\n                i++;\n            }\n\n            if (!changedTargetTouches.length) {\n                return false;\n            }\n        }\n        targetTouches = uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true);\n        var touchesLength = targetTouches.length;\n        var changedTouchesLength = changedTargetTouches.length;\n        if (type === $.EVENT_START && touchesLength - changedTouchesLength === 0) { //first\n            touch.isFirst = true;\n            $.gestures.touch = $.gestures.session = {\n                target: event.target\n            };\n        }\n        touch.isFinal = ((type === $.EVENT_END || type === $.EVENT_CANCEL) && (touchesLength - changedTouchesLength === 0));\n\n        touch.touches = targetTouches;\n        touch.changedTouches = changedTargetTouches;\n        return true;\n\n    };\n    var handleTouchEvent = function(event) {\n        var touch = {\n            gesture: event\n        };\n        var touches = getTouches(event, touch);\n        if (!touches) {\n            return;\n        }\n        calTouchData(touch);\n        detect(event, touch);\n        $.gestures.session.prevTouch = touch;\n        if (event.type === $.EVENT_END && !$.isTouchable) {\n            $.gestures.touch = $.gestures.session = {};\n        }\n    };\n    window.addEventListener($.EVENT_START, handleTouchEvent);\n    window.addEventListener($.EVENT_MOVE, handleTouchEvent);\n    window.addEventListener($.EVENT_END, handleTouchEvent);\n    window.addEventListener($.EVENT_CANCEL, handleTouchEvent);\n    //fixed hashchange(android)\n    window.addEventListener($.EVENT_CLICK, function(e) {\n        //TODO 应该判断当前target是不是在targets.popover内部，而不是非要相等\n        if (($.os.android || $.os.ios) && (($.targets.popover && e.target === $.targets.popover) || ($.targets.tab) || $.targets.offcanvas || $.targets.modal)) {\n            e.preventDefault();\n        }\n    }, true);\n\n\n    //增加原生滚动识别\n    $.isScrolling = false;\n    var scrollingTimeout = null;\n    window.addEventListener('scroll', function() {\n        $.isScrolling = true;\n        scrollingTimeout && clearTimeout(scrollingTimeout);\n        scrollingTimeout = setTimeout(function() {\n            $.isScrolling = false;\n        }, 250);\n    });\n})(mui, window);\n/**\n * mui gesture flick[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n    var flickStartTime = 0;\n    var handle = function(event, touch) {\n        var session = $.gestures.session;\n        var options = this.options;\n        var now = $.now();\n        switch (event.type) {\n            case $.EVENT_MOVE:\n                if (now - flickStartTime > 300) {\n                    flickStartTime = now;\n                    session.flickStart = touch.center;\n                }\n                break;\n            case $.EVENT_END:\n            case $.EVENT_CANCEL:\n                touch.flick = false;\n                if (session.flickStart && options.flickMaxTime > (now - flickStartTime) && touch.distance > options.flickMinDistince) {\n                    touch.flick = true;\n                    touch.flickTime = now - flickStartTime;\n                    touch.flickDistanceX = touch.center.x - session.flickStart.x;\n                    touch.flickDistanceY = touch.center.y - session.flickStart.y;\n                    $.trigger(session.target, name, touch);\n                    $.trigger(session.target, name + touch.direction, touch);\n                }\n                break;\n        }\n\n    };\n    /**\n     * mui gesture flick\n     */\n    $.addGesture({\n        name: name,\n        index: 5,\n        handle: handle,\n        options: {\n            flickMaxTime: 200,\n            flickMinDistince: 10\n        }\n    });\n})(mui, 'flick');\n/**\n * mui gesture swipe[left|right|up|down]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n    var handle = function(event, touch) {\n        var session = $.gestures.session;\n        if (event.type === $.EVENT_END || event.type === $.EVENT_CANCEL) {\n            var options = this.options;\n            touch.swipe = false;\n            //TODO 后续根据velocity计算\n            if (touch.direction && options.swipeMaxTime > touch.deltaTime && touch.distance > options.swipeMinDistince) {\n                touch.swipe = true;\n                $.trigger(session.target, name, touch);\n                $.trigger(session.target, name + touch.direction, touch);\n            }\n        }\n    };\n    /**\n     * mui gesture swipe\n     */\n    $.addGesture({\n        name: name,\n        index: 10,\n        handle: handle,\n        options: {\n            swipeMaxTime: 300,\n            swipeMinDistince: 18\n        }\n    });\n})(mui, 'swipe');\n/**\n * mui gesture drag[start|left|right|up|down|end]\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n    var handle = function(event, touch) {\n        var session = $.gestures.session;\n        switch (event.type) {\n            case $.EVENT_START:\n                break;\n            case $.EVENT_MOVE:\n                if (!touch.direction || !session.target) {\n                    return;\n                }\n                //修正direction,可在session期间自行锁定拖拽方向，方便开发scroll类不同方向拖拽插件嵌套\n                if (session.lockDirection && session.startDirection) {\n                    if (session.startDirection && session.startDirection !== touch.direction) {\n                        if (session.startDirection === 'up' || session.startDirection === 'down') {\n                            touch.direction = touch.deltaY < 0 ? 'up' : 'down';\n                        } else {\n                            touch.direction = touch.deltaX < 0 ? 'left' : 'right';\n                        }\n                    }\n                }\n\n                if (!session.drag) {\n                    session.drag = true;\n                    $.trigger(session.target, name + 'start', touch);\n                }\n                $.trigger(session.target, name, touch);\n                $.trigger(session.target, name + touch.direction, touch);\n                break;\n            case $.EVENT_END:\n            case $.EVENT_CANCEL:\n                if (session.drag && touch.isFinal) {\n                    $.trigger(session.target, name + 'end', touch);\n                }\n                break;\n        }\n    };\n    /**\n     * mui gesture drag\n     */\n    $.addGesture({\n        name: name,\n        index: 20,\n        handle: handle,\n        options: {\n            fingers: 1\n        }\n    });\n})(mui, 'drag');\n/**\n * mui gesture tap and doubleTap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n    var lastTarget;\n    var lastTapTime;\n    var handle = function(event, touch) {\n        var session = $.gestures.session;\n        var options = this.options;\n        switch (event.type) {\n            case $.EVENT_END:\n                if (!touch.isFinal) {\n                    return;\n                }\n                var target = session.target;\n                if (!target || (target.disabled || (target.classList && target.classList.contains('mui-disabled')))) {\n                    return;\n                }\n                if (touch.distance < options.tapMaxDistance && touch.deltaTime < options.tapMaxTime) {\n                    if ($.options.gestureConfig.doubletap && lastTarget && (lastTarget === target)) { //same target\n                        if (lastTapTime && (touch.timestamp - lastTapTime) < options.tapMaxInterval) {\n                            $.trigger(target, 'doubletap', touch);\n                            lastTapTime = $.now();\n                            lastTarget = target;\n                            return;\n                        }\n                    }\n                    $.trigger(target, name, touch);\n                    lastTapTime = $.now();\n                    lastTarget = target;\n                }\n                break;\n        }\n    };\n    /**\n     * mui gesture tap\n     */\n    $.addGesture({\n        name: name,\n        index: 30,\n        handle: handle,\n        options: {\n            fingers: 1,\n            tapMaxInterval: 300,\n            tapMaxDistance: 5,\n            tapMaxTime: 250\n        }\n    });\n})(mui, 'tap');\n/**\n * mui gesture longtap\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n    var timer;\n    var handle = function(event, touch) {\n        var session = $.gestures.session;\n        var options = this.options;\n        switch (event.type) {\n            case $.EVENT_START:\n                clearTimeout(timer);\n                timer = setTimeout(function() {\n                    $.trigger(session.target, name, touch);\n                }, options.holdTimeout);\n                break;\n            case $.EVENT_MOVE:\n                if (touch.distance > options.holdThreshold) {\n                    clearTimeout(timer);\n                }\n                break;\n            case $.EVENT_END:\n            case $.EVENT_CANCEL:\n                clearTimeout(timer);\n                break;\n        }\n    };\n    /**\n     * mui gesture longtap\n     */\n    $.addGesture({\n        name: name,\n        index: 10,\n        handle: handle,\n        options: {\n            fingers: 1,\n            holdTimeout: 500,\n            holdThreshold: 2\n        }\n    });\n})(mui, 'longtap');\n/**\n * mui gesture hold\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n    var timer;\n    var handle = function(event, touch) {\n        var session = $.gestures.session;\n        var options = this.options;\n        switch (event.type) {\n            case $.EVENT_START:\n                if ($.options.gestureConfig.hold) {\n                    timer && clearTimeout(timer);\n                    timer = setTimeout(function() {\n                        touch.hold = true;\n                        $.trigger(session.target, name, touch);\n                    }, options.holdTimeout);\n                }\n                break;\n            case $.EVENT_MOVE:\n                break;\n            case $.EVENT_END:\n            case $.EVENT_CANCEL:\n                if (timer) {\n                    clearTimeout(timer) && (timer = null);\n                    $.trigger(session.target, 'release', touch);\n                }\n                break;\n        }\n    };\n    /**\n     * mui gesture hold\n     */\n    $.addGesture({\n        name: name,\n        index: 10,\n        handle: handle,\n        options: {\n            fingers: 1,\n            holdTimeout: 0\n        }\n    });\n})(mui, 'hold');\n/**\n * mui gesture pinch\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n    var handle = function(event, touch) {\n        var options = this.options;\n        var session = $.gestures.session;\n        switch (event.type) {\n            case $.EVENT_START:\n                break;\n            case $.EVENT_MOVE:\n                if ($.options.gestureConfig.pinch) {\n                    if (touch.touches.length < 2) {\n                        return;\n                    }\n                    if (!session.pinch) { //start\n                        session.pinch = true;\n                        $.trigger(session.target, name + 'start', touch);\n                    }\n                    $.trigger(session.target, name, touch);\n                    var scale = touch.scale;\n                    var rotation = touch.rotation;\n                    var lastScale = typeof touch.lastScale === 'undefined' ? 1 : touch.lastScale;\n                    var scaleDiff = 0.000000000001; //防止scale与lastScale相等，不触发事件的情况。\n                    if (scale > lastScale) { //out\n                        lastScale = scale - scaleDiff;\n                        $.trigger(session.target, name + 'out', touch);\n                    } //in\n                    else if (scale < lastScale) {\n                        lastScale = scale + scaleDiff;\n                        $.trigger(session.target, name + 'in', touch);\n                    }\n                    if (Math.abs(rotation) > options.minRotationAngle) {\n                        $.trigger(session.target, 'rotate', touch);\n                    }\n                }\n                break;\n            case $.EVENT_END:\n            case $.EVENT_CANCEL:\n                if ($.options.gestureConfig.pinch && session.pinch && touch.touches.length === 2) {\n                    session.pinch = false;\n                    $.trigger(session.target, name + 'end', touch);\n                }\n                break;\n        }\n    };\n    /**\n     * mui gesture pinch\n     */\n    $.addGesture({\n        name: name,\n        index: 10,\n        handle: handle,\n        options: {\n            minRotationAngle: 0\n        }\n    });\n})(mui, 'pinch');\n/**\n * mui.init\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n    $.global = $.options = {\n        gestureConfig: {\n            tap: true,\n            doubletap: false,\n            longtap: false,\n            hold: false,\n            flick: true,\n            swipe: true,\n            drag: true,\n            pinch: false\n        }\n    };\n    /**\n     *\n     * @param {type} options\n     * @returns {undefined}\n     */\n    $.initGlobal = function(options) {\n        $.options = $.extend(true, $.global, options);\n        return this;\n    };\n    var inits = {};\n\n    var isInitialized = false;\n    //TODO 自动调用init?因为用户自己调用init的时机可能不确定，如果晚于自动init，则会有潜在问题\n    //\t$.ready(function() {\n    //\t\tsetTimeout(function() {\n    //\t\t\tif (!isInitialized) {\n    //\t\t\t\t$.init();\n    //\t\t\t}\n    //\t\t}, 300);\n    //\t});\n    /**\n     * 单页配置 初始化\n     * @param {object} options\n     */\n    $.init = function(options) {\n        isInitialized = true;\n        $.options = $.extend(true, $.global, options || {});\n        $.ready(function() {\n            $.doAction('inits', function(index, init) {\n                var isInit = !!(!inits[init.name] || init.repeat);\n                if (isInit) {\n                    init.handle.call($);\n                    inits[init.name] = true;\n                }\n            });\n        });\n        return this;\n    };\n\n    /**\n     * 增加初始化执行流程\n     * @param {function} init\n     */\n    $.addInit = function(init) {\n        return $.addAction('inits', init);\n    };\n    /**\n     * 处理html5版本subpages \n     */\n    $.addInit({\n        name: 'iframe',\n        index: 100,\n        handle: function() {\n            var options = $.options;\n            var subpages = options.subpages || [];\n            if (!$.os.plus && subpages.length) {\n                //暂时只处理单个subpage。后续可以考虑支持多个subpage\n                createIframe(subpages[0]);\n            }\n        }\n    });\n    var createIframe = function(options) {\n        var wrapper = document.createElement('div');\n        wrapper.className = 'mui-iframe-wrapper';\n        var styles = options.styles || {};\n        if (typeof styles.top !== 'string') {\n            styles.top = '0px';\n        }\n        if (typeof styles.bottom !== 'string') {\n            styles.bottom = '0px';\n        }\n        wrapper.style.top = styles.top;\n        wrapper.style.bottom = styles.bottom;\n        var iframe = document.createElement('iframe');\n        iframe.src = options.url;\n        iframe.id = options.id || options.url;\n        iframe.name = iframe.id;\n        wrapper.appendChild(iframe);\n        document.body.appendChild(wrapper);\n        //目前仅处理微信\n        $.os.wechat && handleScroll(wrapper, iframe);\n    };\n\n    function handleScroll(wrapper, iframe) {\n        var key = 'MUI_SCROLL_POSITION_' + document.location.href + '_' + iframe.src;\n        var scrollTop = (parseFloat(localStorage.getItem(key)) || 0);\n        if (scrollTop) {\n            (function(y) {\n                iframe.onload = function() {\n                    window.scrollTo(0, y);\n                };\n            })(scrollTop);\n        }\n        setInterval(function() {\n            var _scrollTop = window.scrollY;\n            if (scrollTop !== _scrollTop) {\n                localStorage.setItem(key, _scrollTop + '');\n                scrollTop = _scrollTop;\n            }\n        }, 100);\n    };\n    $(function() {\n        var classList = document.body.classList;\n        var os = [];\n        if ($.os.ios) {\n            os.push({\n                os: 'ios',\n                version: $.os.version\n            });\n            classList.add('mui-ios');\n        } else if ($.os.android) {\n            os.push({\n                os: 'android',\n                version: $.os.version\n            });\n            classList.add('mui-android');\n        }\n        if ($.os.wechat) {\n            os.push({\n                os: 'wechat',\n                version: $.os.wechat.version\n            });\n            classList.add('mui-wechat');\n        }\n        if (os.length) {\n            $.each(os, function(index, osObj) {\n                var version = '';\n                var classArray = [];\n                if (osObj.version) {\n                    $.each(osObj.version.split('.'), function(i, v) {\n                        version = version + (version ? '-' : '') + v;\n                        classList.add($.className(osObj.os + '-' + version));\n                    });\n                }\n            });\n        }\n    });\n})(mui);\n/**\n * mui.init 5+\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n    var defaultOptions = {\n        swipeBack: false,\n        preloadPages: [], //5+ lazyLoad webview\n        preloadLimit: 10, //预加载窗口的数量限制(一旦超出，先进先出)\n        keyEventBind: {\n            backbutton: true,\n            menubutton: true\n        }\n    };\n\n    //默认页面动画\n    var defaultShow = {\n        autoShow: true,\n        duration: $.os.ios ? 200 : 100,\n        aniShow: 'slide-in-right'\n    };\n    //若执行了显示动画初始化操作，则要覆盖默认配置\n    if ($.options.show) {\n        defaultShow = $.extend(true, defaultShow, $.options.show);\n    }\n\n    $.currentWebview = null;\n    $.isHomePage = false;\n\n    $.extend(true, $.global, defaultOptions);\n    $.extend(true, $.options, defaultOptions);\n    /**\n     * 等待动画配置\n     * @param {type} options\n     * @returns {Object}\n     */\n    $.waitingOptions = function(options) {\n        return $.extend(true, {}, {\n            autoShow: true,\n            title: '',\n            modal: false\n        }, options);\n    };\n    /**\n     * 窗口显示配置\n     * @param {type} options\n     * @returns {Object}\n     */\n    $.showOptions = function(options) {\n        return $.extend(true, {}, defaultShow, options);\n    };\n    /**\n     * 窗口默认配置\n     * @param {type} options\n     * @returns {Object}\n     */\n    $.windowOptions = function(options) {\n        return $.extend({\n            scalable: false,\n            bounce: \"\" //vertical\n        }, options);\n    };\n    /**\n     * plusReady\n     * @param {type} callback\n     * @returns {_L6.$}\n     */\n    $.plusReady = function(callback) {\n        if (window.plus) {\n            setTimeout(function() { //解决callback与plusready事件的执行时机问题(典型案例:showWaiting,closeWaiting)\n                callback();\n            }, 0);\n        } else {\n            document.addEventListener(\"plusready\", function() {\n                callback();\n            }, false);\n        }\n        return this;\n    };\n    /**\n     * 5+ event(5+没提供之前我自己实现)\n     * @param {type} webview\n     * @param {type} eventType\n     * @param {type} data\n     * @returns {undefined}\n     */\n    $.receive = function(eventType, data) {\n        if (eventType) {\n            try {\n                if (data) {\n                    data = JSON.parse(data);\n                }\n            } catch (e) {}\n            $.trigger(document, eventType, data);\n        }\n    };\n    $.fire = function(webview, eventType, data) {\n        if (webview) {\n            if (data !== '') {\n                data = data || {};\n                if ($.isPlainObject(data)) {\n                    data = JSON.stringify(data || {}).replace(/\\'/g, \"\\\\u0027\").replace(/\\\\/g, \"\\\\u005c\");\n                }\n            }\n            webview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"','\" + data + \"')\");\n        }\n    };\n    /**\n     * 5+ event(5+没提供之前我自己实现)\n     * @param {type} eventType\n     * @param {type} data\n     * @returns {undefined}\n     */\n\n    var triggerPreload = function(webview) {\n        if (!webview.preloaded) {\n            $.fire(webview, 'preload');\n            var list = webview.children();\n            for (var i = 0; i < list.length; i++) {\n                $.fire(list[i], 'preload');\n            }\n            webview.preloaded = true;\n        }\n    };\n    var trigger = function(webview, eventType, timeChecked) {\n        if (timeChecked) {\n            if (!webview[eventType + 'ed']) {\n                $.fire(webview, eventType);\n                var list = webview.children();\n                for (var i = 0; i < list.length; i++) {\n                    $.fire(list[i], eventType);\n                }\n                webview[eventType + 'ed'] = true;\n            }\n        } else {\n            $.fire(webview, eventType);\n            var list = webview.children();\n            for (var i = 0; i < list.length; i++) {\n                $.fire(list[i], eventType);\n            }\n        }\n\n    };\n    /**\n     * 打开新窗口\n     * @param {string} url 要打开的页面地址\n     * @param {string} id 指定页面ID\n     * @param {object} options 可选:参数,等待,窗口,显示配置{params:{},waiting:{},styles:{},show:{}}\n     */\n    $.openWindow = function(url, id, options) {\n        if (typeof url === 'object') {\n            options = url;\n            url = options.url;\n            id = options.id || url;\n        } else {\n            if (typeof id === 'object') {\n                options = id;\n                id = url;\n            } else {\n                id = id || url;\n            }\n        }\n        if (!$.os.plus) {\n            //TODO 先临时这么处理：手机上顶层跳，PC上parent跳\n            if ($.os.ios || $.os.android) {\n                window.top.location.href = url;\n            } else {\n                window.parent.location.href = url;\n            }\n            return;\n        }\n        if (!window.plus) {\n            return;\n        }\n\n        options = options || {};\n        var params = options.params || {};\n        var webview = null,\n            webviewCache = null,\n            nShow, nWaiting;\n\n        if ($.webviews[id]) {\n            webviewCache = $.webviews[id];\n            //webview真实存在，才能获取\n            if (plus.webview.getWebviewById(id)) {\n                webview = webviewCache.webview;\n            }\n        }\n\n        if (webviewCache && webview) { //已缓存\n            //每次show都需要传递动画参数；\n            //预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\n            nShow = webviewCache.show;\n            nShow = options.show ? $.extend(nShow, options.show) : nShow;\n            webview.show(nShow.aniShow, nShow.duration, function() {\n                triggerPreload(webview);\n                trigger(webview, 'pagebeforeshow', false);\n            });\n\n            webviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n            return webview;\n        } else { //新窗口\n            if (options.createNew !== true) {\n                webview = plus.webview.getWebviewById(id);\n                if (webview) { //如果已存在\n                    nShow = $.showOptions(options.show);\n                    nShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function() {\n                        triggerPreload(webview);\n                        trigger(webview, 'pagebeforeshow', false);\n                    });\n                    return webview;\n                } else {\n                    if (!url) {\n                        throw new Error('webview[' + id + '] does not exist');\n                    }\n                }\n            }\n            //显示waiting\n            var waitingConfig = $.waitingOptions(options.waiting);\n            if (waitingConfig.autoShow) {\n                nWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\n            }\n            //创建页面\n            options = $.extend(options, {\n                id: id,\n                url: url\n            });\n\n            webview = $.createWindow(options);\n            //显示\n            nShow = $.showOptions(options.show);\n            if (nShow.autoShow) {\n                var showWebview = function() {\n                    //关闭等待框\n                    if (nWaiting) {\n                        nWaiting.close();\n                    }\n                    //显示页面\n                    webview.show(nShow.aniShow, nShow.duration, function() {\n                        //titleUpdate事件发生较早，很多环境尚不具备\n                        // triggerPreload(webview);\n                        // trigger(webview, 'pagebeforeshow', false);\n                    });\n                    webview.showed = true;\n                    options.afterShowMethodName && webview.evalJS(options.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\n                };\n                //TODO 能走到这一步，应该不用判断url了吧？\n                if (!url) {\n                    showWebview();\n                } else {\n                    // webview.addEventListener(\"loaded\", showWebview, false);\n                    //titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\n                    webview.addEventListener(\"titleUpdate\", showWebview, false);\n                    //loaded事件发生后，触发预加载和pagebeforeshow事件\n                    webview.addEventListener(\"loaded\", function() {\n                        triggerPreload(webview);\n                        trigger(webview, 'pagebeforeshow', false);\n                    }, false);\n                }\n            }\n        }\n        return webview;\n    };\n    /**\n     * 根据配置信息创建一个webview\n     * @param {type} options\n     * @param {type} isCreate\n     * @returns {webview}\n     */\n    $.createWindow = function(options, isCreate) {\n        if (!window.plus) {\n            return;\n        }\n        var id = options.id || options.url;\n        var webview;\n        if (options.preload) {\n            if ($.webviews[id] && $.webviews[id].webview.getURL()) { //已经cache\n                webview = $.webviews[id].webview;\n            } else { //新增预加载窗口\n                //preload\n                //判断是否携带createNew参数，默认为false\n                if (options.createNew !== true) {\n                    webview = plus.webview.getWebviewById(id);\n                }\n\n                //之前没有，那就新创建\t\n                if (!webview) {\n                    webview = plus.webview.create(options.url, id, $.windowOptions(options.styles), $.extend({\n                        preload: true\n                    }, options.extras));\n                    if (options.subpages) {\n                        $.each(options.subpages, function(index, subpage) {\n                            var subpageId = subpage.id || subpage.url;\n                            if (subpageId) { //过滤空对象\n                                var subWebview = plus.webview.getWebviewById(subpageId);\n                                if (!subWebview) { //如果该webview不存在，则创建\n                                    subWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), $.extend({\n                                        preload: true\n                                    }, subpage.extras));\n                                }\n                                webview.append(subWebview);\n                            }\n                        });\n                    }\n                }\n            }\n\n            //TODO 理论上，子webview也应该计算到预加载队列中，但这样就麻烦了，要退必须退整体，否则可能出现问题；\n            $.webviews[id] = {\n                webview: webview, //目前仅preload的缓存webview\n                preload: true,\n                show: $.showOptions(options.show),\n                afterShowMethodName: options.afterShowMethodName //就不应该用evalJS。应该是通过事件消息通讯\n            };\n            //索引该预加载窗口\n            var preloads = $.data.preloads;\n            var index = preloads.indexOf(id);\n            if (~index) { //删除已存在的(变相调整插入位置)\n                preloads.splice(index, 1);\n            }\n            preloads.push(id);\n            if (preloads.length > $.options.preloadLimit) {\n                //先进先出\n                var first = $.data.preloads.shift();\n                var webviewCache = $.webviews[first];\n                if (webviewCache && webviewCache.webview) {\n                    //需要将自己打开的所有页面，全部close；\n                    //关闭该预加载webview\t\n                    $.closeAll(webviewCache.webview);\n                }\n                //删除缓存\n                delete $.webviews[first];\n            }\n        } else {\n            if (isCreate !== false) { //直接创建非预加载窗口\n                webview = plus.webview.create(options.url, id, $.windowOptions(options.styles), options.extras);\n                if (options.subpages) {\n                    $.each(options.subpages, function(index, subpage) {\n                        var subpageId = subpage.id || subpage.url;\n                        var subWebview = plus.webview.getWebviewById(subpageId);\n                        if (!subWebview) {\n                            subWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), subpage.extras);\n                        }\n                        webview.append(subWebview);\n                    });\n                }\n            }\n        }\n        return webview;\n    };\n\n    /**\n     * 预加载\n     */\n    $.preload = function(options) {\n        //调用预加载函数，不管是否传递preload参数，强制变为true\n        if (!options.preload) {\n            options.preload = true;\n        }\n        return $.createWindow(options);\n    };\n\n    /**\n     *关闭当前webview打开的所有webview；\n     */\n    $.closeOpened = function(webview) {\n        var opened = webview.opened();\n        if (opened) {\n            for (var i = 0, len = opened.length; i < len; i++) {\n                var openedWebview = opened[i];\n                var open_open = openedWebview.opened();\n                if (open_open && open_open.length > 0) {\n                    //关闭打开的webview\n                    $.closeOpened(openedWebview);\n                    //关闭自己\n                    openedWebview.close(\"none\");\n                } else {\n                    //如果直接孩子节点，就不用关闭了，因为父关闭的时候，会自动关闭子；\n                    if (openedWebview.parent() !== webview) {\n                        openedWebview.close('none');\n                    }\n                }\n            }\n        }\n    };\n    $.closeAll = function(webview, aniShow) {\n        $.closeOpened(webview);\n        if (aniShow) {\n            webview.close(aniShow);\n        } else {\n            webview.close();\n        }\n    };\n\n    /**\n     * 批量创建webview\n     * @param {type} options\n     * @returns {undefined}\n     */\n    $.createWindows = function(options) {\n        $.each(options, function(index, option) {\n            //初始化预加载窗口(创建)和非预加载窗口(仅配置，不创建)\n            $.createWindow(option, false);\n        });\n    };\n    /**\n     * 创建当前页面的子webview\n     * @param {type} options\n     * @returns {webview}\n     */\n    $.appendWebview = function(options) {\n        if (!window.plus) {\n            return;\n        }\n        var id = options.id || options.url;\n        var webview;\n        if (!$.webviews[id]) { //保证执行一遍\n            //TODO 这里也有隐患，比如某个webview不是作为subpage创建的，而是作为target webview的话；\n            if (!plus.webview.getWebviewById(id)) {\n                webview = plus.webview.create(options.url, id, options.styles, options.extras);\n            }\n            //之前的实现方案：子窗口loaded之后再append到父窗口中；\n            //问题：部分子窗口loaded事件发生较晚，此时执行父窗口的children方法会返回空，导致父子通讯失败；\n            //     比如父页面执行完preload事件后，需触发子页面的preload事件，此时未append的话，就无法触发；\n            //修改方式：不再监控loaded事件，直接append\n            //by chb@20150521\n            // webview.addEventListener('loaded', function() {\n            plus.webview.currentWebview().append(webview);\n            // });\n            $.webviews[id] = options;\n\n        }\n        return webview;\n    };\n\n    //全局webviews\n    $.webviews = {};\n    //预加载窗口索引\n    $.data.preloads = [];\n    //$.currentWebview\n    $.plusReady(function() {\n        $.currentWebview = plus.webview.currentWebview();\n    });\n    $.addInit({\n        name: '5+',\n        index: 100,\n        handle: function() {\n            var options = $.options;\n            var subpages = options.subpages || [];\n            if ($.os.plus) {\n                $.plusReady(function() {\n                    //TODO  这里需要判断一下，最好等子窗口加载完毕后，再调用主窗口的show方法；\n                    //或者：在openwindow方法中，监听实现；\n                    $.each(subpages, function(index, subpage) {\n                        $.appendWebview(subpage);\n                    });\n                    //判断是否首页\n                    if (plus.webview.currentWebview() === plus.webview.getWebviewById(plus.runtime.appid)) {\n                        $.isHomePage = true;\n                        //首页需要自己激活预加载；\n                        //timeout因为子页面loaded之后才append的，防止子页面尚未append、从而导致其preload未触发的问题；\n                        setTimeout(function() {\n                            triggerPreload(plus.webview.currentWebview());\n                        }, 300);\n                    }\n                    //设置ios顶部状态栏颜色；\n                    if ($.os.ios && $.options.statusBarBackground) {\n                        plus.navigator.setStatusBarBackground($.options.statusBarBackground);\n                    }\n                    if ($.os.android && parseFloat($.os.version) < 4.4) {\n                        //解决Android平台4.4版本以下，resume后，父窗体标题延迟渲染的问题；\n                        if (plus.webview.currentWebview().parent() == null) {\n                            document.addEventListener(\"resume\", function() {\n                                var body = document.body;\n                                body.style.display = 'none';\n                                setTimeout(function() {\n                                    body.style.display = '';\n                                }, 10);\n                            });\n                        }\n                    }\n                });\n            } else {\n                //已支持iframe嵌入\n                //\t\t\t\tif (subpages.length > 0) {\n                //\t\t\t\t\tvar err = document.createElement('div');\n                //\t\t\t\t\terr.className = 'mui-error';\n                //\t\t\t\t\t//文字描述\n                //\t\t\t\t\tvar span = document.createElement('span');\n                //\t\t\t\t\tspan.innerHTML = '在该浏览器下，不支持创建子页面，具体参考';\n                //\t\t\t\t\terr.appendChild(span);\n                //\t\t\t\t\tvar a = document.createElement('a');\n                //\t\t\t\t\ta.innerHTML = '\"mui框架适用场景\"';\n                //\t\t\t\t\ta.href = 'http://ask.dcloud.net.cn/article/113';\n                //\t\t\t\t\terr.appendChild(a);\n                //\t\t\t\t\tdocument.body.appendChild(err);\n                //\t\t\t\t\tconsole.log('在该浏览器下，不支持创建子页面');\n                //\t\t\t\t}\n\n            }\n\n        }\n    });\n    window.addEventListener('preload', function() {\n        //处理预加载部分\n        var webviews = $.options.preloadPages || [];\n        $.plusReady(function() {\n            $.each(webviews, function(index, webview) {\n                $.createWindow($.extend(webview, {\n                    preload: true\n                }));\n            });\n\n        });\n    });\n    $.supportStatusbarOffset = function() {\n        return $.os.plus && $.os.ios && parseFloat($.os.version) >= 7;\n    };\n    $.ready(function() {\n        //标识当前环境支持statusbar\n        if ($.supportStatusbarOffset()) {\n            document.body.classList.add('mui-statusbar');\n        }\n    });\n})(mui);\n/**\n * mui back\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n    /**\n     * register back\n     * @param {type} back\n     * @returns {$.gestures}\n     */\n    $.addBack = function(back) {\n        return $.addAction('backs', back);\n    };\n    /**\n     * default\n     */\n    $.addBack({\n        name: 'browser',\n        index: 100,\n        handle: function() {\n            if (window.history.length > 1) {\n                window.history.back();\n                return true;\n            }\n            return false;\n        }\n    });\n    /**\n     * 后退\n     */\n    $.back = function() {\n        if (typeof $.options.beforeback === 'function') {\n            if ($.options.beforeback() === false) {\n                return;\n            }\n        }\n        $.doAction('backs');\n    };\n    window.addEventListener('tap', function(e) {\n        var action = $.targets.action;\n        if (action && action.classList.contains('mui-action-back')) {\n            $.back();\n            $.targets.action = false;\n        }\n    });\n    window.addEventListener('swiperight', function(e) {\n        var detail = e.detail;\n        if ($.options.swipeBack === true && Math.abs(detail.angle) < 3) {\n            $.back();\n        }\n    });\n\n})(mui, window);\n/**\n * mui back 5+\n * @param {type} $\n * @param {type} window\n * @returns {undefined}\n */\n(function($, window) {\n    if ($.os.plus && $.os.android) {\n        $.addBack({\n            name: 'mui',\n            index: 5,\n            handle: function() {\n                //后续重新设计此处，将back放到各个空间内部实现\n                //popover\n                if ($.targets._popover && $.targets._popover.classList.contains('mui-active')) {\n                    $($.targets._popover).popover('hide');\n                    return true;\n                }\n                //offcanvas\n                var offCanvas = document.querySelector('.mui-off-canvas-wrap.mui-active');\n                if (offCanvas) {\n                    $(offCanvas).offCanvas('close');\n                    return true;\n                }\n                var previewImage = $.isFunction($.getPreviewImage) && $.getPreviewImage();\n                if (previewImage && previewImage.isShown()) {\n                    previewImage.close();\n                    return true;\n                }\n                //popup\n                return $.closePopup();\n            }\n        });\n    }\n    //首次按下back按键的时间\n    $.__back__first = null;\n    /**\n     * 5+ back\n     */\n    $.addBack({\n        name: '5+',\n        index: 10,\n        handle: function() {\n            if (!window.plus) {\n                return false;\n            }\n            var wobj = plus.webview.currentWebview();\n            var parent = wobj.parent();\n            if (parent) {\n                parent.evalJS('mui&&mui.back();');\n            } else {\n                wobj.canBack(function(e) {\n                    //by chb 暂时注释，在碰到类似popover之类的锚点的时候，需多次点击才能返回；\n                    if (e.canBack) { //webview history back\n                        window.history.back();\n                    } else { //webview close or hide\n                        //fixed by fxy 此处不应该用opener判断，因为用户有可能自己close掉当前窗口的opener。这样的话。opener就为空了，导致不能执行close\n                        if (wobj.id === plus.runtime.appid) { //首页\n                            //首页不存在opener的情况下，后退实际上应该是退出应用；\n                            //首次按键，提示‘再按一次退出应用’\n                            if (!$.__back__first) {\n                                $.__back__first = new Date().getTime();\n                                mui.toast('再按一次退出应用');\n                                setTimeout(function() {\n                                    $.__back__first = null;\n                                }, 2000);\n                            } else {\n                                if (new Date().getTime() - $.__back__first < 2000) {\n                                    plus.runtime.quit();\n                                }\n                            }\n                        } else { //其他页面，\n                            if (wobj.preload) {\n                                wobj.hide(\"auto\");\n                            } else {\n                                //关闭页面时，需要将其打开的所有子页面全部关闭；\n                                $.closeAll(wobj);\n                            }\n                        }\n                    }\n                });\n            }\n            return true;\n        }\n    });\n\n\n    $.menu = function() {\n        var menu = document.querySelector('.mui-action-menu');\n        if (menu) {\n            $.trigger(menu, $.EVENT_START); //临时处理menu无touchstart的话，找不到当前targets的问题\n            $.trigger(menu, 'tap');\n        } else { //执行父窗口的menu\n            if (window.plus) {\n                var wobj = $.currentWebview;\n                var parent = wobj.parent();\n                if (parent) { //又得evalJS\n                    parent.evalJS('mui&&mui.menu();');\n                }\n            }\n        }\n    };\n    var __back = function() {\n        $.back();\n    };\n    var __menu = function() {\n        $.menu();\n    };\n    //默认监听\n    $.plusReady(function() {\n        if ($.options.keyEventBind.backbutton) {\n            plus.key.addEventListener('backbutton', __back, false);\n        }\n        if ($.options.keyEventBind.menubutton) {\n            plus.key.addEventListener('menubutton', __menu, false);\n        }\n    });\n    //处理按键监听事件\n    $.addInit({\n        name: 'keyEventBind',\n        index: 1000,\n        handle: function() {\n            $.plusReady(function() {\n                //如果不为true，则移除默认监听\n                if (!$.options.keyEventBind.backbutton) {\n                    plus.key.removeEventListener('backbutton', __back);\n                }\n                if (!$.options.keyEventBind.menubutton) {\n                    plus.key.removeEventListener('menubutton', __menu);\n                }\n            });\n        }\n    });\n})(mui, window);\n/**\n * mui.init pulldownRefresh\n * @param {type} $\n * @returns {undefined}\n */\n(function($) {\n    $.addInit({\n        name: 'pullrefresh',\n        index: 1000,\n        handle: function() {\n            var options = $.options;\n            var pullRefreshOptions = options.pullRefresh || {};\n            var hasPulldown = pullRefreshOptions.down && pullRefreshOptions.down.hasOwnProperty('callback');\n            var hasPullup = pullRefreshOptions.up && pullRefreshOptions.up.hasOwnProperty('callback');\n            if (hasPulldown || hasPullup) {\n                var container = pullRefreshOptions.container;\n                if (container) {\n                    var $container = $(container);\n                    if ($container.length === 1) {\n                        if ($.os.plus && $.os.android) { //android 5+\n                            $.plusReady(function() {\n                                var webview = plus.webview.currentWebview();\n                                if (hasPullup) {\n                                    //当前页面初始化pullup\n                                    var upOptions = {};\n                                    upOptions.up = pullRefreshOptions.up;\n                                    upOptions.webviewId = webview.id || webview.getURL();\n                                    $container.pullRefresh(upOptions);\n                                }\n                                if (hasPulldown) {\n                                    var parent = webview.parent();\n                                    var id = webview.id || webview.getURL();\n                                    if (parent) {\n                                        if (!hasPullup) { //如果没有上拉加载，需要手动初始化一个默认的pullRefresh，以便当前页面容器可以调用endPulldownToRefresh等方法\n                                            $container.pullRefresh({\n                                                webviewId: id\n                                            });\n                                        }\n                                        var downOptions = {\n                                            webviewId: id\n                                        };\n                                        downOptions.down = $.extend({}, pullRefreshOptions.down);\n                                        downOptions.down.callback = '_CALLBACK';\n                                        //父页面初始化pulldown\n                                        parent.evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify(downOptions) + \"')\");\n                                    }\n                                }\n                            });\n                        } else {\n                            $container.pullRefresh(pullRefreshOptions);\n                        }\n                    }\n                }\n            }\n        }\n    });\n})(mui);\n/**\n * mui ajax\n * @param {type} $\n * @returns {undefined}\n */\n(function($, window, undefined) {\n\n    var jsonType = 'application/json';\n    var htmlType = 'text/html';\n    var rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\n    var scriptTypeRE = /^(?:text|application)\\/javascript/i;\n    var xmlTypeRE = /^(?:text|application)\\/xml/i;\n    var blankRE = /^\\s*$/;\n\n    $.ajaxSettings = {\n        type: 'GET',\n        beforeSend: $.noop,\n        success: $.noop,\n        error: $.noop,\n        complete: $.noop,\n        context: null,\n        xhr: function(protocol) {\n            return new window.XMLHttpRequest();\n        },\n        accepts: {\n            script: 'text/javascript, application/javascript, application/x-javascript',\n            json: jsonType,\n            xml: 'application/xml, text/xml',\n            html: htmlType,\n            text: 'text/plain'\n        },\n        timeout: 0,\n        processData: true,\n        cache: true\n    };\n    var ajaxBeforeSend = function(xhr, settings) {\n        var context = settings.context\n        if (settings.beforeSend.call(context, xhr, settings) === false) {\n            return false;\n        }\n    };\n    var ajaxSuccess = function(data, xhr, settings) {\n        settings.success.call(settings.context, data, 'success', xhr);\n        ajaxComplete('success', xhr, settings);\n    };\n    // type: \"timeout\", \"error\", \"abort\", \"parsererror\"\n    var ajaxError = function(error, type, xhr, settings) {\n        settings.error.call(settings.context, xhr, type, error);\n        ajaxComplete(type, xhr, settings);\n    };\n    // status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\n    var ajaxComplete = function(status, xhr, settings) {\n        settings.complete.call(settings.context, xhr, status);\n    };\n\n    var serialize = function(params, obj, traditional, scope) {\n        var type, array = $.isArray(obj),\n            hash = $.isPlainObject(obj);\n        $.each(obj, function(key, value) {\n            type = $.type(value);\n            if (scope) {\n                key = traditional ? scope :\n                    scope + '[' + (hash || type === 'object' || type === 'array' ? key : '') + ']';\n            }\n            // handle data in serializeArray() format\n            if (!scope && array) {\n                params.add(value.name, value.value);\n            }\n            // recurse into nested objects\n            else if (type === \"array\" || (!traditional && type === \"object\")) {\n                serialize(params, value, traditional, key);\n            } else {\n                params.add(key, value);\n            }\n        });\n    };\n    var serializeData = function(options) {\n        if (options.processData && options.data && typeof options.data !== \"string\") {\n            var contentType = options.contentType;\n            if (!contentType && options.headers) {\n                contentType = options.headers['Content-Type'];\n            }\n            if (contentType && ~contentType.indexOf(jsonType)) { //application/json\n                options.data = JSON.stringify(options.data);\n            } else {\n                options.data = $.param(options.data, options.traditional);\n            }\n        }\n        if (options.data && (!options.type || options.type.toUpperCase() === 'GET')) {\n            options.url = appendQuery(options.url, options.data);\n            options.data = undefined;\n        }\n    };\n    var appendQuery = function(url, query) {\n        if (query === '') {\n            return url;\n        }\n        return (url + '&' + query).replace(/[&?]{1,2}/, '?');\n    };\n    var mimeToDataType = function(mime) {\n        if (mime) {\n            mime = mime.split(';', 2)[0];\n        }\n        return mime && (mime === htmlType ? 'html' :\n            mime === jsonType ? 'json' :\n            scriptTypeRE.test(mime) ? 'script' :\n            xmlTypeRE.test(mime) && 'xml') || 'text';\n    };\n    var parseArguments = function(url, data, success, dataType) {\n        if ($.isFunction(data)) {\n            dataType = success, success = data, data = undefined;\n        }\n        if (!$.isFunction(success)) {\n            dataType = success, success = undefined;\n        }\n        return {\n            url: url,\n            data: data,\n            success: success,\n            dataType: dataType\n        };\n    };\n    $.ajax = function(url, options) {\n        if (typeof url === \"object\") {\n            options = url;\n            url = undefined;\n        }\n        var settings = options || {};\n        settings.url = url || settings.url;\n        for (var key in $.ajaxSettings) {\n            if (settings[key] === undefined) {\n                settings[key] = $.ajaxSettings[key];\n            }\n        }\n        serializeData(settings);\n        var dataType = settings.dataType;\n\n        if (settings.cache === false || ((!options || options.cache !== true) && ('script' === dataType))) {\n            settings.url = appendQuery(settings.url, '_=' + $.now());\n        }\n        var mime = settings.accepts[dataType && dataType.toLowerCase()];\n        var headers = {};\n        var setHeader = function(name, value) {\n            headers[name.toLowerCase()] = [name, value];\n        };\n        var protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol;\n        var xhr = settings.xhr(settings);\n        var nativeSetHeader = xhr.setRequestHeader;\n        var abortTimeout;\n\n        setHeader('X-Requested-With', 'XMLHttpRequest');\n        setHeader('Accept', mime || '*/*');\n        if (!!(mime = settings.mimeType || mime)) {\n            if (mime.indexOf(',') > -1) {\n                mime = mime.split(',', 2)[0];\n            }\n            xhr.overrideMimeType && xhr.overrideMimeType(mime);\n        }\n        if (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() !== 'GET')) {\n            setHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');\n        }\n        if (settings.headers) {\n            for (var name in settings.headers)\n                setHeader(name, settings.headers[name]);\n        }\n        xhr.setRequestHeader = setHeader;\n\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState === 4) {\n                xhr.onreadystatechange = $.noop;\n                clearTimeout(abortTimeout);\n                var result, error = false;\n                var isLocal = protocol === 'file:';\n                if ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || (xhr.status === 0 && isLocal && xhr.responseText)) {\n                    dataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));\n                    result = xhr.responseText;\n                    try {\n                        // http://perfectionkills.com/global-eval-what-are-the-options/\n                        if (dataType === 'script') {\n                            (1, eval)(result);\n                        } else if (dataType === 'xml') {\n                            result = xhr.responseXML;\n                        } else if (dataType === 'json') {\n                            result = blankRE.test(result) ? null : $.parseJSON(result);\n                        }\n                    } catch (e) {\n                        error = e;\n                    }\n\n                    if (error) {\n                        ajaxError(error, 'parsererror', xhr, settings);\n                    } else {\n                        ajaxSuccess(result, xhr, settings);\n                    }\n                } else {\n                    var status = xhr.status ? 'error' : 'abort';\n                    var statusText = xhr.statusText || null;\n                    if (isLocal) {\n                        status = 'error';\n                        statusText = '404';\n                    }\n                    ajaxError(statusText, status, xhr, settings);\n                }\n            }\n        };\n        if (ajaxBeforeSend(xhr, settings) === false) {\n            xhr.abort();\n            ajaxError(null, 'abort', xhr, settings);\n            return xhr;\n        }\n\n        if (settings.xhrFields) {\n            for (var name in settings.xhrFields) {\n                xhr[name] = settings.xhrFields[name];\n            }\n        }\n\n        var async = 'async' in settings ? settings.async : true;\n\n        xhr.open(settings.type.toUpperCase(), settings.url, async, settings.username, settings.password);\n\n        for (var name in headers) {\n            if (headers.hasOwnProperty(name)) {\n                nativeSetHeader.apply(xhr, headers[name]);\n            }\n        }\n        if (settings.timeout > 0) {\n            abortTimeout = setTimeout(function() {\n                xhr.onreadystatechange = $.noop;\n                xhr.abort();\n                ajaxError(null, 'timeout', xhr, settings);\n            }, settings.timeout);\n        }\n        xhr.send(settings.data ? settings.data : null);\n        return xhr;\n    };\n\n    $.param = function(obj, traditional) {\n        var params = [];\n        params.add = function(k, v) {\n            this.push(encodeURIComponent(k) + '=' + encodeURIComponent(v));\n        };\n        serialize(params, obj, traditional);\n        return params.join('&').replace(/%20/g, '+');\n    };\n    $.get = function( /* url, data, success, dataType */ ) {\n        return $.ajax(parseArguments.apply(null, arguments));\n    };\n\n    $.post = function( /* url, data, success, dataType */ ) {\n        var options = parseArguments.apply(null, arguments);\n        options.type = 'POST';\n        return $.ajax(options);\n    };\n\n    $.getJSON = function( /* url, data, success */ ) {\n        var options = parseArguments.apply(null, arguments);\n        options.dataType = 'json';\n        return $.ajax(options);\n    };\n\n    $.fn.load = function(url, data, success) {\n        if (!this.length)\n            return this;\n        var self = this,\n            parts = url.split(/\\s/),\n            selector,\n            options = parseArguments(url, data, success),\n            callback = options.success;\n        if (parts.length > 1)\n            options.url = parts[0], selector = parts[1];\n        options.success = function(response) {\n            if (selector) {\n                var div = document.createElement('div');\n                div.innerHTML = response.replace(rscript, \"\");\n                var selectorDiv = document.createElement('div');\n                var childs = div.querySelectorAll(selector);\n                if (childs && childs.length > 0) {\n                    for (var i = 0, len = childs.length; i < len; i++) {\n                        selectorDiv.appendChild(childs[i]);\n                    }\n                }\n                self[0].innerHTML = selectorDiv.innerHTML;\n            } else {\n                self[0].innerHTML = response;\n            }\n            callback && callback.apply(self, arguments);\n        };\n        $.ajax(options);\n        return this;\n    };\n\n})(mui, window);\n/**\n * 5+ ajax\n */\n(function($) {\n    var originAnchor = document.createElement('a');\n    originAnchor.href = window.location.href;\n    $.plusReady(function() {\n        $.ajaxSettings = $.extend($.ajaxSettings, {\n            xhr: function(settings) {\n                if (settings.crossDomain) { //强制使用plus跨域\n                    return new plus.net.XMLHttpRequest();\n                }\n                //仅在webview的url为远程文件，且ajax请求的资源不同源下使用plus.net.XMLHttpRequest\n                if (originAnchor.protocol !== 'file:') {\n                    var urlAnchor = document.createElement('a');\n                    urlAnchor.href = settings.url;\n                    urlAnchor.href = urlAnchor.href;\n                    settings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host);\n                    if (settings.crossDomain) {\n                        return new plus.net.XMLHttpRequest();\n                    }\n                }\n                return new window.XMLHttpRequest();\n            }\n        });\n    });\n})(mui);\n/**\n * mui layout(offset[,position,width,height...])\n * @param {type} $\n * @param {type} window\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, undefined) {\n    $.offset = function(element) {\n        var box = {\n            top: 0,\n            left: 0\n        };\n        if (typeof element.getBoundingClientRect !== undefined) {\n            box = element.getBoundingClientRect();\n        }\n        return {\n            top: box.top + window.pageYOffset - element.clientTop,\n            left: box.left + window.pageXOffset - element.clientLeft\n        };\n    };\n})(mui, window);\n/**\n * mui animation\n */\n(function($, window) {\n    /**\n     * scrollTo\n     */\n    $.scrollTo = function(scrollTop, duration, callback) {\n        duration = duration || 1000;\n        var scroll = function(duration) {\n            if (duration <= 0) {\n                window.scrollTo(0, scrollTop);\n                callback && callback();\n                return;\n            }\n            var distaince = scrollTop - window.scrollY;\n            setTimeout(function() {\n                window.scrollTo(0, window.scrollY + distaince / duration * 10);\n                scroll(duration - 10);\n            }, 16.7);\n        };\n        scroll(duration);\n    };\n    $.animationFrame = function(cb) {\n        var args, isQueued, context;\n        return function() {\n            args = arguments;\n            context = this;\n            if (!isQueued) {\n                isQueued = true;\n                requestAnimationFrame(function() {\n                    cb.apply(context, args);\n                    isQueued = false;\n                });\n            }\n        };\n    };\n\n})(mui, window);\n(function($) {\n    var initializing = false,\n        fnTest = /xyz/.test(function() {\n            xyz;\n        }) ? /\\b_super\\b/ : /.*/;\n\n    var Class = function() {};\n    Class.extend = function(prop) {\n        var _super = this.prototype;\n        initializing = true;\n        var prototype = new this();\n        initializing = false;\n        for (var name in prop) {\n            prototype[name] = typeof prop[name] == \"function\" &&\n                typeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\n                (function(name, fn) {\n                    return function() {\n                        var tmp = this._super;\n\n                        this._super = _super[name];\n\n                        var ret = fn.apply(this, arguments);\n                        this._super = tmp;\n\n                        return ret;\n                    };\n                })(name, prop[name]) :\n                prop[name];\n        }\n\n        function Class() {\n            if (!initializing && this.init)\n                this.init.apply(this, arguments);\n        }\n        Class.prototype = prototype;\n        Class.prototype.constructor = Class;\n        Class.extend = arguments.callee;\n        return Class;\n    };\n    $.Class = Class;\n})(mui);\n(function($, document, undefined) {\n    var CLASS_PULL_TOP_POCKET = 'mui-pull-top-pocket';\n    var CLASS_PULL_BOTTOM_POCKET = 'mui-pull-bottom-pocket';\n    var CLASS_PULL = 'mui-pull';\n    var CLASS_PULL_LOADING = 'mui-pull-loading';\n    var CLASS_PULL_CAPTION = 'mui-pull-caption';\n    var CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n    var CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n    var CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n\n    var CLASS_ICON = 'mui-icon';\n    var CLASS_SPINNER = 'mui-spinner';\n    var CLASS_ICON_PULLDOWN = 'mui-icon-pulldown';\n\n    var CLASS_BLOCK = 'mui-block';\n    var CLASS_HIDDEN = 'mui-hidden';\n    var CLASS_VISIBILITY = 'mui-visibility';\n\n    var CLASS_LOADING_UP = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n    var CLASS_LOADING_DOWN = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\n    var CLASS_LOADING = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_SPINNER;\n\n    var pocketHtml = ['<div class=\"' + CLASS_PULL + '\">', '<div class=\"{icon}\"></div>', '<div class=\"' + CLASS_PULL_CAPTION + '\">{contentrefresh}</div>', '</div>'].join('');\n\n    var PullRefresh = {\n        init: function(element, options) {\n            this._super(element, $.extend(true, {\n                scrollY: true,\n                scrollX: false,\n                indicators: true,\n                deceleration: 0.003,\n                down: {\n                    height: 50,\n                    contentinit: '下拉可以刷新',\n                    contentdown: '下拉可以刷新',\n                    contentover: '释放立即刷新',\n                    contentrefresh: '正在刷新...'\n                },\n                up: {\n                    height: 50,\n                    auto: false,\n                    contentinit: '上拉显示更多',\n                    contentdown: '上拉显示更多',\n                    contentrefresh: '正在加载...',\n                    contentnomore: '没有更多数据了',\n                    duration: 300\n                }\n            }, options));\n        },\n        _init: function() {\n            this._super();\n            this._initPocket();\n        },\n        _initPulldownRefresh: function() {\n            this.pulldown = true;\n            this.pullPocket = this.topPocket;\n            this.pullPocket.classList.add(CLASS_BLOCK);\n            this.pullPocket.classList.add(CLASS_VISIBILITY);\n            this.pullCaption = this.topCaption;\n            this.pullLoading = this.topLoading;\n        },\n        _initPullupRefresh: function() {\n            this.pulldown = false;\n            this.pullPocket = this.bottomPocket;\n            this.pullPocket.classList.add(CLASS_BLOCK);\n            this.pullPocket.classList.add(CLASS_VISIBILITY);\n            this.pullCaption = this.bottomCaption;\n            this.pullLoading = this.bottomLoading;\n        },\n        _initPocket: function() {\n            var options = this.options;\n            if (options.down && options.down.hasOwnProperty('callback')) {\n                this.topPocket = this.scroller.querySelector('.' + CLASS_PULL_TOP_POCKET);\n                if (!this.topPocket) {\n                    this.topPocket = this._createPocket(CLASS_PULL_TOP_POCKET, options.down, CLASS_LOADING_DOWN);\n                    this.wrapper.insertBefore(this.topPocket, this.wrapper.firstChild);\n                }\n                this.topLoading = this.topPocket.querySelector('.' + CLASS_PULL_LOADING);\n                this.topCaption = this.topPocket.querySelector('.' + CLASS_PULL_CAPTION);\n            }\n            if (options.up && options.up.hasOwnProperty('callback')) {\n                this.bottomPocket = this.scroller.querySelector('.' + CLASS_PULL_BOTTOM_POCKET);\n                if (!this.bottomPocket) {\n                    this.bottomPocket = this._createPocket(CLASS_PULL_BOTTOM_POCKET, options.up, CLASS_LOADING);\n                    this.scroller.appendChild(this.bottomPocket);\n                }\n                this.bottomLoading = this.bottomPocket.querySelector('.' + CLASS_PULL_LOADING);\n                this.bottomCaption = this.bottomPocket.querySelector('.' + CLASS_PULL_CAPTION);\n                //TODO only for h5\n                this.wrapper.addEventListener('scrollbottom', this);\n            }\n        },\n        _createPocket: function(clazz, options, iconClass) {\n            var pocket = document.createElement('div');\n            pocket.className = clazz;\n            pocket.innerHTML = pocketHtml.replace('{contentrefresh}', options.contentinit).replace('{icon}', iconClass);\n            return pocket;\n        },\n        _resetPullDownLoading: function() {\n            var loading = this.pullLoading;\n            if (loading) {\n                this.pullCaption.innerHTML = this.options.down.contentdown;\n                loading.style.webkitTransition = \"\";\n                loading.style.webkitTransform = \"\";\n                loading.style.webkitAnimation = \"\";\n                loading.className = CLASS_LOADING_DOWN;\n            }\n        },\n        _setCaptionClass: function(isPulldown, caption, title) {\n            if (!isPulldown) {\n                switch (title) {\n                    case this.options.up.contentdown:\n                        caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n                        break;\n                    case this.options.up.contentrefresh:\n                        caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH\n                        break;\n                    case this.options.up.contentnomore:\n                        caption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n                        break;\n                }\n            }\n        },\n        _setCaption: function(title, reset) {\n            if (this.loading) {\n                return;\n            }\n            var options = this.options;\n            var pocket = this.pullPocket;\n            var caption = this.pullCaption;\n            var loading = this.pullLoading;\n            var isPulldown = this.pulldown;\n            var self = this;\n            if (pocket) {\n                if (reset) {\n                    setTimeout(function() {\n                        caption.innerHTML = self.lastTitle = title;\n                        if (isPulldown) {\n                            loading.className = CLASS_LOADING_DOWN;\n                        } else {\n                            self._setCaptionClass(false, caption, title);\n                            loading.className = CLASS_LOADING;\n                        }\n                        loading.style.webkitAnimation = \"\";\n                        loading.style.webkitTransition = \"\";\n                        loading.style.webkitTransform = \"\";\n                    }, 100);\n                } else {\n                    if (title !== this.lastTitle) {\n                        caption.innerHTML = title;\n                        if (isPulldown) {\n                            if (title === options.down.contentrefresh) {\n                                loading.className = CLASS_LOADING;\n                                loading.style.webkitAnimation = \"spinner-spin 1s step-end infinite\";\n                            } else if (title === options.down.contentover) {\n                                loading.className = CLASS_LOADING_UP;\n                                loading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n                                loading.style.webkitTransform = \"rotate(180deg)\";\n                            } else if (title === options.down.contentdown) {\n                                loading.className = CLASS_LOADING_DOWN;\n                                loading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\n                                loading.style.webkitTransform = \"rotate(0deg)\";\n                            }\n                        } else {\n                            if (title === options.up.contentrefresh) {\n                                loading.className = CLASS_LOADING + ' ' + CLASS_VISIBILITY;\n                            } else {\n                                loading.className = CLASS_LOADING + ' ' + CLASS_HIDDEN;\n                            }\n                            self._setCaptionClass(false, caption, title);\n                        }\n                        this.lastTitle = title;\n                    }\n                }\n\n            }\n        }\n    };\n    $.PullRefresh = PullRefresh;\n})(mui, document);\n(function($, window, document, undefined) {\n    var CLASS_SCROLL = 'mui-scroll';\n    var CLASS_SCROLLBAR = 'mui-scrollbar';\n    var CLASS_INDICATOR = 'mui-scrollbar-indicator';\n    var CLASS_SCROLLBAR_VERTICAL = CLASS_SCROLLBAR + '-vertical';\n    var CLASS_SCROLLBAR_HORIZONTAL = CLASS_SCROLLBAR + '-horizontal';\n\n    var CLASS_ACTIVE = 'mui-active';\n\n    var ease = {\n        quadratic: {\n            style: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\n            fn: function(k) {\n                return k * (2 - k);\n            }\n        },\n        circular: {\n            style: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\n            fn: function(k) {\n                return Math.sqrt(1 - (--k * k));\n            }\n        },\n        outCirc: {\n            style: 'cubic-bezier(0.075, 0.82, 0.165, 1)'\n        },\n        outCubic: {\n            style: 'cubic-bezier(0.165, 0.84, 0.44, 1)'\n        }\n    }\n    var Scroll = $.Class.extend({\n        init: function(element, options) {\n            this.wrapper = this.element = element;\n            this.scroller = this.wrapper.children[0];\n            this.scrollerStyle = this.scroller && this.scroller.style;\n            this.stopped = false;\n\n            this.options = $.extend(true, {\n                scrollY: true, //是否竖向滚动\n                scrollX: false, //是否横向滚动\n                startX: 0, //初始化时滚动至x\n                startY: 0, //初始化时滚动至y\n\n                indicators: true, //是否显示滚动条\n                stopPropagation: false,\n                hardwareAccelerated: true,\n                fixedBadAndorid: false,\n                preventDefaultException: {\n                    tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n                },\n                momentum: true,\n\n                snapX: 0.5, //横向切换距离(以当前容器宽度为基准)\n                snap: false, //图片轮播，拖拽式选项卡\n\n                bounce: true, //是否启用回弹\n                bounceTime: 500, //回弹动画时间\n                bounceEasing: ease.outCirc, //回弹动画曲线\n\n                scrollTime: 500,\n                scrollEasing: ease.outCubic, //轮播动画曲线\n\n                directionLockThreshold: 5,\n\n                parallaxElement: false, //视差元素\n                parallaxRatio: 0.5\n            }, options);\n\n            this.x = 0;\n            this.y = 0;\n            this.translateZ = this.options.hardwareAccelerated ? ' translateZ(0)' : '';\n\n            this._init();\n            if (this.scroller) {\n                this.refresh();\n                //\t\t\t\tif (this.options.startX !== 0 || this.options.startY !== 0) { //需要判断吗？后续根据实际情况再看看\n                this.scrollTo(this.options.startX, this.options.startY);\n                //\t\t\t\t}\n            }\n        },\n        _init: function() {\n            this._initParallax();\n            this._initIndicators();\n            this._initEvent();\n        },\n        _initParallax: function() {\n            if (this.options.parallaxElement) {\n                this.parallaxElement = document.querySelector(this.options.parallaxElement);\n                this.parallaxStyle = this.parallaxElement.style;\n                this.parallaxHeight = this.parallaxElement.offsetHeight;\n                this.parallaxImgStyle = this.parallaxElement.querySelector('img').style;\n            }\n        },\n        _initIndicators: function() {\n            var self = this;\n            self.indicators = [];\n            if (!this.options.indicators) {\n                return;\n            }\n            var indicators = [],\n                indicator;\n\n            // Vertical scrollbar\n            if (self.options.scrollY) {\n                indicator = {\n                    el: this._createScrollBar(CLASS_SCROLLBAR_VERTICAL),\n                    listenX: false\n                };\n\n                this.wrapper.appendChild(indicator.el);\n                indicators.push(indicator);\n            }\n\n            // Horizontal scrollbar\n            if (this.options.scrollX) {\n                indicator = {\n                    el: this._createScrollBar(CLASS_SCROLLBAR_HORIZONTAL),\n                    listenY: false\n                };\n\n                this.wrapper.appendChild(indicator.el);\n                indicators.push(indicator);\n            }\n\n            for (var i = indicators.length; i--;) {\n                this.indicators.push(new Indicator(this, indicators[i]));\n            }\n\n        },\n        _initSnap: function() {\n            this.currentPage = {};\n            this.pages = [];\n            var snaps = this.snaps;\n            var length = snaps.length;\n            var m = 0;\n            var n = -1;\n            var x = 0;\n            var leftX = 0;\n            var rightX = 0;\n            var snapX = 0;\n            for (var i = 0; i < length; i++) {\n                var snap = snaps[i];\n                var offsetLeft = snap.offsetLeft;\n                var offsetWidth = snap.offsetWidth;\n                if (i === 0 || offsetLeft <= snaps[i - 1].offsetLeft) {\n                    m = 0;\n                    n++;\n                }\n                if (!this.pages[m]) {\n                    this.pages[m] = [];\n                }\n                x = this._getSnapX(offsetLeft);\n                snapX = Math.round((offsetWidth) * this.options.snapX);\n                leftX = x - snapX;\n                rightX = x - offsetWidth + snapX;\n                this.pages[m][n] = {\n                    x: x,\n                    leftX: leftX,\n                    rightX: rightX,\n                    pageX: m,\n                    element: snap\n                }\n                if (snap.classList.contains(CLASS_ACTIVE)) {\n                    this.currentPage = this.pages[m][0];\n                }\n                if (x >= this.maxScrollX) {\n                    m++;\n                }\n            }\n            this.options.startX = this.currentPage.x || 0;\n        },\n        _getSnapX: function(offsetLeft) {\n            return Math.max(Math.min(0, -offsetLeft + (this.wrapperWidth / 2)), this.maxScrollX);\n        },\n        _gotoPage: function(index) {\n            this.currentPage = this.pages[Math.min(index, this.pages.length - 1)][0];\n            for (var i = 0, len = this.snaps.length; i < len; i++) {\n                if (i === index) {\n                    this.snaps[i].classList.add(CLASS_ACTIVE);\n                } else {\n                    this.snaps[i].classList.remove(CLASS_ACTIVE);\n                }\n            }\n            this.scrollTo(this.currentPage.x, 0, this.options.scrollTime);\n        },\n        _nearestSnap: function(x) {\n            if (!this.pages.length) {\n                return {\n                    x: 0,\n                    pageX: 0\n                };\n            }\n            var i = 0;\n            var length = this.pages.length;\n            if (x > 0) {\n                x = 0;\n            } else if (x < this.maxScrollX) {\n                x = this.maxScrollX;\n            }\n            for (; i < length; i++) {\n                var nearestX = this.direction === 'left' ? this.pages[i][0].leftX : this.pages[i][0].rightX;\n                if (x >= nearestX) {\n                    return this.pages[i][0];\n                }\n            }\n            return {\n                x: 0,\n                pageX: 0\n            };\n        },\n        _initEvent: function(detach) {\n            var action = detach ? 'removeEventListener' : 'addEventListener';\n            window[action]('orientationchange', this);\n            window[action]('resize', this);\n\n            this.scroller[action]('webkitTransitionEnd', this);\n\n            this.wrapper[action]($.EVENT_START, this);\n            this.wrapper[action]($.EVENT_CANCEL, this);\n            this.wrapper[action]($.EVENT_END, this);\n            this.wrapper[action]('drag', this);\n            this.wrapper[action]('dragend', this);\n            this.wrapper[action]('flick', this);\n            this.wrapper[action]('scrollend', this);\n            if (this.options.scrollX) {\n                this.wrapper[action]('swiperight', this);\n            }\n            var segmentedControl = this.wrapper.querySelector('.mui-segmented-control');\n            if (segmentedControl) { //靠，这个bug排查了一下午，阻止hash跳转，一旦hash跳转会导致可拖拽选项卡的tab不见\n                mui(segmentedControl)[detach ? 'off' : 'on']('click', 'a', $.preventDefault);\n            }\n\n            this.wrapper[action]('scrollstart', this);\n            this.wrapper[action]('refresh', this);\n        },\n        _handleIndicatorScrollend: function() {\n            this.indicators.map(function(indicator) {\n                indicator.fade();\n            });\n        },\n        _handleIndicatorScrollstart: function() {\n            this.indicators.map(function(indicator) {\n                indicator.fade(1);\n            });\n        },\n        _handleIndicatorRefresh: function() {\n            this.indicators.map(function(indicator) {\n                indicator.refresh();\n            });\n        },\n        handleEvent: function(e) {\n            if (this.stopped) {\n                this.resetPosition();\n                return;\n            }\n\n            switch (e.type) {\n                case $.EVENT_START:\n                    this._start(e);\n                    break;\n                case 'drag':\n                    this.options.stopPropagation && e.stopPropagation();\n                    this._drag(e);\n                    break;\n                case 'dragend':\n                case 'flick':\n                    this.options.stopPropagation && e.stopPropagation();\n                    this._flick(e);\n                    break;\n                case $.EVENT_CANCEL:\n                case $.EVENT_END:\n                    this._end(e);\n                    break;\n                case 'webkitTransitionEnd':\n                    this.transitionTimer && this.transitionTimer.cancel();\n                    this._transitionEnd(e);\n                    break;\n                case 'scrollstart':\n                    this._handleIndicatorScrollstart(e);\n                    break;\n                case 'scrollend':\n                    this._handleIndicatorScrollend(e);\n                    this._scrollend(e);\n                    e.stopPropagation();\n                    break;\n                case 'orientationchange':\n                case 'resize':\n                    this._resize();\n                    break;\n                case 'swiperight':\n                    e.stopPropagation();\n                    break;\n                case 'refresh':\n                    this._handleIndicatorRefresh(e);\n                    break;\n\n            }\n        },\n        _start: function(e) {\n            this.moved = this.needReset = false;\n            this._transitionTime();\n            if (this.isInTransition) {\n                this.needReset = true;\n                this.isInTransition = false;\n                var pos = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n                this.setTranslate(Math.round(pos.x), Math.round(pos.y));\n                //\t\t\t\tthis.resetPosition(); //reset\n                $.trigger(this.scroller, 'scrollend', this);\n                //\t\t\t\te.stopPropagation();\n                e.preventDefault();\n            }\n            this.reLayout();\n            $.trigger(this.scroller, 'beforescrollstart', this);\n        },\n        _getDirectionByAngle: function(angle) {\n            if (angle < -80 && angle > -100) {\n                return 'up';\n            } else if (angle >= 80 && angle < 100) {\n                return 'down';\n            } else if (angle >= 170 || angle <= -170) {\n                return 'left';\n            } else if (angle >= -35 && angle <= 10) {\n                return 'right';\n            }\n            return null;\n        },\n        _drag: function(e) {\n            //\t\t\tif (this.needReset) {\n            //\t\t\t\te.stopPropagation(); //disable parent drag(nested scroller)\n            //\t\t\t\treturn;\n            //\t\t\t}\n            var detail = e.detail;\n            if (this.options.scrollY || detail.direction === 'up' || detail.direction === 'down') { //如果是竖向滚动或手势方向是上或下\n                //ios8 hack\n                if ($.os.ios && parseFloat($.os.version) >= 8) { //多webview时，离开当前webview会导致后续touch事件不触发\n                    var clientY = detail.gesture.touches[0].clientY;\n                    //下拉刷新 or 上拉加载\n                    if ((clientY + 10) > window.innerHeight || clientY < 10) {\n                        this.resetPosition(this.options.bounceTime);\n                        return;\n                    }\n                }\n            }\n            var isPreventDefault = isReturn = false;\n            var direction = this._getDirectionByAngle(detail.angle);\n            if (detail.direction === 'left' || detail.direction === 'right') {\n                if (this.options.scrollX) {\n                    isPreventDefault = true;\n                    if (!this.moved) { //识别角度(该角度导致轮播不灵敏)\n                        //\t\t\t\t\t\tif (direction !== 'left' && direction !== 'right') {\n                        //\t\t\t\t\t\t\tisReturn = true;\n                        //\t\t\t\t\t\t} else {\n                        $.gestures.session.lockDirection = true; //锁定方向\n                        $.gestures.session.startDirection = detail.direction;\n                        //\t\t\t\t\t\t}\n                    }\n                } else if (this.options.scrollY && !this.moved) {\n                    isReturn = true;\n                }\n            } else if (detail.direction === 'up' || detail.direction === 'down') {\n                if (this.options.scrollY) {\n                    isPreventDefault = true;\n                    //\t\t\t\t\tif (!this.moved) { //识别角度,竖向滚动似乎没必要进行小角度验证\n                    //\t\t\t\t\t\tif (direction !== 'up' && direction !== 'down') {\n                    //\t\t\t\t\t\t\tisReturn = true;\n                    //\t\t\t\t\t\t}\n                    //\t\t\t\t\t}\n                    if (!this.moved) {\n                        $.gestures.session.lockDirection = true; //锁定方向\n                        $.gestures.session.startDirection = detail.direction;\n                    }\n                } else if (this.options.scrollX && !this.moved) {\n                    isReturn = true;\n                }\n            } else {\n                isReturn = true;\n            }\n            if (this.moved || isPreventDefault) {\n                e.stopPropagation(); //阻止冒泡(scroll类嵌套)\n                detail.gesture && detail.gesture.preventDefault();\n            }\n            if (isReturn) { //禁止非法方向滚动\n                return;\n            }\n            if (!this.moved) {\n                $.trigger(this.scroller, 'scrollstart', this);\n            } else {\n                e.stopPropagation(); //move期间阻止冒泡(scroll嵌套)\n            }\n            var deltaX = 0;\n            var deltaY = 0;\n            if (!this.moved) { //start\n                deltaX = detail.deltaX;\n                deltaY = detail.deltaY;\n            } else { //move\n                deltaX = detail.deltaX - $.gestures.session.prevTouch.deltaX;\n                deltaY = detail.deltaY - $.gestures.session.prevTouch.deltaY;\n            }\n            var absDeltaX = Math.abs(detail.deltaX);\n            var absDeltaY = Math.abs(detail.deltaY);\n            if (absDeltaX > absDeltaY + this.options.directionLockThreshold) {\n                deltaY = 0;\n            } else if (absDeltaY >= absDeltaX + this.options.directionLockThreshold) {\n                deltaX = 0;\n            }\n\n            deltaX = this.hasHorizontalScroll ? deltaX : 0;\n            deltaY = this.hasVerticalScroll ? deltaY : 0;\n            var newX = this.x + deltaX;\n            var newY = this.y + deltaY;\n            // Slow down if outside of the boundaries\n            if (newX > 0 || newX < this.maxScrollX) {\n                newX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\n            }\n            if (newY > 0 || newY < this.maxScrollY) {\n                newY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\n            }\n\n            if (!this.requestAnimationFrame) {\n                this._updateTranslate();\n            }\n            this.direction = detail.deltaX > 0 ? 'right' : 'left';\n            this.moved = true;\n            this.x = newX;\n            this.y = newY;\n            $.trigger(this.scroller, 'scroll', this);\n        },\n        _flick: function(e) {\n            //\t\t\tif (!this.moved || this.needReset) {\n            //\t\t\t\treturn;\n            //\t\t\t}\n            if (!this.moved) {\n                return;\n            }\n            e.stopPropagation();\n            var detail = e.detail;\n            this._clearRequestAnimationFrame();\n            if (e.type === 'dragend' && detail.flick) { //dragend\n                return;\n            }\n\n            var newX = Math.round(this.x);\n            var newY = Math.round(this.y);\n\n            this.isInTransition = false;\n            // reset if we are outside of the boundaries\n            if (this.resetPosition(this.options.bounceTime)) {\n                return;\n            }\n\n            this.scrollTo(newX, newY); // ensures that the last position is rounded\n\n            if (e.type === 'dragend') { //dragend\n                $.trigger(this.scroller, 'scrollend', this);\n                return;\n            }\n            var time = 0;\n            var easing = '';\n            // start momentum animation if needed\n            if (this.options.momentum && detail.flickTime < 300) {\n                momentumX = this.hasHorizontalScroll ? this._momentum(this.x, detail.flickDistanceX, detail.flickTime, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {\n                    destination: newX,\n                    duration: 0\n                };\n                momentumY = this.hasVerticalScroll ? this._momentum(this.y, detail.flickDistanceY, detail.flickTime, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {\n                    destination: newY,\n                    duration: 0\n                };\n                newX = momentumX.destination;\n                newY = momentumY.destination;\n                time = Math.max(momentumX.duration, momentumY.duration);\n                this.isInTransition = true;\n            }\n\n            if (newX != this.x || newY != this.y) {\n                if (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {\n                    easing = ease.quadratic;\n                }\n                this.scrollTo(newX, newY, time, easing);\n                return;\n            }\n\n            $.trigger(this.scroller, 'scrollend', this);\n            //\t\t\te.stopPropagation();\n        },\n        _end: function(e) {\n            this.needReset = false;\n            if ((!this.moved && this.needReset) || e.type === $.EVENT_CANCEL) {\n                this.resetPosition();\n            }\n        },\n        _transitionEnd: function(e) {\n            if (e.target != this.scroller || !this.isInTransition) {\n                return;\n            }\n            this._transitionTime();\n            if (!this.resetPosition(this.options.bounceTime)) {\n                this.isInTransition = false;\n                $.trigger(this.scroller, 'scrollend', this);\n            }\n        },\n        _scrollend: function(e) {\n            if ((this.y === 0 && this.maxScrollY === 0) || (Math.abs(this.y) > 0 && this.y <= this.maxScrollY)) {\n                $.trigger(this.scroller, 'scrollbottom', this);\n            }\n        },\n        _resize: function() {\n            var that = this;\n            clearTimeout(that.resizeTimeout);\n            that.resizeTimeout = setTimeout(function() {\n                that.refresh();\n            }, that.options.resizePolling);\n        },\n        _transitionTime: function(time) {\n            time = time || 0;\n            this.scrollerStyle['webkitTransitionDuration'] = time + 'ms';\n            if (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n                this.parallaxStyle['webkitTransitionDuration'] = time + 'ms';\n            }\n            if (this.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n                this.scrollerStyle['webkitTransitionDuration'] = '0.001s';\n                if (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n                    this.parallaxStyle['webkitTransitionDuration'] = '0.001s';\n                }\n            }\n            if (this.indicators) {\n                for (var i = this.indicators.length; i--;) {\n                    this.indicators[i].transitionTime(time);\n                }\n            }\n            if (time) { //自定义timer，保证webkitTransitionEnd始终触发\n                this.transitionTimer && this.transitionTimer.cancel();\n                this.transitionTimer = $.later(function() {\n                    $.trigger(this.scroller, 'webkitTransitionEnd');\n                }, time + 100, this);\n            }\n        },\n        _transitionTimingFunction: function(easing) {\n            this.scrollerStyle['webkitTransitionTimingFunction'] = easing;\n            if (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n                this.parallaxStyle['webkitTransitionDuration'] = easing;\n            }\n            if (this.indicators) {\n                for (var i = this.indicators.length; i--;) {\n                    this.indicators[i].transitionTimingFunction(easing);\n                }\n            }\n        },\n        _translate: function(x, y) {\n            this.x = x;\n            this.y = y;\n        },\n        _clearRequestAnimationFrame: function() {\n            if (this.requestAnimationFrame) {\n                cancelAnimationFrame(this.requestAnimationFrame);\n                this.requestAnimationFrame = null;\n            }\n        },\n        _updateTranslate: function() {\n            var self = this;\n            if (self.x !== self.lastX || self.y !== self.lastY) {\n                self.setTranslate(self.x, self.y);\n            }\n            self.requestAnimationFrame = requestAnimationFrame(function() {\n                self._updateTranslate();\n            });\n        },\n        _createScrollBar: function(clazz) {\n            var scrollbar = document.createElement('div');\n            var indicator = document.createElement('div');\n            scrollbar.className = CLASS_SCROLLBAR + ' ' + clazz;\n            indicator.className = CLASS_INDICATOR;\n            scrollbar.appendChild(indicator);\n            if (clazz === CLASS_SCROLLBAR_VERTICAL) {\n                this.scrollbarY = scrollbar;\n                this.scrollbarIndicatorY = indicator;\n            } else if (clazz === CLASS_SCROLLBAR_HORIZONTAL) {\n                this.scrollbarX = scrollbar;\n                this.scrollbarIndicatorX = indicator;\n            }\n            this.wrapper.appendChild(scrollbar);\n            return scrollbar;\n        },\n        _preventDefaultException: function(el, exceptions) {\n            for (var i in exceptions) {\n                if (exceptions[i].test(el[i])) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        _reLayout: function() {\n            if (!this.hasHorizontalScroll) {\n                this.maxScrollX = 0;\n                this.scrollerWidth = this.wrapperWidth;\n            }\n\n            if (!this.hasVerticalScroll) {\n                this.maxScrollY = 0;\n                this.scrollerHeight = this.wrapperHeight;\n            }\n\n            this.indicators.map(function(indicator) {\n                indicator.refresh();\n            });\n\n            //以防slider类嵌套使用\n            if (this.options.snap && typeof this.options.snap === 'string') {\n                var items = this.scroller.querySelectorAll(this.options.snap);\n                this.itemLength = 0;\n                this.snaps = [];\n                for (var i = 0, len = items.length; i < len; i++) {\n                    var item = items[i];\n                    if (item.parentNode === this.scroller) {\n                        this.itemLength++;\n                        this.snaps.push(item);\n                    }\n                }\n                this._initSnap(); //需要每次都_initSnap么。其实init的时候执行一次，后续resize的时候执行一次就行了吧.先这么做吧，如果影响性能，再调整\n            }\n        },\n        _momentum: function(current, distance, time, lowerMargin, wrapperSize, deceleration) {\n            var speed = parseFloat(Math.abs(distance) / time),\n                destination,\n                duration;\n\n            deceleration = deceleration === undefined ? 0.0006 : deceleration;\n            destination = current + (speed * speed) / (2 * deceleration) * (distance < 0 ? -1 : 1);\n            duration = speed / deceleration;\n            if (destination < lowerMargin) {\n                destination = wrapperSize ? lowerMargin - (wrapperSize / 2.5 * (speed / 8)) : lowerMargin;\n                distance = Math.abs(destination - current);\n                duration = distance / speed;\n            } else if (destination > 0) {\n                destination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\n                distance = Math.abs(current) + destination;\n                duration = distance / speed;\n            }\n\n            return {\n                destination: Math.round(destination),\n                duration: duration\n            };\n        },\n        _getTranslateStr: function(x, y) {\n            if (this.options.hardwareAccelerated) {\n                return 'translate3d(' + x + 'px,' + y + 'px,0px) ' + this.translateZ;\n            }\n            return 'translate(' + x + 'px,' + y + 'px) ';\n        },\n        //API\n        setStopped: function(stopped) {\n            this.stopped = !!stopped;\n        },\n        setTranslate: function(x, y) {\n            this.x = x;\n            this.y = y;\n            this.scrollerStyle['webkitTransform'] = this._getTranslateStr(x, y);\n            if (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\n                var parallaxY = y * this.options.parallaxRatio;\n                var scale = 1 + parallaxY / ((this.parallaxHeight - parallaxY) / 2);\n                if (scale > 1) {\n                    this.parallaxImgStyle['opacity'] = 1 - parallaxY / 100 * this.options.parallaxRatio;\n                    this.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -parallaxY) + ' scale(' + scale + ',' + scale + ')';\n                } else {\n                    this.parallaxImgStyle['opacity'] = 1;\n                    this.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -1) + ' scale(1,1)';\n                }\n            }\n            if (this.indicators) {\n                for (var i = this.indicators.length; i--;) {\n                    this.indicators[i].updatePosition();\n                }\n            }\n            this.lastX = this.x;\n            this.lastY = this.y;\n            $.trigger(this.scroller, 'scroll', this);\n        },\n        reLayout: function() {\n            this.wrapper.offsetHeight;\n\n            var paddingLeft = parseFloat($.getStyles(this.wrapper, 'padding-left')) || 0;\n            var paddingRight = parseFloat($.getStyles(this.wrapper, 'padding-right')) || 0;\n            var paddingTop = parseFloat($.getStyles(this.wrapper, 'padding-top')) || 0;\n            var paddingBottom = parseFloat($.getStyles(this.wrapper, 'padding-bottom')) || 0;\n\n            var clientWidth = this.wrapper.clientWidth;\n            var clientHeight = this.wrapper.clientHeight;\n\n            this.scrollerWidth = this.scroller.offsetWidth;\n            this.scrollerHeight = this.scroller.offsetHeight;\n\n            this.wrapperWidth = clientWidth - paddingLeft - paddingRight;\n            this.wrapperHeight = clientHeight - paddingTop - paddingBottom;\n\n            this.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n            this.maxScrollY = Math.min(this.wrapperHeight - this.scrollerHeight, 0);\n            this.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;\n            this.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;\n            this._reLayout();\n        },\n        resetPosition: function(time) {\n            var x = this.x,\n                y = this.y;\n\n            time = time || 0;\n            if (!this.hasHorizontalScroll || this.x > 0) {\n                x = 0;\n            } else if (this.x < this.maxScrollX) {\n                x = this.maxScrollX;\n            }\n\n            if (!this.hasVerticalScroll || this.y > 0) {\n                y = 0;\n            } else if (this.y < this.maxScrollY) {\n                y = this.maxScrollY;\n            }\n\n            if (x == this.x && y == this.y) {\n                return false;\n            }\n            this.scrollTo(x, y, time, this.options.scrollEasing);\n\n            return true;\n        },\n        _reInit: function() {\n            var groups = this.wrapper.querySelectorAll('.' + CLASS_SCROLL);\n            for (var i = 0, len = groups.length; i < len; i++) {\n                if (groups[i].parentNode === this.wrapper) {\n                    this.scroller = groups[i];\n                    break;\n                }\n            }\n            this.scrollerStyle = this.scroller && this.scroller.style;\n        },\n        refresh: function() {\n            this._reInit();\n            this.reLayout();\n            $.trigger(this.scroller, 'refresh', this);\n            this.resetPosition();\n        },\n        scrollTo: function(x, y, time, easing) {\n            var easing = easing || ease.circular;\n            //\t\t\tthis.isInTransition = time > 0 && (this.lastX != x || this.lastY != y);\n            //暂不严格判断x,y，否则会导致部分版本上不正常触发轮播\n            this.isInTransition = time > 0;\n            if (this.isInTransition) {\n                this._clearRequestAnimationFrame();\n                this._transitionTimingFunction(easing.style);\n                this._transitionTime(time);\n                this.setTranslate(x, y);\n            } else {\n                this.setTranslate(x, y);\n            }\n\n        },\n        scrollToBottom: function(time, easing) {\n            time = time || this.options.scrollTime;\n            this.scrollTo(0, this.maxScrollY, time, easing);\n        },\n        gotoPage: function(index) {\n            this._gotoPage(index);\n        },\n        destroy: function() {\n            this._initEvent(true); //detach\n            delete $.data[this.wrapper.getAttribute('data-scroll')];\n            this.wrapper.setAttribute('data-scroll', '');\n        }\n    });\n    //Indicator\n    var Indicator = function(scroller, options) {\n        this.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\n        this.wrapperStyle = this.wrapper.style;\n        this.indicator = this.wrapper.children[0];\n        this.indicatorStyle = this.indicator.style;\n        this.scroller = scroller;\n\n        this.options = $.extend({\n            listenX: true,\n            listenY: true,\n            fade: false,\n            speedRatioX: 0,\n            speedRatioY: 0\n        }, options);\n\n        this.sizeRatioX = 1;\n        this.sizeRatioY = 1;\n        this.maxPosX = 0;\n        this.maxPosY = 0;\n\n        if (this.options.fade) {\n            this.wrapperStyle['webkitTransform'] = this.scroller.translateZ;\n            this.wrapperStyle['webkitTransitionDuration'] = this.options.fixedBadAndorid && $.os.isBadAndroid ? '0.001s' : '0ms';\n            this.wrapperStyle.opacity = '0';\n        }\n    }\n    Indicator.prototype = {\n        handleEvent: function(e) {\n\n        },\n        transitionTime: function(time) {\n            time = time || 0;\n            this.indicatorStyle['webkitTransitionDuration'] = time + 'ms';\n            if (this.scroller.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\n                this.indicatorStyle['webkitTransitionDuration'] = '0.001s';\n            }\n        },\n        transitionTimingFunction: function(easing) {\n            this.indicatorStyle['webkitTransitionTimingFunction'] = easing;\n        },\n        refresh: function() {\n            this.transitionTime();\n\n            if (this.options.listenX && !this.options.listenY) {\n                this.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\n            } else if (this.options.listenY && !this.options.listenX) {\n                this.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\n            } else {\n                this.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\n            }\n\n            this.wrapper.offsetHeight; // force refresh\n\n            if (this.options.listenX) {\n                this.wrapperWidth = this.wrapper.clientWidth;\n                this.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\n                this.indicatorStyle.width = this.indicatorWidth + 'px';\n\n                this.maxPosX = this.wrapperWidth - this.indicatorWidth;\n\n                this.minBoundaryX = 0;\n                this.maxBoundaryX = this.maxPosX;\n\n                this.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\n            }\n\n            if (this.options.listenY) {\n                this.wrapperHeight = this.wrapper.clientHeight;\n                this.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\n                this.indicatorStyle.height = this.indicatorHeight + 'px';\n\n                this.maxPosY = this.wrapperHeight - this.indicatorHeight;\n\n                this.minBoundaryY = 0;\n                this.maxBoundaryY = this.maxPosY;\n\n                this.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\n            }\n\n            this.updatePosition();\n        },\n\n        updatePosition: function() {\n            var x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\n                y = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\n\n            if (x < this.minBoundaryX) {\n                this.width = Math.max(this.indicatorWidth + x, 8);\n                this.indicatorStyle.width = this.width + 'px';\n                x = this.minBoundaryX;\n            } else if (x > this.maxBoundaryX) {\n                this.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\n                this.indicatorStyle.width = this.width + 'px';\n                x = this.maxPosX + this.indicatorWidth - this.width;\n            } else if (this.width != this.indicatorWidth) {\n                this.width = this.indicatorWidth;\n                this.indicatorStyle.width = this.width + 'px';\n            }\n\n            if (y < this.minBoundaryY) {\n                this.height = Math.max(this.indicatorHeight + y * 3, 8);\n                this.indicatorStyle.height = this.height + 'px';\n                y = this.minBoundaryY;\n            } else if (y > this.maxBoundaryY) {\n                this.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\n                this.indicatorStyle.height = this.height + 'px';\n                y = this.maxPosY + this.indicatorHeight - this.height;\n            } else if (this.height != this.indicatorHeight) {\n                this.height = this.indicatorHeight;\n                this.indicatorStyle.height = this.height + 'px';\n            }\n\n            this.x = x;\n            this.y = y;\n\n            this.indicatorStyle['webkitTransform'] = this.scroller._getTranslateStr(x, y);\n\n        },\n        fade: function(val, hold) {\n            if (hold && !this.visible) {\n                return;\n            }\n\n            clearTimeout(this.fadeTimeout);\n            this.fadeTimeout = null;\n\n            var time = val ? 250 : 500,\n                delay = val ? 0 : 300;\n\n            val = val ? '1' : '0';\n\n            this.wrapperStyle['webkitTransitionDuration'] = time + 'ms';\n\n            this.fadeTimeout = setTimeout((function(val) {\n                this.wrapperStyle.opacity = val;\n                this.visible = +val;\n            }).bind(this, val), delay);\n        }\n    };\n\n    $.Scroll = Scroll;\n\n    $.fn.scroll = function(options) {\n        var scrollApis = [];\n        this.each(function() {\n            var scrollApi = null;\n            var self = this;\n            var id = self.getAttribute('data-scroll');\n            if (!id) {\n                id = ++$.uuid;\n                var _options = $.extend({}, options);\n                if (self.classList.contains('mui-segmented-control')) {\n                    _options = $.extend(_options, {\n                        scrollY: false,\n                        scrollX: true,\n                        indicators: false,\n                        snap: '.mui-control-item'\n                    });\n                }\n                $.data[id] = scrollApi = new Scroll(self, _options);\n                self.setAttribute('data-scroll', id);\n            } else {\n                scrollApi = $.data[id];\n            }\n            scrollApis.push(scrollApi);\n        });\n        return scrollApis.length === 1 ? scrollApis[0] : scrollApis;\n    };\n})(mui, window, document);\n(function($, window, document, undefined) {\n\n    var CLASS_VISIBILITY = 'mui-visibility';\n    var CLASS_HIDDEN = 'mui-hidden';\n\n    var PullRefresh = $.Scroll.extend($.extend({\n        handleEvent: function(e) {\n            this._super(e);\n            if (e.type === 'scrollbottom') {\n                if (e.target === this.scroller) {\n                    this._scrollbottom();\n                }\n            }\n        },\n        _scrollbottom: function() {\n            if (!this.pulldown && !this.loading) {\n                this.pulldown = false;\n                this._initPullupRefresh();\n                this.pullupLoading();\n            }\n        },\n        _start: function(e) {\n            //仅下拉刷新在start阻止默认事件\n            if (e.touches && e.touches.length && e.touches[0].clientX > 30) {\n                e.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n            }\n            if (!this.loading) {\n                this.pulldown = this.pullPocket = this.pullCaption = this.pullLoading = false\n            }\n            this._super(e);\n        },\n        _drag: function(e) {\n            this._super(e);\n            if (!this.pulldown && !this.loading && this.topPocket && e.detail.direction === 'down' && this.y >= 0) {\n                this._initPulldownRefresh();\n            }\n            if (this.pulldown) {\n                this._setCaption(this.y > this.options.down.height ? this.options.down.contentover : this.options.down.contentdown);\n            }\n        },\n\n        _reLayout: function() {\n            this.hasVerticalScroll = true;\n            this._super();\n        },\n        //API\n        resetPosition: function(time) {\n            if (this.pulldown) {\n                if (this.y >= this.options.down.height) {\n                    this.pulldownLoading(undefined, time || 0);\n                    return true;\n                } else {\n                    !this.loading && this.topPocket.classList.remove(CLASS_VISIBILITY);\n                }\n            }\n            return this._super(time);\n        },\n        pulldownLoading: function(y, time) {\n            typeof y === 'undefined' && (y = this.options.down.height); //默认高度\n            this.scrollTo(0, y, time, this.options.bounceEasing);\n            if (this.loading) {\n                return;\n            }\n            //\t\t\tif (!this.pulldown) {\n            this._initPulldownRefresh();\n            //\t\t\t}\n            this._setCaption(this.options.down.contentrefresh);\n            this.loading = true;\n            this.indicators.map(function(indicator) {\n                indicator.fade(0);\n            });\n            var callback = this.options.down.callback;\n            callback && callback.call(this);\n        },\n        endPulldownToRefresh: function() {\n            var self = this;\n            if (self.topPocket && self.loading && this.pulldown) {\n                self.scrollTo(0, 0, self.options.bounceTime, self.options.bounceEasing);\n                self.loading = false;\n                self._setCaption(self.options.down.contentdown, true);\n                setTimeout(function() {\n                    self.loading || self.topPocket.classList.remove(CLASS_VISIBILITY);\n                }, 350);\n            }\n        },\n        pullupLoading: function(callback, x, time) {\n            x = x || 0;\n            this.scrollTo(x, this.maxScrollY, time, this.options.bounceEasing);\n            if (this.loading) {\n                return;\n            }\n            this._initPullupRefresh();\n            this._setCaption(this.options.up.contentrefresh);\n            this.indicators.map(function(indicator) {\n                indicator.fade(0);\n            });\n            this.loading = true;\n            callback = callback || this.options.up.callback;\n            callback && callback.call(this);\n        },\n        endPullupToRefresh: function(finished) {\n            var self = this;\n            if (self.bottomPocket) { // && self.loading && !this.pulldown\n                self.loading = false;\n                if (finished) {\n                    this.finished = true;\n                    self._setCaption(self.options.up.contentnomore);\n                    //\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_VISIBILITY);\n                    //\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\n                    self.wrapper.removeEventListener('scrollbottom', self);\n                } else {\n                    self._setCaption(self.options.up.contentdown);\n                    //\t\t\t\t\tsetTimeout(function() {\n                    self.loading || self.bottomPocket.classList.remove(CLASS_VISIBILITY);\n                    //\t\t\t\t\t}, 300);\n                }\n            }\n        },\n        disablePullupToRefresh: function() {\n            this._initPullupRefresh();\n            this.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n            this.wrapper.removeEventListener('scrollbottom', this);\n        },\n        enablePullupToRefresh: function() {\n            this._initPullupRefresh();\n            this.bottomPocket.classList.remove(CLASS_HIDDEN);\n            this._setCaption(this.options.up.contentdown);\n            this.wrapper.addEventListener('scrollbottom', this);\n        },\n        refresh: function(isReset) {\n            if (isReset && this.finished) {\n                this.enablePullupToRefresh();\n                this.finished = false;\n            }\n            this._super();\n        },\n    }, $.PullRefresh));\n    $.fn.pullRefresh = function(options) {\n        if (this.length === 1) {\n            var self = this[0];\n            var pullRefreshApi = null;\n            options = options || {};\n            var id = self.getAttribute('data-pullrefresh');\n            if (!id) {\n                id = ++$.uuid;\n                $.data[id] = pullRefreshApi = new PullRefresh(self, options);\n                self.setAttribute('data-pullrefresh', id);\n            } else {\n                pullRefreshApi = $.data[id];\n            }\n            if (options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\n                pullRefreshApi.pulldownLoading(options.down.autoY);\n            } else if (options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\n                pullRefreshApi.pullupLoading();\n            }\n            //暂不提供这种调用方式吧\t\t\t\n            //\t\t\tif (typeof options === 'string') {\n            //\t\t\t\tvar methodValue = pullRefreshApi[options].apply(pullRefreshApi, $.slice.call(arguments, 1));\n            //\t\t\t\tif (methodValue !== undefined) {\n            //\t\t\t\t\treturn methodValue;\n            //\t\t\t\t}\n            //\t\t\t}\n            return pullRefreshApi;\n        }\n    };\n})(mui, window, document);\n/**\n * snap 重构\n * @param {Object} $\n * @param {Object} window\n */\n(function($, window) {\n    var CLASS_SLIDER = 'mui-slider';\n    var CLASS_SLIDER_GROUP = 'mui-slider-group';\n    var CLASS_SLIDER_LOOP = 'mui-slider-loop';\n    var CLASS_SLIDER_INDICATOR = 'mui-slider-indicator';\n    var CLASS_ACTION_PREVIOUS = 'mui-action-previous';\n    var CLASS_ACTION_NEXT = 'mui-action-next';\n    var CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n    var CLASS_ACTIVE = 'mui-active';\n\n    var SELECTOR_SLIDER_ITEM = '.' + CLASS_SLIDER_ITEM;\n    var SELECTOR_SLIDER_INDICATOR = '.' + CLASS_SLIDER_INDICATOR;\n    var SELECTOR_SLIDER_PROGRESS_BAR = '.mui-slider-progress-bar';\n\n    var Slider = $.Slider = $.Scroll.extend({\n        init: function(element, options) {\n            this._super(element, $.extend(true, {\n                fingers: 1,\n                interval: 0, //设置为0，则不定时轮播\n                scrollY: false,\n                scrollX: true,\n                indicators: false,\n                scrollTime: 1000,\n                startX: false,\n                slideTime: 0, //滑动动画时间\n                snap: SELECTOR_SLIDER_ITEM\n            }, options));\n            if (this.options.startX) {\n                //\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\n            }\n        },\n        _init: function() {\n            this._reInit();\n            if (this.scroller) {\n                this.scrollerStyle = this.scroller.style;\n                this.progressBar = this.wrapper.querySelector(SELECTOR_SLIDER_PROGRESS_BAR);\n                if (this.progressBar) {\n                    this.progressBarWidth = this.progressBar.offsetWidth;\n                    this.progressBarStyle = this.progressBar.style;\n                }\n                //忘记这个代码是干什么的了？\n                //\t\t\t\tthis.x = this._getScroll();\n                //\t\t\t\tif (this.options.startX === false) {\n                //\t\t\t\t\tthis.options.startX = this.x;\n                //\t\t\t\t}\n                //根据active修正startX\n\n                this._super();\n                this._initTimer();\n            }\n        },\n        _triggerSlide: function() {\n            var self = this;\n            self.isInTransition = false;\n            var page = self.currentPage;\n            self.slideNumber = self._fixedSlideNumber();\n            if (self.loop) {\n                if (self.slideNumber === 0) {\n                    self.setTranslate(self.pages[1][0].x, 0);\n                } else if (self.slideNumber === self.itemLength - 3) {\n                    self.setTranslate(self.pages[self.itemLength - 2][0].x, 0);\n                }\n            }\n            if (self.lastSlideNumber != self.slideNumber) {\n                self.lastSlideNumber = self.slideNumber;\n                self.lastPage = self.currentPage;\n                $.trigger(self.wrapper, 'slide', {\n                    slideNumber: self.slideNumber\n                });\n            }\n            self._initTimer();\n        },\n        _handleSlide: function(e) {\n            var self = this;\n            if (e.target !== self.wrapper) {\n                return;\n            }\n            var detail = e.detail;\n            detail.slideNumber = detail.slideNumber || 0;\n            var temps = self.scroller.querySelectorAll(SELECTOR_SLIDER_ITEM);\n            var items = [];\n            for (var i = 0, len = temps.length; i < len; i++) {\n                var item = temps[i];\n                if (item.parentNode === self.scroller) {\n                    items.push(item);\n                }\n            }\n            var _slideNumber = detail.slideNumber;\n            if (self.loop) {\n                _slideNumber += 1;\n            }\n            if (!self.wrapper.classList.contains('mui-segmented-control')) {\n                for (var i = 0, len = items.length; i < len; i++) {\n                    var item = items[i];\n                    if (item.parentNode === self.scroller) {\n                        if (i === _slideNumber) {\n                            item.classList.add(CLASS_ACTIVE);\n                        } else {\n                            item.classList.remove(CLASS_ACTIVE);\n                        }\n                    }\n                }\n            }\n            var indicatorWrap = self.wrapper.querySelector('.mui-slider-indicator');\n            if (indicatorWrap) {\n                if (indicatorWrap.getAttribute('data-scroll')) { //scroll\n                    $(indicatorWrap).scroll().gotoPage(detail.slideNumber);\n                }\n                var indicators = indicatorWrap.querySelectorAll('.mui-indicator');\n                if (indicators.length > 0) { //图片轮播\n                    for (var i = 0, len = indicators.length; i < len; i++) {\n                        indicators[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n                    }\n                } else {\n                    var number = indicatorWrap.querySelector('.mui-number span');\n                    if (number) { //图文表格\n                        number.innerText = (detail.slideNumber + 1);\n                    } else { //segmented controls\n                        var controlItems = indicatorWrap.querySelectorAll('.mui-control-item');\n                        for (var i = 0, len = controlItems.length; i < len; i++) {\n                            controlItems[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\n                        }\n                    }\n                }\n            }\n            e.stopPropagation();\n        },\n        _handleTabShow: function(e) {\n            var self = this;\n            self.gotoItem((e.detail.tabNumber || 0), self.options.slideTime);\n        },\n        _handleIndicatorTap: function(event) {\n            var self = this;\n            var target = event.target;\n            if (target.classList.contains(CLASS_ACTION_PREVIOUS) || target.classList.contains(CLASS_ACTION_NEXT)) {\n                self[target.classList.contains(CLASS_ACTION_PREVIOUS) ? 'prevItem' : 'nextItem']();\n                event.stopPropagation();\n            }\n        },\n        _initEvent: function(detach) {\n            var self = this;\n            self._super(detach);\n            var action = detach ? 'removeEventListener' : 'addEventListener';\n            self.wrapper[action]('slide', this);\n            self.wrapper[action]($.eventName('shown', 'tab'), this);\n        },\n        handleEvent: function(e) {\n            this._super(e);\n            switch (e.type) {\n                case 'slide':\n                    this._handleSlide(e);\n                    break;\n                case $.eventName('shown', 'tab'):\n                    if (~this.snaps.indexOf(e.target)) { //避免嵌套监听错误的tab show\n                        this._handleTabShow(e);\n                    }\n                    break;\n            }\n        },\n        _scrollend: function(e) {\n            this._super(e);\n            this._triggerSlide(e);\n        },\n        _drag: function(e) {\n            this._super(e);\n            var direction = e.detail.direction;\n            if (direction === 'left' || direction === 'right') {\n                //拖拽期间取消定时\n                var slidershowTimer = this.wrapper.getAttribute('data-slidershowTimer');\n                slidershowTimer && window.clearTimeout(slidershowTimer);\n\n                e.stopPropagation();\n            }\n        },\n        _initTimer: function() {\n            var self = this;\n            var slider = self.wrapper;\n            var interval = self.options.interval;\n            var slidershowTimer = slider.getAttribute('data-slidershowTimer');\n            slidershowTimer && window.clearTimeout(slidershowTimer);\n            if (interval) {\n                slidershowTimer = window.setTimeout(function() {\n                    if (!slider) {\n                        return;\n                    }\n                    //仅slider显示状态进行自动轮播\n                    if (!!(slider.offsetWidth || slider.offsetHeight)) {\n                        self.nextItem(true);\n                        //下一个\n                    }\n                    self._initTimer();\n                }, interval);\n                slider.setAttribute('data-slidershowTimer', slidershowTimer);\n            }\n        },\n\n        _fixedSlideNumber: function(page) {\n            page = page || this.currentPage;\n            var slideNumber = page.pageX;\n            if (this.loop) {\n                if (page.pageX === 0) {\n                    slideNumber = this.itemLength - 3;\n                } else if (page.pageX === (this.itemLength - 1)) {\n                    slideNumber = 0;\n                } else {\n                    slideNumber = page.pageX - 1;\n                }\n            }\n            return slideNumber;\n        },\n        _reLayout: function() {\n            this.hasHorizontalScroll = true;\n            this.loop = this.scroller.classList.contains(CLASS_SLIDER_LOOP);\n            this._super();\n        },\n        _getScroll: function() {\n            var result = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\n            return result ? result.x : 0;\n        },\n        _transitionEnd: function(e) {\n            if (e.target !== this.scroller || !this.isInTransition) {\n                return;\n            }\n            this._transitionTime();\n            this.isInTransition = false;\n            $.trigger(this.wrapper, 'scrollend', this);\n        },\n        _flick: function(e) {\n            if (!this.moved) { //无moved\n                return;\n            }\n            var detail = e.detail;\n            var direction = detail.direction;\n            this._clearRequestAnimationFrame();\n            this.isInTransition = true;\n            //\t\t\tif (direction === 'up' || direction === 'down') {\n            //\t\t\t\tthis.resetPosition(this.options.bounceTime);\n            //\t\t\t\treturn;\n            //\t\t\t}\n            if (e.type === 'flick') {\n                if (detail.deltaTime < 200) { //flick，太容易触发，额外校验一下deltaTime\n                    this.x = this._getPage((this.slideNumber + (direction === 'right' ? -1 : 1)), true).x;\n                }\n                this.resetPosition(this.options.bounceTime);\n            } else if (e.type === 'dragend' && !detail.flick) {\n                this.resetPosition(this.options.bounceTime);\n            }\n            e.stopPropagation();\n        },\n        _initSnap: function() {\n            this.scrollerWidth = this.itemLength * this.scrollerWidth;\n            this.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\n            this._super();\n            if (!this.currentPage.x) {\n                //当slider处于隐藏状态时，导致snap计算是错误的，临时先这么判断一下，后续要考虑解决所有scroll在隐藏状态下初始化属性不正确的问题\n                var currentPage = this.pages[this.loop ? 1 : 0];\n                currentPage = currentPage || this.pages[0];\n                if (!currentPage) {\n                    return;\n                }\n                this.currentPage = currentPage[0];\n                this.slideNumber = 0;\n                this.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? 0 : this.lastSlideNumber;\n            } else {\n                this.slideNumber = this._fixedSlideNumber();\n                this.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? this.slideNumber : this.lastSlideNumber;\n            }\n            this.options.startX = this.currentPage.x || 0;\n        },\n        _getSnapX: function(offsetLeft) {\n            return Math.max(-offsetLeft, this.maxScrollX);\n        },\n        _getPage: function(slideNumber, isFlick) {\n            if (this.loop) {\n                if (slideNumber > (this.itemLength - (isFlick ? 2 : 3))) {\n                    slideNumber = 1;\n                    time = 0;\n                } else if (slideNumber < (isFlick ? -1 : 0)) {\n                    slideNumber = this.itemLength - 2;\n                    time = 0;\n                } else {\n                    slideNumber += 1;\n                }\n            } else {\n                if (!isFlick) {\n                    if (slideNumber > (this.itemLength - 1)) {\n                        slideNumber = 0;\n                        time = 0;\n                    } else if (slideNumber < 0) {\n                        slideNumber = this.itemLength - 1;\n                        time = 0;\n                    }\n                }\n                slideNumber = Math.min(Math.max(0, slideNumber), this.itemLength - 1);\n            }\n            return this.pages[slideNumber][0];\n        },\n        _gotoItem: function(slideNumber, time) {\n            this.currentPage = this._getPage(slideNumber, true); //此处传true。可保证程序切换时，动画与人手操作一致(第一张，最后一张的切换动画)\n            this.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n            if (time === 0) {\n                $.trigger(this.wrapper, 'scrollend', this);\n            }\n        },\n        //API\n        setTranslate: function(x, y) {\n            this._super(x, y);\n            var progressBar = this.progressBar;\n            if (progressBar) {\n                this.progressBarStyle.webkitTransform = this._getTranslateStr((-x * (this.progressBarWidth / this.wrapperWidth)), 0);\n            }\n        },\n        resetPosition: function(time) {\n            time = time || 0;\n            if (this.x > 0) {\n                this.x = 0;\n            } else if (this.x < this.maxScrollX) {\n                this.x = this.maxScrollX;\n            }\n            this.currentPage = this._nearestSnap(this.x);\n            this.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\n            return true;\n        },\n        gotoItem: function(slideNumber, time) {\n            this._gotoItem(slideNumber, typeof time === 'undefined' ? this.options.scrollTime : time);\n        },\n        nextItem: function() {\n            this._gotoItem(this.slideNumber + 1, this.options.scrollTime);\n        },\n        prevItem: function() {\n            this._gotoItem(this.slideNumber - 1, this.options.scrollTime);\n        },\n        getSlideNumber: function() {\n            return this.slideNumber || 0;\n        },\n        _reInit: function() {\n            var groups = this.wrapper.querySelectorAll('.' + CLASS_SLIDER_GROUP);\n            for (var i = 0, len = groups.length; i < len; i++) {\n                if (groups[i].parentNode === this.wrapper) {\n                    this.scroller = groups[i];\n                    break;\n                }\n            }\n            this.scrollerStyle = this.scroller && this.scroller.style;\n            if (this.progressBar) {\n                this.progressBarWidth = this.progressBar.offsetWidth;\n                this.progressBarStyle = this.progressBar.style;\n            }\n        },\n        refresh: function(options) {\n            if (options) {\n                $.extend(this.options, options);\n                this._super();\n                this._initTimer();\n            } else {\n                this._super();\n            }\n        },\n        destroy: function() {\n            this._initEvent(true); //detach\n            delete $.data[this.wrapper.getAttribute('data-slider')];\n            this.wrapper.setAttribute('data-slider', '');\n        }\n    });\n    $.fn.slider = function(options) {\n        var slider = null;\n        this.each(function() {\n            var sliderElement = this;\n            if (!this.classList.contains(CLASS_SLIDER)) {\n                sliderElement = this.querySelector('.' + CLASS_SLIDER);\n            }\n            if (sliderElement && sliderElement.querySelector(SELECTOR_SLIDER_ITEM)) {\n                var id = sliderElement.getAttribute('data-slider');\n                if (!id) {\n                    id = ++$.uuid;\n                    $.data[id] = slider = new Slider(sliderElement, options);\n                    sliderElement.setAttribute('data-slider', id);\n                } else {\n                    slider = $.data[id];\n                    if (slider && options) {\n                        slider.refresh(options);\n                    }\n                }\n            }\n        });\n        return slider;\n    };\n    $.ready(function() {\n        //\t\tsetTimeout(function() {\n        $('.mui-slider').slider();\n        $('.mui-scroll-wrapper.mui-slider-indicator.mui-segmented-control').scroll({\n            scrollY: false,\n            scrollX: true,\n            indicators: false,\n            snap: '.mui-control-item'\n        });\n        //\t\t}, 500); //临时处理slider宽度计算不正确的问题(初步确认是scrollbar导致的)\n\n    });\n})(mui, window);\n/**\n * pullRefresh 5+\n * @param {type} $\n * @returns {undefined}\n */\n(function($, document) {\n    if (!($.os.plus && $.os.android)) { //仅在android的5+版本使用\n        return;\n    }\n    var CLASS_PLUS_PULLREFRESH = 'mui-plus-pullrefresh';\n    var CLASS_VISIBILITY = 'mui-visibility';\n    var CLASS_HIDDEN = 'mui-hidden';\n    var CLASS_BLOCK = 'mui-block';\n\n    var CLASS_PULL_CAPTION = 'mui-pull-caption';\n    var CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\n    var CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\n    var CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\n\n    var PlusPullRefresh = $.Class.extend({\n        init: function(element, options) {\n            this.element = element;\n            this.options = options;\n            this.wrapper = this.scroller = element;\n            this._init();\n            this._initPulldownRefreshEvent();\n        },\n        _init: function() {\n            var self = this;\n            //\t\t\tdocument.addEventListener('plusscrollbottom', this);\n            window.addEventListener('dragup', self);\n            document.addEventListener(\"plusscrollbottom\", self);\n            self.scrollInterval = window.setInterval(function() {\n                if (self.isScroll && !self.loading) {\n                    if (window.pageYOffset + window.innerHeight + 10 >= document.documentElement.scrollHeight) {\n                        self.isScroll = false; //放在这里是因为快速滚动的话，有可能检测时，还没到底，所以只要有滚动，没到底之前一直检测高度变化\n                        if (self.bottomPocket) {\n                            self.pullupLoading();\n                        }\n                    }\n                }\n            }, 100);\n        },\n        _initPulldownRefreshEvent: function() {\n            var self = this;\n            if (self.topPocket && self.options.webviewId) {\n                $.plusReady(function() {\n                    var webview = plus.webview.getWebviewById(self.options.webviewId);\n                    if (!webview) {\n                        return;\n                    }\n                    self.options.webview = webview;\n                    var downOptions = self.options.down;\n                    var height = downOptions.height;\n                    webview.addEventListener(\"dragBounce\", function(e) {\n                        if (!self.pulldown) {\n                            self._initPulldownRefresh();\n                        } else {\n                            self.pullPocket.classList.add(CLASS_BLOCK);\n                        }\n                        switch (e.status) {\n                            case \"beforeChangeOffset\": //下拉可刷新状态\n                                self._setCaption(downOptions.contentdown);\n                                break;\n                            case \"afterChangeOffset\": //松开可刷新状态\n                                self._setCaption(downOptions.contentover);\n                                break;\n                            case \"dragEndAfterChangeOffset\": //正在刷新状态\n                                //执行下拉刷新所在webview的回调函数\n                                webview.evalJS(\"mui&&mui.options.pullRefresh.down.callback()\");\n                                self._setCaption(downOptions.contentrefresh);\n                                break;\n                            default:\n                                break;\n                        }\n                    }, false);\n                    webview.setBounce({\n                        position: {\n                            top: height * 2 + 'px'\n                        },\n                        changeoffset: {\n                            top: height + 'px'\n                        }\n                    });\n                });\n            }\n        },\n        handleEvent: function(e) {\n            var self = this;\n            if (self.stopped) {\n                return;\n            }\n            //5+的plusscrollbottom当页面内容较少时，不触发\n            //\t\t\tif (e.type === 'plusscrollbottom') {\n            //\t\t\t\tif (this.bottomPocket) {\n            //\t\t\t\t\tthis.pullupLoading();\n            //\t\t\t\t}\n            //\t\t\t}\n            self.isScroll = false;\n            if (e.type === 'dragup' || e.type === 'plusscrollbottom') {\n                self.isScroll = true;\n                setTimeout(function() {\n                    self.isScroll = false;\n                }, 1000);\n            }\n        }\n    }).extend($.extend({\n        setStopped: function(stopped) { //该方法是子页面调用的\n            this.stopped = !!stopped;\n            //TODO 此处需要设置当前webview的bounce为none,目前5+有BUG\n            var webview = plus.webview.currentWebview();\n            if (this.stopped) {\n                webview.setStyle({\n                    bounce: 'none'\n                });\n                webview.setBounce({\n                    position: {\n                        top: 'none'\n                    }\n                });\n            } else {\n                var height = this.options.down.height;\n                webview.setStyle({\n                    bounce: 'vertical'\n                });\n                webview.setBounce({\n                    position: {\n                        top: height * 2 + 'px'\n                    },\n                    changeoffset: {\n                        top: height + 'px'\n                    }\n                });\n            }\n        },\n        pulldownLoading: function() { //该方法是子页面调用的\n            $.plusReady(function() {\n                plus.webview.currentWebview().setBounce({\n                    offset: {\n                        top: this.options.down.height + \"px\"\n                    }\n                });\n            }.bind(this));\n        },\n        _pulldownLoading: function() { //该方法是父页面调用的\n            var self = this;\n            $.plusReady(function() {\n                var childWebview = plus.webview.getWebviewById(self.options.webviewId);\n                childWebview.setBounce({\n                    offset: {\n                        top: self.options.down.height + \"px\"\n                    }\n                });\n            });\n        },\n        endPulldownToRefresh: function() { //该方法是子页面调用的\n            var webview = plus.webview.currentWebview();\n            webview.parent().evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify({\n                webviewId: webview.id\n            }) + \"')._endPulldownToRefresh()\");\n        },\n        _endPulldownToRefresh: function() { //该方法是父页面调用的\n            var self = this;\n            if (self.topPocket && self.options.webview) {\n                self.options.webview.endPullToRefresh(); //下拉刷新所在webview回弹\n                self.loading = false;\n                self._setCaption(self.options.down.contentdown, true);\n                setTimeout(function() {\n                    self.loading || self.topPocket.classList.remove(CLASS_BLOCK);\n                }, 350);\n            }\n        },\n        pullupLoading: function(callback) {\n            var self = this;\n            if (self.isLoading) return;\n            self.isLoading = true;\n            if (self.pulldown !== false) {\n                self._initPullupRefresh();\n            } else {\n                this.pullPocket.classList.add(CLASS_BLOCK);\n            }\n            setTimeout(function() {\n                self.pullLoading.classList.add(CLASS_VISIBILITY);\n                self.pullLoading.classList.remove(CLASS_HIDDEN);\n                self.pullCaption.innerHTML = ''; //修正5+里边第一次加载时，文字显示的bug(还会显示出来个“多”,猜测应该是渲染问题导致的)\n                self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH;\n                self.pullCaption.innerHTML = self.options.up.contentrefresh;\n                callback = callback || self.options.up.callback;\n                callback && callback.call(self);\n            }, 300);\n        },\n        endPullupToRefresh: function(finished) {\n            var self = this;\n            if (self.pullLoading) {\n                self.pullLoading.classList.remove(CLASS_VISIBILITY);\n                self.pullLoading.classList.add(CLASS_HIDDEN);\n                self.isLoading = false;\n                if (finished) {\n                    self.finished = true;\n                    self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\n                    self.pullCaption.innerHTML = self.options.up.contentnomore;\n                    //\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_BLOCK);\n                    //\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\n                    //取消5+的plusscrollbottom事件\n                    document.removeEventListener('plusscrollbottom', self);\n                    window.removeEventListener('dragup', self);\n                } else { //初始化时隐藏，后续不再隐藏\n                    self.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n                    self.pullCaption.innerHTML = self.options.up.contentdown;\n                    //\t\t\t\t\tsetTimeout(function() {\n                    //\t\t\t\t\t\tself.loading || self.bottomPocket.classList.remove(CLASS_BLOCK);\n                    //\t\t\t\t\t}, 350);\n                }\n            }\n        },\n        disablePullupToRefresh: function() {\n            this._initPullupRefresh();\n            this.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\n            window.removeEventListener('dragup', this);\n        },\n        enablePullupToRefresh: function() {\n            this._initPullupRefresh();\n            this.bottomPocket.classList.remove(CLASS_HIDDEN);\n            this.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\n            this.pullCaption.innerHTML = this.options.up.contentdown;\n            document.addEventListener(\"plusscrollbottom\", this);\n            window.addEventListener('dragup', this);\n        },\n        scrollTo: function(x, y, time) {\n            $.scrollTo(y, time);\n        },\n        scrollToBottom: function(time) {\n            $.scrollTo(document.documentElement.scrollHeight, time);\n        },\n        refresh: function(isReset) {\n            if (isReset && this.finished) {\n                this.enablePullupToRefresh();\n                this.finished = false;\n            }\n        }\n    }, $.PullRefresh));\n\n    //override h5 pullRefresh\n    $.fn.pullRefresh = function(options) {\n        var self;\n        if (this.length === 0) {\n            self = document.createElement('div');\n            self.className = 'mui-content';\n            document.body.appendChild(self);\n        } else {\n            self = this[0];\n        }\n        var args = options;\n        //一个父需要支持多个子下拉刷新\n        options = options || {}\n        if (typeof options === 'string') {\n            options = $.parseJSON(options);\n        };\n        !options.webviewId && (options.webviewId = (plus.webview.currentWebview().id || plus.webview.currentWebview().getURL()));\n        var pullRefreshApi = null;\n        var attrWebviewId = options.webviewId && options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\"\n        var id = self.getAttribute('data-pullrefresh-plus-' + attrWebviewId);\n        if (!id && typeof args === 'undefined') {\n            return false;\n        }\n        if (!id) { //避免重复初始化5+ pullrefresh\n            id = ++$.uuid;\n            self.setAttribute('data-pullrefresh-plus-' + attrWebviewId, id);\n            document.body.classList.add(CLASS_PLUS_PULLREFRESH);\n            $.data[id] = pullRefreshApi = new PlusPullRefresh(self, options);\n        } else {\n            pullRefreshApi = $.data[id];\n        }\n        if (options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\n            pullRefreshApi._pulldownLoading(); //parent webview\n        } else if (options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\n            pullRefreshApi.pullupLoading();\n        }\n        return pullRefreshApi;\n    };\n})(mui, document);\n/**\n * off-canvas\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} action\n * @returns {undefined}\n */\n(function($, window, document, name) {\n    var CLASS_OFF_CANVAS_LEFT = 'mui-off-canvas-left';\n    var CLASS_OFF_CANVAS_RIGHT = 'mui-off-canvas-right';\n    var CLASS_ACTION_BACKDROP = 'mui-off-canvas-backdrop';\n    var CLASS_OFF_CANVAS_WRAP = 'mui-off-canvas-wrap';\n\n    var CLASS_SLIDE_IN = 'mui-slide-in';\n    var CLASS_ACTIVE = 'mui-active';\n\n\n    var CLASS_TRANSITIONING = 'mui-transitioning';\n\n    var SELECTOR_INNER_WRAP = '.mui-inner-wrap';\n\n\n    var OffCanvas = $.Class.extend({\n        init: function(element, options) {\n            this.wrapper = this.element = element;\n            this.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n            this.classList = this.wrapper.classList;\n            if (this.scroller) {\n                this.options = $.extend(true, {\n                    dragThresholdX: 10,\n                    scale: 0.8,\n                    opacity: 0.1,\n                    preventDefaultException: {\n                        tagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\n                    },\n                }, options);\n                document.body.classList.add('mui-fullscreen'); //fullscreen\n                this.refresh();\n                this.initEvent();\n            }\n        },\n        _preventDefaultException: function(el, exceptions) {\n            for (var i in exceptions) {\n                if (exceptions[i].test(el[i])) {\n                    return true;\n                }\n            }\n            return false;\n        },\n        refresh: function(offCanvas) {\n            //\t\t\toffCanvas && !offCanvas.classList.contains(CLASS_ACTIVE) && this.classList.remove(CLASS_ACTIVE);\n            this.slideIn = this.classList.contains(CLASS_SLIDE_IN);\n            this.scalable = this.classList.contains('mui-scalable') && !this.slideIn;\n            this.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n            //\t\t\t!offCanvas && this.scroller.classList.remove(CLASS_TRANSITIONING);\n            //\t\t\t!offCanvas && this.scroller.setAttribute('style', '');\n            this.offCanvasLefts = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_LEFT);\n            this.offCanvasRights = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_RIGHT);\n            if (offCanvas) {\n                if (offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n                    this.offCanvasLeft = offCanvas;\n                } else if (offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n                    this.offCanvasRight = offCanvas;\n                }\n            } else {\n                this.offCanvasRight = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT);\n                this.offCanvasLeft = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT);\n            }\n            this.offCanvasRightWidth = this.offCanvasLeftWidth = 0;\n            this.offCanvasLeftSlideIn = this.offCanvasRightSlideIn = false;\n            if (this.offCanvasRight) {\n                this.offCanvasRightWidth = this.offCanvasRight.offsetWidth;\n                this.offCanvasRightSlideIn = this.slideIn && (this.offCanvasRight.parentNode === this.wrapper);\n                //\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_TRANSITIONING);\n                //\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_ACTIVE);\n                //\t\t\t\tthis.offCanvasRight.setAttribute('style', '');\n            }\n            if (this.offCanvasLeft) {\n                this.offCanvasLeftWidth = this.offCanvasLeft.offsetWidth;\n                this.offCanvasLeftSlideIn = this.slideIn && (this.offCanvasLeft.parentNode === this.wrapper);\n                //\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_TRANSITIONING);\n                //\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_ACTIVE);\n                //\t\t\t\tthis.offCanvasLeft.setAttribute('style', '');\n            }\n            this.backdrop = this.scroller.querySelector('.' + CLASS_ACTION_BACKDROP);\n\n            this.options.dragThresholdX = this.options.dragThresholdX || 10;\n\n            this.visible = false;\n            this.startX = null;\n            this.lastX = null;\n            this.offsetX = null;\n            this.lastTranslateX = null;\n        },\n        handleEvent: function(e) {\n            switch (e.type) {\n                case $.EVENT_START:\n                    e.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\n                    break;\n                case 'webkitTransitionEnd': //有个bug需要处理，需要考虑假设没有触发webkitTransitionEnd的情况\n                    if (e.target === this.scroller) {\n                        this._dispatchEvent();\n                    }\n                    break;\n                case 'drag':\n                    var detail = e.detail;\n                    if (!this.startX) {\n                        this.startX = detail.center.x;\n                        this.lastX = this.startX;\n                    } else {\n                        this.lastX = detail.center.x;\n                    }\n                    if (!this.isDragging && Math.abs(this.lastX - this.startX) > this.options.dragThresholdX && (detail.direction === 'left' || (detail.direction === 'right'))) {\n                        if (this.slideIn) {\n                            this.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\n                            if (this.classList.contains(CLASS_ACTIVE)) {\n                                if (this.offCanvasRight && this.offCanvasRight.classList.contains(CLASS_ACTIVE)) {\n                                    this.offCanvas = this.offCanvasRight;\n                                    this.offCanvasWidth = this.offCanvasRightWidth;\n                                } else {\n                                    this.offCanvas = this.offCanvasLeft;\n                                    this.offCanvasWidth = this.offCanvasLeftWidth;\n                                }\n                            } else {\n                                if (detail.direction === 'left' && this.offCanvasRight) {\n                                    this.offCanvas = this.offCanvasRight;\n                                    this.offCanvasWidth = this.offCanvasRightWidth;\n                                } else if (detail.direction === 'right' && this.offCanvasLeft) {\n                                    this.offCanvas = this.offCanvasLeft;\n                                    this.offCanvasWidth = this.offCanvasLeftWidth;\n                                } else {\n                                    this.scroller = null;\n                                }\n                            }\n                        } else {\n                            if (this.classList.contains(CLASS_ACTIVE)) {\n                                if (detail.direction === 'left') {\n                                    this.offCanvas = this.offCanvasLeft;\n                                    this.offCanvasWidth = this.offCanvasLeftWidth;\n                                } else {\n                                    this.offCanvas = this.offCanvasRight;\n                                    this.offCanvasWidth = this.offCanvasRightWidth;\n                                }\n                            } else {\n                                if (detail.direction === 'right') {\n                                    this.offCanvas = this.offCanvasLeft;\n                                    this.offCanvasWidth = this.offCanvasLeftWidth;\n                                } else {\n                                    this.offCanvas = this.offCanvasRight;\n                                    this.offCanvasWidth = this.offCanvasRightWidth;\n                                }\n                            }\n                        }\n                        if (this.offCanvas && this.scroller) {\n                            this.startX = this.lastX;\n                            this.isDragging = true;\n\n                            $.gestures.session.lockDirection = true; //锁定方向\n                            $.gestures.session.startDirection = detail.direction;\n\n                            this.offCanvas.classList.remove(CLASS_TRANSITIONING);\n                            this.scroller.classList.remove(CLASS_TRANSITIONING);\n                            this.offsetX = this.getTranslateX();\n                            this._initOffCanvasVisible();\n                        }\n                    }\n                    if (this.isDragging) {\n                        this.updateTranslate(this.offsetX + (this.lastX - this.startX));\n                        detail.gesture.preventDefault();\n                        e.stopPropagation();\n                    }\n                    break;\n                case 'dragend':\n                    if (this.isDragging) {\n                        var detail = e.detail;\n                        var direction = detail.direction;\n                        this.isDragging = false;\n                        this.offCanvas.classList.add(CLASS_TRANSITIONING);\n                        this.scroller.classList.add(CLASS_TRANSITIONING);\n                        var ratio = 0;\n                        var x = this.getTranslateX();\n                        if (!this.slideIn) {\n                            if (x >= 0) {\n                                ratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\n                            } else {\n                                ratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\n                            }\n                            if (ratio === 0) {\n                                this.openPercentage(0);\n                                this._dispatchEvent(); //此处不触发webkitTransitionEnd,所以手动dispatch\n                                return;\n                            }\n                            if (direction === 'right' && ratio >= 0 && (ratio >= 0.5 || detail.swipe)) { //右滑打开\n                                this.openPercentage(100);\n                            } else if (direction === 'right' && ratio < 0 && (ratio > -0.5 || detail.swipe)) { //右滑关闭\n                                this.openPercentage(0);\n                            } else if (direction === 'right' && ratio > 0 && ratio < 0.5) { //右滑还原关闭\n                                this.openPercentage(0);\n                            } else if (direction === 'right' && ratio < 0.5) { //右滑还原打开\n                                this.openPercentage(-100);\n                            } else if (direction === 'left' && ratio <= 0 && (ratio <= -0.5 || detail.swipe)) { //左滑打开\n                                this.openPercentage(-100);\n                            } else if (direction === 'left' && ratio > 0 && (ratio <= 0.5 || detail.swipe)) { //左滑关闭\n                                this.openPercentage(0);\n                            } else if (direction === 'left' && ratio < 0 && ratio >= -0.5) { //左滑还原关闭\n                                this.openPercentage(0);\n                            } else if (direction === 'left' && ratio > 0.5) { //左滑还原打开\n                                this.openPercentage(100);\n                            } else { //默认关闭\n                                this.openPercentage(0);\n                            }\n                            if (ratio === 1 || ratio === -1) { //此处不触发webkitTransitionEnd,所以手动dispatch\n                                this._dispatchEvent();\n                            }\n                        } else {\n                            if (x >= 0) {\n                                ratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\n                            } else {\n                                ratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\n                            }\n                            if (direction === 'right' && ratio <= 0 && (ratio >= -0.5 || detail.swipe)) { //右滑打开\n                                this.openPercentage(100);\n                            } else if (direction === 'right' && ratio > 0 && (ratio >= 0.5 || detail.swipe)) { //右滑关闭\n                                this.openPercentage(0);\n                            } else if (direction === 'right' && ratio <= -0.5) { //右滑还原关闭\n                                this.openPercentage(0);\n                            } else if (direction === 'right' && ratio > 0 && ratio <= 0.5) { //右滑还原打开\n                                this.openPercentage(-100);\n                            } else if (direction === 'left' && ratio >= 0 && (ratio <= 0.5 || detail.swipe)) { //左滑打开\n                                this.openPercentage(-100);\n                            } else if (direction === 'left' && ratio < 0 && (ratio <= -0.5 || detail.swipe)) { //左滑关闭\n                                this.openPercentage(0);\n                            } else if (direction === 'left' && ratio >= 0.5) { //左滑还原关闭\n                                this.openPercentage(0);\n                            } else if (direction === 'left' && ratio >= -0.5 && ratio < 0) { //左滑还原打开\n                                this.openPercentage(100);\n                            } else {\n                                this.openPercentage(0);\n                            }\n                            if (ratio === 1 || ratio === -1 || ratio === 0) {\n                                this._dispatchEvent();\n                                return;\n                            }\n\n                        }\n                    }\n                    break;\n            }\n        },\n        _dispatchEvent: function() {\n            if (this.classList.contains(CLASS_ACTIVE)) {\n                $.trigger(this.wrapper, 'shown', this);\n            } else {\n                $.trigger(this.wrapper, 'hidden', this);\n            }\n        },\n        _initOffCanvasVisible: function() {\n            if (!this.visible) {\n                this.visible = true;\n                if (this.offCanvasLeft) {\n                    this.offCanvasLeft.style.visibility = 'visible';\n                }\n                if (this.offCanvasRight) {\n                    this.offCanvasRight.style.visibility = 'visible';\n                }\n            }\n        },\n        initEvent: function() {\n            var self = this;\n            if (self.backdrop) {\n                self.backdrop.addEventListener('tap', function(e) {\n                    self.close();\n                    e.detail.gesture.preventDefault();\n                });\n            }\n            if (this.classList.contains('mui-draggable')) {\n                this.wrapper.addEventListener($.EVENT_START, this); //临时处理\n                this.wrapper.addEventListener('drag', this);\n                this.wrapper.addEventListener('dragend', this);\n            }\n            this.wrapper.addEventListener('webkitTransitionEnd', this);\n        },\n        openPercentage: function(percentage) {\n            var p = percentage / 100;\n            if (!this.slideIn) {\n                if (this.offCanvasLeft && percentage >= 0) {\n                    this.updateTranslate(this.offCanvasLeftWidth * p);\n                    this.offCanvasLeft.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n                } else if (this.offCanvasRight && percentage <= 0) {\n                    this.updateTranslate(this.offCanvasRightWidth * p);\n                    this.offCanvasRight.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n                }\n                this.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n            } else {\n                if (this.offCanvasLeft && percentage >= 0) {\n                    p = p === 0 ? -1 : 0;\n                    this.updateTranslate(this.offCanvasLeftWidth * p);\n                    this.offCanvasLeft.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n                } else if (this.offCanvasRight && percentage <= 0) {\n                    p = p === 0 ? 1 : 0;\n                    this.updateTranslate(this.offCanvasRightWidth * p);\n                    this.offCanvasRight.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n                }\n                this.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\n            }\n        },\n        updateTranslate: function(x) {\n            if (x !== this.lastTranslateX) {\n                if (!this.slideIn) {\n                    if ((!this.offCanvasLeft && x > 0) || (!this.offCanvasRight && x < 0)) {\n                        this.setTranslateX(0);\n                        return;\n                    }\n                    if (this.leftShowing && x > this.offCanvasLeftWidth) {\n                        this.setTranslateX(this.offCanvasLeftWidth);\n                        return;\n                    }\n                    if (this.rightShowing && x < -this.offCanvasRightWidth) {\n                        this.setTranslateX(-this.offCanvasRightWidth);\n                        return;\n                    }\n                    this.setTranslateX(x);\n                    if (x >= 0) {\n                        this.leftShowing = true;\n                        this.rightShowing = false;\n                        if (x > 0) {\n                            if (this.offCanvasLeft) {\n                                $.each(this.offCanvasLefts, function(index, offCanvas) {\n                                    if (offCanvas === this.offCanvasLeft) {\n                                        this.offCanvasLeft.style.zIndex = 0;\n                                    } else {\n                                        offCanvas.style.zIndex = -1;\n                                    }\n                                }.bind(this));\n                            }\n                            if (this.offCanvasRight) {\n                                this.offCanvasRight.style.zIndex = -1;\n                            }\n                        }\n                    } else {\n                        this.rightShowing = true;\n                        this.leftShowing = false;\n                        if (this.offCanvasRight) {\n                            $.each(this.offCanvasRights, function(index, offCanvas) {\n                                if (offCanvas === this.offCanvasRight) {\n                                    offCanvas.style.zIndex = 0;\n                                } else {\n                                    offCanvas.style.zIndex = -1;\n                                }\n                            }.bind(this));\n                        }\n                        if (this.offCanvasLeft) {\n                            this.offCanvasLeft.style.zIndex = -1;\n                        }\n                    }\n                } else {\n                    if (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\n                        if (x < 0) {\n                            this.setTranslateX(0);\n                            return;\n                        }\n                        if (x > this.offCanvasRightWidth) {\n                            this.setTranslateX(this.offCanvasRightWidth);\n                            return;\n                        }\n                    } else {\n                        if (x > 0) {\n                            this.setTranslateX(0);\n                            return;\n                        }\n                        if (x < -this.offCanvasLeftWidth) {\n                            this.setTranslateX(-this.offCanvasLeftWidth);\n                            return;\n                        }\n                    }\n                    this.setTranslateX(x);\n                }\n                this.lastTranslateX = x;\n            }\n        },\n        setTranslateX: $.animationFrame(function(x) {\n            if (this.scroller) {\n                if (this.scalable && this.offCanvas.parentNode === this.wrapper) {\n                    var percent = Math.abs(x) / this.offCanvasWidth;\n                    var zoomOutScale = 1 - (1 - this.options.scale) * percent;\n                    var zoomInScale = this.options.scale + (1 - this.options.scale) * percent;\n                    var zoomOutOpacity = 1 - (1 - this.options.opacity) * percent;\n                    var zoomInOpacity = this.options.opacity + (1 - this.options.opacity) * percent;\n                    if (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\n                        this.offCanvas.style.webkitTransformOrigin = '-100%';\n                        this.scroller.style.webkitTransformOrigin = 'left';\n                    } else {\n                        this.offCanvas.style.webkitTransformOrigin = '200%';\n                        this.scroller.style.webkitTransformOrigin = 'right';\n                    }\n                    this.offCanvas.style.opacity = zoomInOpacity;\n                    this.offCanvas.style.webkitTransform = 'translate3d(0,0,0) scale(' + zoomInScale + ')';\n                    this.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0) scale(' + zoomOutScale + ')';\n                } else {\n                    if (this.slideIn) {\n                        this.offCanvas.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n                    } else {\n                        this.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\n                    }\n                }\n            }\n        }),\n        getTranslateX: function() {\n            if (this.offCanvas) {\n                var scroller = this.slideIn ? this.offCanvas : this.scroller;\n                var result = $.parseTranslateMatrix($.getStyles(scroller, 'webkitTransform'));\n                return (result && result.x) || 0;\n            }\n            return 0;\n        },\n        isShown: function(direction) {\n            var shown = false;\n            if (!this.slideIn) {\n                var x = this.getTranslateX();\n                if (direction === 'right') {\n                    shown = this.classList.contains(CLASS_ACTIVE) && x < 0;\n                } else if (direction === 'left') {\n                    shown = this.classList.contains(CLASS_ACTIVE) && x > 0;\n                } else {\n                    shown = this.classList.contains(CLASS_ACTIVE) && x !== 0;\n                }\n            } else {\n                if (direction === 'left') {\n                    shown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n                } else if (direction === 'right') {\n                    shown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE);\n                } else {\n                    shown = this.classList.contains(CLASS_ACTIVE) && (this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE));\n                }\n            }\n            return shown;\n        },\n        close: function() {\n            this._initOffCanvasVisible();\n            this.offCanvas = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\n            this.offCanvasWidth = this.offCanvas.offsetWidth;\n            if (this.scroller) {\n                this.offCanvas.offsetHeight;\n                this.offCanvas.classList.add(CLASS_TRANSITIONING);\n                this.scroller.classList.add(CLASS_TRANSITIONING);\n                this.openPercentage(0);\n            }\n        },\n        show: function(direction) {\n            this._initOffCanvasVisible();\n            if (this.isShown(direction)) {\n                return false;\n            }\n            if (!direction) {\n                direction = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT) ? 'right' : 'left';\n            }\n            if (direction === 'right') {\n                this.offCanvas = this.offCanvasRight;\n                this.offCanvasWidth = this.offCanvasRightWidth;\n            } else {\n                this.offCanvas = this.offCanvasLeft;\n                this.offCanvasWidth = this.offCanvasLeftWidth;\n            }\n            if (this.scroller) {\n                this.offCanvas.offsetHeight;\n                this.offCanvas.classList.add(CLASS_TRANSITIONING);\n                this.scroller.classList.add(CLASS_TRANSITIONING);\n                this.openPercentage(direction === 'left' ? 100 : -100);\n            }\n            return true;\n        },\n        toggle: function(directionOrOffCanvas) {\n            var direction = directionOrOffCanvas;\n            if (directionOrOffCanvas && directionOrOffCanvas.classList) {\n                direction = directionOrOffCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT) ? 'left' : 'right';\n                this.refresh(directionOrOffCanvas);\n            }\n            if (!this.show(direction)) {\n                this.close();\n            }\n        }\n    });\n\n    //hash to offcanvas\n    var findOffCanvasContainer = function(target) {\n        parentNode = target.parentNode;\n        if (parentNode) {\n            if (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n                return parentNode;\n            } else {\n                parentNode = parentNode.parentNode;\n                if (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n                    return parentNode;\n                }\n            }\n        }\n    };\n    var handle = function(event, target) {\n        if (target.tagName === 'A' && target.hash) {\n            var offcanvas = document.getElementById(target.hash.replace('#', ''));\n            if (offcanvas) {\n                var container = findOffCanvasContainer(offcanvas);\n                if (container) {\n                    $.targets._container = container;\n                    return offcanvas;\n                }\n            }\n        }\n        return false;\n    };\n\n    $.registerTarget({\n        name: name,\n        index: 60,\n        handle: handle,\n        target: false,\n        isReset: false,\n        isContinue: true\n    });\n\n    window.addEventListener('tap', function(e) {\n        if (!$.targets.offcanvas) {\n            return;\n        }\n        //TODO 此处类型的代码后续考虑统一优化(target机制)，现在的实现费力不讨好\n        var target = e.target;\n        for (; target && target !== document; target = target.parentNode) {\n            if (target.tagName === 'A' && target.hash && target.hash === ('#' + $.targets.offcanvas.id)) {\n                e.detail && e.detail.gesture && e.detail.gesture.preventDefault(); //fixed hashchange\n                $($.targets._container).offCanvas().toggle($.targets.offcanvas);\n                $.targets.offcanvas = $.targets._container = null;\n                break;\n            }\n        }\n    });\n\n    $.fn.offCanvas = function(options) {\n        var offCanvasApis = [];\n        this.each(function() {\n            var offCanvasApi = null;\n            var self = this;\n            //hack old version\n            if (!self.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\n                self = findOffCanvasContainer(self);\n            }\n            var id = self.getAttribute('data-offCanvas');\n            if (!id) {\n                id = ++$.uuid;\n                $.data[id] = offCanvasApi = new OffCanvas(self, options);\n                self.setAttribute('data-offCanvas', id);\n            } else {\n                offCanvasApi = $.data[id];\n            }\n            if (options === 'show' || options === 'close' || options === 'toggle') {\n                offCanvasApi.toggle();\n            }\n            offCanvasApis.push(offCanvasApi);\n        });\n        return offCanvasApis.length === 1 ? offCanvasApis[0] : offCanvasApis;\n    };\n    $.ready(function() {\n        $('.mui-off-canvas-wrap').offCanvas();\n    });\n})(mui, window, document, 'offcanvas');\n/**\n * actions\n * @param {type} $\n * @param {type} name\n * @returns {undefined}\n */\n(function($, name) {\n    var CLASS_ACTION = 'mui-action';\n\n    var handle = function(event, target) {\n        var className = target.className || '';\n        if (typeof className !== 'string') { //svg className(SVGAnimatedString)\n            className = '';\n        }\n        if (className && ~className.indexOf(CLASS_ACTION)) {\n            if (target.classList.contains('mui-action-back')) {\n                event.preventDefault();\n            }\n            return target;\n        }\n        return false;\n    };\n\n    $.registerTarget({\n        name: name,\n        index: 50,\n        handle: handle,\n        target: false,\n        isContinue: true\n    });\n\n})(mui, 'action');\n/**\n * Modals\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @returns {undefined}\n */\n(function($, window, document, name) {\n    var CLASS_MODAL = 'mui-modal';\n\n    var handle = function(event, target) {\n        if (target.tagName === 'A' && target.hash) {\n            var modal = document.getElementById(target.hash.replace('#', ''));\n            if (modal && modal.classList.contains(CLASS_MODAL)) {\n                return modal;\n            }\n        }\n        return false;\n    };\n\n    $.registerTarget({\n        name: name,\n        index: 50,\n        handle: handle,\n        target: false,\n        isReset: false,\n        isContinue: true\n    });\n\n    window.addEventListener('tap', function(event) {\n        if ($.targets.modal) {\n            event.detail.gesture.preventDefault(); //fixed hashchange\n            $.targets.modal.classList.toggle('mui-active');\n        }\n    });\n})(mui, window, document, 'modal');\n/**\n * Popovers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} name\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, document, name) {\n\n    var CLASS_POPOVER = 'mui-popover';\n    var CLASS_POPOVER_ARROW = 'mui-popover-arrow';\n    var CLASS_ACTION_POPOVER = 'mui-popover-action';\n    var CLASS_BACKDROP = 'mui-backdrop';\n    var CLASS_BAR_POPOVER = 'mui-bar-popover';\n    var CLASS_BAR_BACKDROP = 'mui-bar-backdrop';\n    var CLASS_ACTION_BACKDROP = 'mui-backdrop-action';\n    var CLASS_ACTIVE = 'mui-active';\n    var CLASS_BOTTOM = 'mui-bottom';\n\n\n\n    var handle = function(event, target) {\n        if (target.tagName === 'A' && target.hash) {\n            $.targets._popover = document.getElementById(target.hash.replace('#', ''));\n            if ($.targets._popover && $.targets._popover.classList.contains(CLASS_POPOVER)) {\n                return target;\n            } else {\n                $.targets._popover = null;\n            }\n        }\n        return false;\n    };\n\n    $.registerTarget({\n        name: name,\n        index: 60,\n        handle: handle,\n        target: false,\n        isReset: false,\n        isContinue: true\n    });\n\n    var fixedPopoverScroll = function(isPopoverScroll) {\n        //\t\tif (isPopoverScroll) {\n        //\t\t\tdocument.body.setAttribute('style', 'overflow:hidden;');\n        //\t\t} else {\n        //\t\t\tdocument.body.setAttribute('style', '');\n        //\t\t}\n    };\n    var onPopoverShown = function(e) {\n        this.removeEventListener('webkitTransitionEnd', onPopoverShown);\n        this.addEventListener($.EVENT_MOVE, $.preventDefault);\n        $.trigger(this, 'shown', this);\n    }\n    var onPopoverHidden = function(e) {\n        setStyle(this, 'none');\n        this.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n        this.removeEventListener($.EVENT_MOVE, $.preventDefault);\n        fixedPopoverScroll(false);\n        $.trigger(this, 'hidden', this);\n    };\n\n    var backdrop = (function() {\n        var element = document.createElement('div');\n        element.classList.add(CLASS_BACKDROP);\n        element.addEventListener($.EVENT_MOVE, $.preventDefault);\n        element.addEventListener('tap', function(e) {\n            var popover = $.targets._popover;\n            if (popover) {\n                popover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n                popover.classList.remove(CLASS_ACTIVE);\n                removeBackdrop(popover);\n                document.body.setAttribute('style', ''); //webkitTransitionEnd有时候不触发？\n            }\n        });\n\n        return element;\n    }());\n    var removeBackdropTimer;\n    var removeBackdrop = function(popover) {\n        backdrop.setAttribute('style', 'opacity:0');\n        $.targets.popover = $.targets._popover = null; //reset\n        removeBackdropTimer = $.later(function() {\n            if (!popover.classList.contains(CLASS_ACTIVE) && backdrop.parentNode && backdrop.parentNode === document.body) {\n                document.body.removeChild(backdrop);\n            }\n        }, 350);\n    };\n    window.addEventListener('tap', function(e) {\n        if (!$.targets.popover) {\n            return;\n        }\n        var toggle = false;\n        var target = e.target;\n        for (; target && target !== document; target = target.parentNode) {\n            if (target === $.targets.popover) {\n                toggle = true;\n            }\n        }\n        if (toggle) {\n            e.detail.gesture.preventDefault(); //fixed hashchange\n            togglePopover($.targets._popover, $.targets.popover);\n        }\n\n    });\n\n    var togglePopover = function(popover, anchor, state) {\n        if ((state === 'show' && popover.classList.contains(CLASS_ACTIVE)) || (state === 'hide' && !popover.classList.contains(CLASS_ACTIVE))) {\n            return;\n        }\n        removeBackdropTimer && removeBackdropTimer.cancel(); //取消remove的timer\n        //remove一遍，以免来回快速切换，导致webkitTransitionEnd不触发，无法remove\n        popover.removeEventListener('webkitTransitionEnd', onPopoverShown);\n        popover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n        backdrop.classList.remove(CLASS_BAR_BACKDROP);\n        backdrop.classList.remove(CLASS_ACTION_BACKDROP);\n        var _popover = document.querySelector('.mui-popover.mui-active');\n        if (_popover) {\n            //\t\t\t_popover.setAttribute('style', '');\n            _popover.addEventListener('webkitTransitionEnd', onPopoverHidden);\n            _popover.classList.remove(CLASS_ACTIVE);\n            //\t\t\t_popover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\n            //\t\t\tfixedPopoverScroll(false);\n            //同一个弹出则直接返回，解决同一个popover的toggle\n            if (popover === _popover) {\n                removeBackdrop(_popover);\n                return;\n            }\n        }\n        var isActionSheet = false;\n        if (popover.classList.contains(CLASS_BAR_POPOVER) || popover.classList.contains(CLASS_ACTION_POPOVER)) { //navBar\n            if (popover.classList.contains(CLASS_ACTION_POPOVER)) { //action sheet popover\n                isActionSheet = true;\n                backdrop.classList.add(CLASS_ACTION_BACKDROP);\n            } else { //bar popover\n                backdrop.classList.add(CLASS_BAR_BACKDROP);\n                //\t\t\t\tif (anchor) {\n                //\t\t\t\t\tif (anchor.parentNode) {\n                //\t\t\t\t\t\tvar offsetWidth = anchor.offsetWidth;\n                //\t\t\t\t\t\tvar offsetLeft = anchor.offsetLeft;\n                //\t\t\t\t\t\tvar innerWidth = window.innerWidth;\n                //\t\t\t\t\t\tpopover.style.left = (Math.min(Math.max(offsetLeft, defaultPadding), innerWidth - offsetWidth - defaultPadding)) + \"px\";\n                //\t\t\t\t\t} else {\n                //\t\t\t\t\t\t//TODO anchor is position:{left,top,bottom,right}\n                //\t\t\t\t\t}\n                //\t\t\t\t}\n            }\n        }\n        setStyle(popover, 'block'); //actionsheet transform\n        popover.offsetHeight;\n        popover.classList.add(CLASS_ACTIVE);\n        backdrop.setAttribute('style', '');\n        document.body.appendChild(backdrop);\n        fixedPopoverScroll(true);\n        calPosition(popover, anchor, isActionSheet); //position\n        backdrop.classList.add(CLASS_ACTIVE);\n        popover.addEventListener('webkitTransitionEnd', onPopoverShown);\n    };\n    var setStyle = function(popover, display, top, left) {\n        var style = popover.style;\n        if (typeof display !== 'undefined')\n            style.display = display;\n        if (typeof top !== 'undefined')\n            style.top = top + 'px';\n        if (typeof left !== 'undefined')\n            style.left = left + 'px';\n    };\n    var calPosition = function(popover, anchor, isActionSheet) {\n        if (!popover || !anchor) {\n            return;\n        }\n\n        if (isActionSheet) { //actionsheet\n            setStyle(popover, 'block')\n            return;\n        }\n\n        var wWidth = window.innerWidth;\n        var wHeight = window.innerHeight;\n\n        var pWidth = popover.offsetWidth;\n        var pHeight = popover.offsetHeight;\n\n        var aWidth = anchor.offsetWidth;\n        var aHeight = anchor.offsetHeight;\n        var offset = $.offset(anchor);\n\n        var arrow = popover.querySelector('.' + CLASS_POPOVER_ARROW);\n        if (!arrow) {\n            arrow = document.createElement('div');\n            arrow.className = CLASS_POPOVER_ARROW;\n            popover.appendChild(arrow);\n        }\n        var arrowSize = arrow && arrow.offsetWidth / 2 || 0;\n\n\n\n        var pTop = 0;\n        var pLeft = 0;\n        var diff = 0;\n        var arrowLeft = 0;\n        var defaultPadding = popover.classList.contains(CLASS_ACTION_POPOVER) ? 0 : 5;\n\n        var position = 'top';\n        if ((pHeight + arrowSize) < (offset.top - window.pageYOffset)) { //top\n            pTop = offset.top - pHeight - arrowSize;\n        } else if ((pHeight + arrowSize) < (wHeight - (offset.top - window.pageYOffset) - aHeight)) { //bottom\n            position = 'bottom';\n            pTop = offset.top + aHeight + arrowSize;\n        } else { //middle\n            position = 'middle';\n            pTop = Math.max((wHeight - pHeight) / 2 + window.pageYOffset, 0);\n            pLeft = Math.max((wWidth - pWidth) / 2 + window.pageXOffset, 0);\n        }\n        if (position === 'top' || position === 'bottom') {\n            pLeft = aWidth / 2 + offset.left - pWidth / 2;\n            diff = pLeft;\n            if (pLeft < defaultPadding) pLeft = defaultPadding;\n            if (pLeft + pWidth > wWidth) pLeft = wWidth - pWidth - defaultPadding;\n\n            if (arrow) {\n                if (position === 'top') {\n                    arrow.classList.add(CLASS_BOTTOM);\n                } else {\n                    arrow.classList.remove(CLASS_BOTTOM);\n                }\n                diff = diff - pLeft;\n                arrowLeft = (pWidth / 2 - arrowSize / 2 + diff);\n                arrowLeft = Math.max(Math.min(arrowLeft, pWidth - arrowSize * 2 - 6), 6);\n                arrow.setAttribute('style', 'left:' + arrowLeft + 'px');\n            }\n        } else if (position === 'middle') {\n            arrow.setAttribute('style', 'display:none');\n        }\n        setStyle(popover, 'block', pTop, pLeft);\n    };\n\n    $.createMask = function(callback) {\n        var element = document.createElement('div');\n        element.classList.add(CLASS_BACKDROP);\n        element.addEventListener($.EVENT_MOVE, $.preventDefault);\n        element.addEventListener('tap', function() {\n            mask.close();\n        });\n        var mask = [element];\n        mask._show = false;\n        mask.show = function() {\n            mask._show = true;\n            element.setAttribute('style', 'opacity:1');\n            document.body.appendChild(element);\n            return mask;\n        };\n        mask._remove = function() {\n            if (mask._show) {\n                mask._show = false;\n                element.setAttribute('style', 'opacity:0');\n                $.later(function() {\n                    var body = document.body;\n                    element.parentNode === body && body.removeChild(element);\n                }, 350);\n            }\n            return mask;\n        };\n        mask.close = function() {\n            if (callback) {\n                if (callback() !== false) {\n                    mask._remove();\n                }\n            } else {\n                mask._remove();\n            }\n        };\n        return mask;\n    };\n    $.fn.popover = function() {\n        var args = arguments;\n        this.each(function() {\n            $.targets._popover = this;\n            if (args[0] === 'show' || args[0] === 'hide' || args[0] === 'toggle') {\n                togglePopover(this, args[1], args[0]);\n            }\n        });\n    };\n\n})(mui, window, document, 'popover');\n/**\n * segmented-controllers\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @param {type} undefined\n * @returns {undefined}\n */\n(function($, window, document, name, undefined) {\n\n    var CLASS_CONTROL_ITEM = 'mui-control-item';\n    var CLASS_SEGMENTED_CONTROL = 'mui-segmented-control';\n    var CLASS_SEGMENTED_CONTROL_VERTICAL = 'mui-segmented-control-vertical';\n    var CLASS_CONTROL_CONTENT = 'mui-control-content';\n    var CLASS_TAB_BAR = 'mui-bar-tab';\n    var CLASS_TAB_ITEM = 'mui-tab-item';\n    var CLASS_SLIDER_ITEM = 'mui-slider-item';\n\n    var handle = function(event, target) {\n        if (target.classList && (target.classList.contains(CLASS_CONTROL_ITEM) || target.classList.contains(CLASS_TAB_ITEM))) {\n            if (target.parentNode && target.parentNode.classList && target.parentNode.classList.contains(CLASS_SEGMENTED_CONTROL_VERTICAL)) {\n                //vertical 如果preventDefault会导致无法滚动\n            } else {\n                event.preventDefault(); //stop hash change\t\t\t\t\n            }\n            //\t\t\tif (target.hash) {\n            return target;\n            //\t\t\t}\n        }\n        return false;\n    };\n\n    $.registerTarget({\n        name: name,\n        index: 80,\n        handle: handle,\n        target: false\n    });\n\n    window.addEventListener('tap', function(e) {\n\n        var targetTab = $.targets.tab;\n        if (!targetTab) {\n            return;\n        }\n        var activeTab;\n        var activeBodies;\n        var targetBody;\n        var className = 'mui-active';\n        var classSelector = '.' + className;\n        var segmentedControl = targetTab.parentNode;\n\n        for (; segmentedControl && segmentedControl !== document; segmentedControl = segmentedControl.parentNode) {\n            if (segmentedControl.classList.contains(CLASS_SEGMENTED_CONTROL)) {\n                activeTab = segmentedControl.querySelector(classSelector + '.' + CLASS_CONTROL_ITEM);\n                break;\n            } else if (segmentedControl.classList.contains(CLASS_TAB_BAR)) {\n                activeTab = segmentedControl.querySelector(classSelector + '.' + CLASS_TAB_ITEM);\n            }\n        }\n\n        if (activeTab) {\n            activeTab.classList.remove(className);\n        }\n\n        var isLastActive = targetTab === activeTab;\n        if (targetTab) {\n            targetTab.classList.add(className);\n        }\n\n        if (!targetTab.hash) {\n            return;\n        }\n        targetBody = document.getElementById(targetTab.hash.replace('#', ''));\n\n        if (!targetBody) {\n            return;\n        }\n        if (!targetBody.classList.contains(CLASS_CONTROL_CONTENT)) { //tab bar popover\n            targetTab.classList[isLastActive ? 'remove' : 'add'](className);\n            return;\n        }\n        if (isLastActive) { //same\n            return;\n        }\n        var parentNode = targetBody.parentNode;\n        activeBodies = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT + classSelector);\n        for (var i = 0; i < activeBodies.length; i++) {\n            var activeBody = activeBodies[i];\n            activeBody.parentNode === parentNode && activeBody.classList.remove(className);\n        }\n\n        targetBody.classList.add(className);\n\n        var contents = [];\n        var _contents = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT);\n        for (var i = 0; i < _contents.length; i++) { //查找直属子节点\n            _contents[i].parentNode === parentNode && (contents.push(_contents[i]));\n        }\n        $.trigger(targetBody, $.eventName('shown', name), {\n            tabNumber: Array.prototype.indexOf.call(contents, targetBody)\n        });\n        e.detail && e.detail.gesture.preventDefault(); //fixed hashchange\n    });\n\n})(mui, window, document, 'tab');\n/**\n * Toggles switch\n * @param {type} $\n * @param {type} window\n * @param {type} name\n * @returns {undefined}\n */\n(function($, window, name) {\n\n    var CLASS_SWITCH = 'mui-switch';\n    var CLASS_SWITCH_HANDLE = 'mui-switch-handle';\n    var CLASS_ACTIVE = 'mui-active';\n    var CLASS_DRAGGING = 'mui-dragging';\n\n    var CLASS_DISABLED = 'mui-disabled';\n\n    var SELECTOR_SWITCH_HANDLE = '.' + CLASS_SWITCH_HANDLE;\n\n    var handle = function(event, target) {\n        if (target.classList && target.classList.contains(CLASS_SWITCH)) {\n            return target;\n        }\n        return false;\n    };\n\n    $.registerTarget({\n        name: name,\n        index: 100,\n        handle: handle,\n        target: false\n    });\n\n\n    var Toggle = function(element) {\n        this.element = element;\n        this.classList = this.element.classList;\n        this.handle = this.element.querySelector(SELECTOR_SWITCH_HANDLE);\n        this.init();\n        this.initEvent();\n    };\n    Toggle.prototype.init = function() {\n        this.toggleWidth = this.element.offsetWidth;\n        this.handleWidth = this.handle.offsetWidth;\n        this.handleX = this.toggleWidth - this.handleWidth - 3;\n    };\n    Toggle.prototype.initEvent = function() {\n        this.element.addEventListener($.EVENT_START, this);\n        this.element.addEventListener('drag', this);\n        this.element.addEventListener('swiperight', this);\n        this.element.addEventListener($.EVENT_END, this);\n        this.element.addEventListener($.EVENT_CANCEL, this);\n\n    };\n    Toggle.prototype.handleEvent = function(e) {\n        if (this.classList.contains(CLASS_DISABLED)) {\n            return;\n        }\n        switch (e.type) {\n            case $.EVENT_START:\n                this.start(e);\n                break;\n            case 'drag':\n                this.drag(e);\n                break;\n            case 'swiperight':\n                this.swiperight();\n                break;\n            case $.EVENT_END:\n            case $.EVENT_CANCEL:\n                this.end(e);\n                break;\n        }\n    };\n    Toggle.prototype.start = function(e) {\n        this.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n        this.classList.add(CLASS_DRAGGING);\n        if (this.toggleWidth === 0 || this.handleWidth === 0) { //当switch处于隐藏状态时，width为0，需要重新初始化\n            this.init();\n        }\n    };\n    Toggle.prototype.drag = function(e) {\n        var detail = e.detail;\n        if (!this.isDragging) {\n            if (detail.direction === 'left' || detail.direction === 'right') {\n                this.isDragging = true;\n                this.lastChanged = undefined;\n                this.initialState = this.classList.contains(CLASS_ACTIVE);\n            }\n        }\n        if (this.isDragging) {\n            this.setTranslateX(detail.deltaX);\n            e.stopPropagation();\n            detail.gesture.preventDefault();\n        }\n    };\n    Toggle.prototype.swiperight = function(e) {\n        if (this.isDragging) {\n            e.stopPropagation();\n        }\n    };\n    Toggle.prototype.end = function(e) {\n        this.classList.remove(CLASS_DRAGGING);\n        if (this.isDragging) {\n            this.isDragging = false;\n            e.stopPropagation();\n            $.trigger(this.element, 'toggle', {\n                isActive: this.classList.contains(CLASS_ACTIVE)\n            });\n        } else {\n            this.toggle();\n        }\n    };\n    Toggle.prototype.toggle = function(animate) {\n        var classList = this.classList;\n        if (animate === false) {\n            this.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '0s';\n        } else {\n            this.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\n        }\n        if (classList.contains(CLASS_ACTIVE)) {\n            classList.remove(CLASS_ACTIVE);\n            this.handle.style.webkitTransform = 'translate(0,0)';\n        } else {\n            classList.add(CLASS_ACTIVE);\n            this.handle.style.webkitTransform = 'translate(' + this.handleX + 'px,0)';\n        }\n        $.trigger(this.element, 'toggle', {\n            isActive: this.classList.contains(CLASS_ACTIVE)\n        });\n    };\n    Toggle.prototype.setTranslateX = $.animationFrame(function(x) {\n        if (!this.isDragging) {\n            return;\n        }\n        var isChanged = false;\n        if ((this.initialState && -x > (this.handleX / 2)) || (!this.initialState && x > (this.handleX / 2))) {\n            isChanged = true;\n        }\n        if (this.lastChanged !== isChanged) {\n            if (isChanged) {\n                this.handle.style.webkitTransform = 'translate(' + (this.initialState ? 0 : this.handleX) + 'px,0)';\n                this.classList[this.initialState ? 'remove' : 'add'](CLASS_ACTIVE);\n            } else {\n                this.handle.style.webkitTransform = 'translate(' + (this.initialState ? this.handleX : 0) + 'px,0)';\n                this.classList[this.initialState ? 'add' : 'remove'](CLASS_ACTIVE);\n            }\n            this.lastChanged = isChanged;\n        }\n\n    });\n\n    $.fn['switch'] = function(options) {\n        var switchApis = [];\n        this.each(function() {\n            var switchApi = null;\n            var id = this.getAttribute('data-switch');\n            if (!id) {\n                id = ++$.uuid;\n                $.data[id] = new Toggle(this);\n                this.setAttribute('data-switch', id);\n            } else {\n                switchApi = $.data[id];\n            }\n            switchApis.push(switchApi);\n        });\n        return switchApis.length > 1 ? switchApis : switchApis[0];\n    };\n    $.ready(function() {\n        $('.' + CLASS_SWITCH)['switch']();\n    });\n})(mui, window, 'toggle');\n/**\n * Tableviews\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n\n    var CLASS_ACTIVE = 'mui-active';\n    var CLASS_SELECTED = 'mui-selected';\n    var CLASS_GRID_VIEW = 'mui-grid-view';\n    var CLASS_RADIO_VIEW = 'mui-table-view-radio';\n    var CLASS_TABLE_VIEW_CELL = 'mui-table-view-cell';\n    var CLASS_COLLAPSE_CONTENT = 'mui-collapse-content';\n    var CLASS_DISABLED = 'mui-disabled';\n    var CLASS_TOGGLE = 'mui-switch';\n    var CLASS_BTN = 'mui-btn';\n\n    var CLASS_SLIDER_HANDLE = 'mui-slider-handle';\n    var CLASS_SLIDER_LEFT = 'mui-slider-left';\n    var CLASS_SLIDER_RIGHT = 'mui-slider-right';\n    var CLASS_TRANSITIONING = 'mui-transitioning';\n\n\n    var SELECTOR_SLIDER_HANDLE = '.' + CLASS_SLIDER_HANDLE;\n    var SELECTOR_SLIDER_LEFT = '.' + CLASS_SLIDER_LEFT;\n    var SELECTOR_SLIDER_RIGHT = '.' + CLASS_SLIDER_RIGHT;\n    var SELECTOR_SELECTED = '.' + CLASS_SELECTED;\n    var SELECTOR_BUTTON = '.' + CLASS_BTN;\n    var overFactor = 0.8;\n    var cell, a;\n\n    var isMoved = isOpened = openedActions = progress = false;\n    var sliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n    var timer = translateX = lastTranslateX = sliderActionLeftWidth = sliderActionRightWidth = 0;\n\n\n\n    var toggleActive = function(isActive) {\n        if (isActive) {\n            if (a) {\n                a.classList.add(CLASS_ACTIVE);\n            } else if (cell) {\n                cell.classList.add(CLASS_ACTIVE);\n            }\n        } else {\n            timer && timer.cancel();\n            if (a) {\n                a.classList.remove(CLASS_ACTIVE);\n            } else if (cell) {\n                cell.classList.remove(CLASS_ACTIVE);\n            }\n        }\n    };\n\n    var updateTranslate = function() {\n        if (translateX !== lastTranslateX) {\n            if (buttonsRight && buttonsRight.length > 0) {\n                progress = translateX / sliderActionRightWidth;\n                if (translateX < -sliderActionRightWidth) {\n                    translateX = -sliderActionRightWidth - Math.pow(-translateX - sliderActionRightWidth, overFactor);\n                }\n                for (var i = 0, len = buttonsRight.length; i < len; i++) {\n                    var buttonRight = buttonsRight[i];\n                    if (typeof buttonRight._buttonOffset === 'undefined') {\n                        buttonRight._buttonOffset = buttonRight.offsetLeft;\n                    }\n                    buttonOffset = buttonRight._buttonOffset;\n                    setTranslate(buttonRight, (translateX - buttonOffset * (1 + Math.max(progress, -1))));\n                }\n            }\n            if (buttonsLeft && buttonsLeft.length > 0) {\n                progress = translateX / sliderActionLeftWidth;\n                if (translateX > sliderActionLeftWidth) {\n                    translateX = sliderActionLeftWidth + Math.pow(translateX - sliderActionLeftWidth, overFactor);\n                }\n                for (var i = 0, len = buttonsLeft.length; i < len; i++) {\n                    var buttonLeft = buttonsLeft[i];\n                    if (typeof buttonLeft._buttonOffset === 'undefined') {\n                        buttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n                    }\n                    buttonOffset = buttonLeft._buttonOffset;\n                    if (buttonsLeft.length > 1) {\n                        buttonLeft.style.zIndex = buttonsLeft.length - i;\n                    }\n                    setTranslate(buttonLeft, (translateX + buttonOffset * (1 - Math.min(progress, 1))));\n                }\n            }\n            setTranslate(sliderHandle, translateX);\n            lastTranslateX = translateX;\n        }\n        sliderRequestAnimationFrame = requestAnimationFrame(function() {\n            updateTranslate();\n        });\n    };\n    var setTranslate = function(element, x) {\n        if (element) {\n            element.style.webkitTransform = 'translate(' + x + 'px,0)';\n        }\n    };\n\n    window.addEventListener($.EVENT_START, function(event) {\n        if (cell) {\n            toggleActive(false);\n        }\n        cell = a = false;\n        isMoved = isOpened = openedActions = false;\n        var target = event.target;\n        var isDisabled = false;\n        for (; target && target !== document; target = target.parentNode) {\n            if (target.classList) {\n                var classList = target.classList;\n                if ((target.tagName === 'INPUT' && target.type !== 'radio' && target.type !== 'checkbox') || target.tagName === 'BUTTON' || classList.contains(CLASS_TOGGLE) || classList.contains(CLASS_BTN) || classList.contains(CLASS_DISABLED)) {\n                    isDisabled = true;\n                }\n                if (classList.contains(CLASS_COLLAPSE_CONTENT)) { //collapse content\n                    break;\n                }\n                if (classList.contains(CLASS_TABLE_VIEW_CELL)) {\n                    cell = target;\n                    //TODO swipe to delete close\n                    var selected = cell.parentNode.querySelector(SELECTOR_SELECTED);\n                    if (!cell.parentNode.classList.contains(CLASS_RADIO_VIEW) && selected && selected !== cell) {\n                        $.swipeoutClose(selected);\n                        cell = isDisabled = false;\n                        return;\n                    }\n                    if (!cell.parentNode.classList.contains(CLASS_GRID_VIEW)) {\n                        var link = cell.querySelector('a');\n                        if (link && link.parentNode === cell) { //li>a\n                            a = link;\n                        }\n                    }\n                    var handle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n                    if (handle) {\n                        toggleEvents(cell);\n                        event.stopPropagation();\n                    }\n                    if (!isDisabled) {\n                        if (handle) {\n                            if (timer) {\n                                timer.cancel();\n                            }\n                            timer = $.later(function() {\n                                toggleActive(true);\n                            }, 100);\n                        } else {\n                            toggleActive(true);\n                        }\n                    }\n                    break;\n                }\n            }\n        }\n    });\n    window.addEventListener($.EVENT_MOVE, function(event) {\n        toggleActive(false);\n    });\n\n    var handleEvent = {\n        handleEvent: function(event) {\n            switch (event.type) {\n                case 'drag':\n                    this.drag(event);\n                    break;\n                case 'dragend':\n                    this.dragend(event);\n                    break;\n                case 'flick':\n                    this.flick(event);\n                    break;\n                case 'swiperight':\n                    this.swiperight(event);\n                    break;\n                case 'swipeleft':\n                    this.swipeleft(event);\n                    break;\n            }\n        },\n        drag: function(event) {\n            if (!cell) {\n                return;\n            }\n            if (!isMoved) { //init\n                sliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\n                sliderHandle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\n                if (sliderHandle) {\n                    sliderActionLeft = cell.querySelector(SELECTOR_SLIDER_LEFT);\n                    sliderActionRight = cell.querySelector(SELECTOR_SLIDER_RIGHT);\n                    if (sliderActionLeft) {\n                        sliderActionLeftWidth = sliderActionLeft.offsetWidth;\n                        buttonsLeft = sliderActionLeft.querySelectorAll(SELECTOR_BUTTON);\n                    }\n                    if (sliderActionRight) {\n                        sliderActionRightWidth = sliderActionRight.offsetWidth;\n                        buttonsRight = sliderActionRight.querySelectorAll(SELECTOR_BUTTON);\n                    }\n                    cell.classList.remove(CLASS_TRANSITIONING);\n                    isOpened = cell.classList.contains(CLASS_SELECTED);\n                    if (isOpened) {\n                        openedActions = cell.querySelector(SELECTOR_SLIDER_LEFT + SELECTOR_SELECTED) ? 'left' : 'right';\n                    }\n                }\n            }\n            var detail = event.detail;\n            var direction = detail.direction;\n            var angle = detail.angle;\n            if (direction === 'left' && (angle > 150 || angle < -150)) {\n                if (buttonsRight || (buttonsLeft && isOpened)) { //存在右侧按钮或存在左侧按钮且是已打开状态\n                    isMoved = true;\n                }\n            } else if (direction === 'right' && (angle > -30 && angle < 30)) {\n                if (buttonsLeft || (buttonsRight && isOpened)) { //存在左侧按钮或存在右侧按钮且是已打开状态\n                    isMoved = true;\n                }\n            }\n            if (isMoved) {\n                event.stopPropagation();\n                event.detail.gesture.preventDefault();\n                var translate = event.detail.deltaX;\n                if (isOpened) {\n                    if (openedActions === 'right') {\n                        translate = translate - sliderActionRightWidth;\n                    } else {\n                        translate = translate + sliderActionLeftWidth;\n                    }\n                }\n                if ((translate > 0 && !buttonsLeft) || (translate < 0 && !buttonsRight)) {\n                    if (!isOpened) {\n                        return;\n                    }\n                    translate = 0;\n                }\n                if (translate < 0) {\n                    sliderDirection = 'toLeft';\n                } else if (translate > 0) {\n                    sliderDirection = 'toRight';\n                } else {\n                    if (!sliderDirection) {\n                        sliderDirection = 'toLeft';\n                    }\n                }\n                if (!sliderRequestAnimationFrame) {\n                    updateTranslate();\n                }\n                translateX = translate;\n            }\n        },\n        flick: function(event) {\n            if (isMoved) {\n                event.stopPropagation();\n            }\n        },\n        swipeleft: function(event) {\n            if (isMoved) {\n                event.stopPropagation();\n            }\n        },\n        swiperight: function(event) {\n            if (isMoved) {\n                event.stopPropagation();\n            }\n        },\n        dragend: function(event) {\n            if (!isMoved) {\n                return;\n            }\n            event.stopPropagation();\n            if (sliderRequestAnimationFrame) {\n                cancelAnimationFrame(sliderRequestAnimationFrame);\n                sliderRequestAnimationFrame = null;\n            }\n            var detail = event.detail;\n            isMoved = false;\n            var action = 'close';\n            var actionsWidth = sliderDirection === 'toLeft' ? sliderActionRightWidth : sliderActionLeftWidth;\n            var isToggle = detail.swipe || (Math.abs(translateX) > actionsWidth / 2);\n            if (isToggle) {\n                if (!isOpened) {\n                    action = 'open';\n                } else if (detail.direction === 'left' && openedActions === 'right') {\n                    action = 'open';\n                } else if (detail.direction === 'right' && openedActions === 'left') {\n                    action = 'open';\n                }\n\n            }\n            cell.classList.add(CLASS_TRANSITIONING);\n            var buttons;\n            if (action === 'open') {\n                var newTranslate = sliderDirection === 'toLeft' ? -actionsWidth : actionsWidth;\n                setTranslate(sliderHandle, newTranslate);\n                buttons = sliderDirection === 'toLeft' ? buttonsRight : buttonsLeft;\n                if (typeof buttons !== 'undefined') {\n                    var button = null;\n                    for (var i = 0; i < buttons.length; i++) {\n                        button = buttons[i];\n                        setTranslate(button, newTranslate);\n                    }\n                    button.parentNode.classList.add(CLASS_SELECTED);\n                    cell.classList.add(CLASS_SELECTED);\n                    if (!isOpened) {\n                        $.trigger(cell, sliderDirection === 'toLeft' ? 'slideleft' : 'slideright');\n                    }\n                }\n            } else {\n                setTranslate(sliderHandle, 0);\n                sliderActionLeft && sliderActionLeft.classList.remove(CLASS_SELECTED);\n                sliderActionRight && sliderActionRight.classList.remove(CLASS_SELECTED);\n                cell.classList.remove(CLASS_SELECTED);\n            }\n            var buttonOffset;\n            if (buttonsLeft && buttonsLeft.length > 0 && buttonsLeft !== buttons) {\n                for (var i = 0, len = buttonsLeft.length; i < len; i++) {\n                    var buttonLeft = buttonsLeft[i];\n                    buttonOffset = buttonLeft._buttonOffset;\n                    if (typeof buttonOffset === 'undefined') {\n                        buttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\n                    }\n                    setTranslate(buttonLeft, buttonOffset);\n                }\n            }\n            if (buttonsRight && buttonsRight.length > 0 && buttonsRight !== buttons) {\n                for (var i = 0, len = buttonsRight.length; i < len; i++) {\n                    var buttonRight = buttonsRight[i];\n                    buttonOffset = buttonRight._buttonOffset;\n                    if (typeof buttonOffset === 'undefined') {\n                        buttonRight._buttonOffset = buttonRight.offsetLeft;\n                    }\n                    setTranslate(buttonRight, -buttonOffset);\n                }\n            }\n        }\n    };\n\n    function toggleEvents(element, isRemove) {\n        var method = !!isRemove ? 'removeEventListener' : 'addEventListener';\n        element[method]('drag', handleEvent);\n        element[method]('dragend', handleEvent);\n        element[method]('swiperight', handleEvent);\n        element[method]('swipeleft', handleEvent);\n        element[method]('flick', handleEvent);\n    };\n    /**\n     * 打开滑动菜单\n     * @param {Object} el\n     * @param {Object} direction\n     */\n    $.swipeoutOpen = function(el, direction) {\n        if (!el) return;\n        var classList = el.classList;\n        if (classList.contains(CLASS_SELECTED)) return;\n        if (!direction) {\n            if (el.querySelector(SELECTOR_SLIDER_RIGHT)) {\n                direction = 'right';\n            } else {\n                direction = 'left';\n            }\n        }\n        var swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n        if (!swipeoutAction) return;\n        swipeoutAction.classList.add(CLASS_SELECTED);\n        classList.add(CLASS_SELECTED);\n        classList.remove(CLASS_TRANSITIONING);\n        var buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n        var swipeoutWidth = swipeoutAction.offsetWidth;\n        var translate = (direction === 'right') ? -swipeoutWidth : swipeoutWidth;\n        var length = buttons.length;\n        var button;\n        for (var i = 0; i < length; i++) {\n            button = buttons[i];\n            if (direction === 'right') {\n                setTranslate(button, -button.offsetLeft);\n            } else {\n                setTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\n            }\n        }\n        classList.add(CLASS_TRANSITIONING);\n        for (var i = 0; i < length; i++) {\n            setTranslate(buttons[i], translate);\n        }\n        setTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), translate);\n    };\n    /**\n     * 关闭滑动菜单\n     * @param {Object} el\n     */\n    $.swipeoutClose = function(el) {\n        if (!el) return;\n        var classList = el.classList;\n        if (!classList.contains(CLASS_SELECTED)) return;\n        var direction = el.querySelector(SELECTOR_SLIDER_RIGHT + SELECTOR_SELECTED) ? 'right' : 'left';\n        var swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\n        if (!swipeoutAction) return;\n        swipeoutAction.classList.remove(CLASS_SELECTED);\n        classList.remove(CLASS_SELECTED);\n        classList.add(CLASS_TRANSITIONING);\n        var buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\n        var swipeoutWidth = swipeoutAction.offsetWidth;\n        var length = buttons.length;\n        var button;\n        setTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), 0);\n        for (var i = 0; i < length; i++) {\n            button = buttons[i];\n            if (direction === 'right') {\n                setTranslate(button, (-button.offsetLeft));\n            } else {\n                setTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\n            }\n        }\n    };\n\n    window.addEventListener($.EVENT_END, function(event) { //使用touchend来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n        if (!cell) {\n            return;\n        }\n        toggleActive(false);\n        sliderHandle && toggleEvents(cell, true);\n    });\n    window.addEventListener($.EVENT_CANCEL, function(event) { //使用touchcancel来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\n        if (!cell) {\n            return;\n        }\n        toggleActive(false);\n        sliderHandle && toggleEvents(cell, true);\n    });\n    var radioOrCheckboxClick = function(event) {\n        var type = event.target && event.target.type || '';\n        if (type === 'radio' || type === 'checkbox') {\n            return;\n        }\n        var classList = cell.classList;\n        if (classList.contains('mui-radio')) {\n            var input = cell.querySelector('input[type=radio]');\n            if (input) {\n                //\t\t\t\tinput.click();\n                if (!input.disabled && !input.readOnly) {\n                    input.checked = !input.checked;\n                    $.trigger(input, 'change');\n                }\n            }\n        } else if (classList.contains('mui-checkbox')) {\n            var input = cell.querySelector('input[type=checkbox]');\n            if (input) {\n                //\t\t\t\tinput.click();\n                if (!input.disabled && !input.readOnly) {\n                    input.checked = !input.checked;\n                    $.trigger(input, 'change');\n                }\n            }\n        }\n    };\n    //fixed hashchange(android)\n    window.addEventListener($.EVENT_CLICK, function(e) {\n        if (cell && cell.classList.contains('mui-collapse')) {\n            e.preventDefault();\n        }\n    });\n    window.addEventListener('doubletap', function(event) {\n        if (cell) {\n            radioOrCheckboxClick(event);\n        }\n    });\n    var preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\n    window.addEventListener('tap', function(event) {\n        if (!cell) {\n            return;\n        }\n        var isExpand = false;\n        var classList = cell.classList;\n        var ul = cell.parentNode;\n        if (ul && ul.classList.contains(CLASS_RADIO_VIEW)) {\n            if (classList.contains(CLASS_SELECTED)) {\n                return;\n            }\n            var selected = ul.querySelector('li' + SELECTOR_SELECTED);\n            if (selected) {\n                selected.classList.remove(CLASS_SELECTED);\n            }\n            classList.add(CLASS_SELECTED);\n            $.trigger(cell, 'selected', {\n                el: cell\n            });\n            return;\n        }\n        if (classList.contains('mui-collapse') && !cell.parentNode.classList.contains('mui-unfold')) {\n            if (!preventDefaultException.test(event.target.tagName)) {\n                event.detail.gesture.preventDefault();\n            }\n\n            if (!classList.contains(CLASS_ACTIVE)) { //展开时,需要收缩其他同类\n                var collapse = cell.parentNode.querySelector('.mui-collapse.mui-active');\n                if (collapse) {\n                    collapse.classList.remove(CLASS_ACTIVE);\n                }\n                isExpand = true;\n            }\n            classList.toggle(CLASS_ACTIVE);\n            if (isExpand) {\n                //触发展开事件\n                $.trigger(cell, 'expand');\n\n                //scroll\n                //暂不滚动\n                // var offsetTop = $.offset(cell).top;\n                // var scrollTop = document.body.scrollTop;\n                // var height = window.innerHeight;\n                // var offsetHeight = cell.offsetHeight;\n                // var cellHeight = (offsetTop - scrollTop + offsetHeight);\n                // if (offsetHeight > height) {\n                // \t$.scrollTo(offsetTop, 300);\n                // } else if (cellHeight > height) {\n                // \t$.scrollTo(cellHeight - height + scrollTop, 300);\n                // }\n            }\n        } else {\n            radioOrCheckboxClick(event);\n        }\n    });\n})(mui, window, document);\n(function($, window) {\n    /**\n     * 警告消息框\n     */\n    $.alert = function(message, title, btnValue, callback) {\n        if ($.os.plus) {\n            if (typeof message === 'undefined') {\n                return;\n            } else {\n                if (typeof title === 'function') {\n                    callback = title;\n                    title = null;\n                    btnValue = '确定';\n                } else if (typeof btnValue === 'function') {\n                    callback = btnValue;\n                    btnValue = null;\n                }\n                $.plusReady(function() {\n                    plus.nativeUI.alert(message, callback, title, btnValue);\n                });\n            }\n\n        } else {\n            //TODO H5版本\n            window.alert(message);\n        }\n    };\n\n})(mui, window);\n(function($, window) {\n    /**\n     * 确认消息框\n     */\n    $.confirm = function(message, title, btnArray, callback) {\n        if ($.os.plus) {\n            if (typeof message === 'undefined') {\n                return;\n            } else {\n                if (typeof title === 'function') {\n                    callback = title;\n                    title = null;\n                    btnArray = null;\n                } else if (typeof btnArray === 'function') {\n                    callback = btnArray;\n                    btnArray = null;\n                }\n                $.plusReady(function() {\n                    plus.nativeUI.confirm(message, callback, title, btnArray);\n                });\n            }\n\n        } else {\n            //H5版本，0为确认，1为取消\n            if (window.confirm(message)) {\n                callback({\n                    index: 0\n                });\n            } else {\n                callback({\n                    index: 1\n                });\n            }\n        }\n    };\n\n})(mui, window);\n(function($, window) {\n    /**\n     * 输入对话框\n     */\n    $.prompt = function(text, defaultText, title, btnArray, callback) {\n        if ($.os.plus) {\n            if (typeof message === 'undefined') {\n                return;\n            } else {\n\n                if (typeof defaultText === 'function') {\n                    callback = defaultText;\n                    defaultText = null;\n                    title = null;\n                    btnArray = null;\n                } else if (typeof title === 'function') {\n                    callback = title;\n                    title = null;\n                    btnArray = null;\n                } else if (typeof btnArray === 'function') {\n                    callback = btnArray;\n                    btnArray = null;\n                }\n                $.plusReady(function() {\n                    plus.nativeUI.prompt(text, callback, title, defaultText, btnArray);\n                });\n            }\n\n        } else {\n            //H5版本(确认index为0，取消index为1)\n            var result = window.prompt(text);\n            if (result) {\n                callback({\n                    index: 0,\n                    value: result\n                });\n            } else {\n                callback({\n                    index: 1,\n                    value: ''\n                });\n            }\n        }\n    };\n\n})(mui, window);\n(function($, window) {\n    var CLASS_ACTIVE = 'mui-active';\n    /**\n     * 自动消失提示框\n     */\n    $.toast = function(message) {\n        if ($.os.plus) {\n            //默认显示在底部；\n            $.plusReady(function() {\n                plus.nativeUI.toast(message, {\n                    verticalAlign: 'bottom'\n                });\n            });\n        } else {\n            var toast = document.createElement('div');\n            toast.classList.add('mui-toast-container');\n            toast.innerHTML = '<div class=\"' + 'mui-toast-message' + '\">' + message + '</div>';\n            toast.addEventListener('webkitTransitionEnd', function() {\n                if (!toast.classList.contains(CLASS_ACTIVE)) {\n                    toast.parentNode.removeChild(toast);\n                }\n            });\n            document.body.appendChild(toast);\n            toast.offsetHeight;\n            toast.classList.add(CLASS_ACTIVE);\n            setTimeout(function() {\n                toast.classList.remove(CLASS_ACTIVE);\n            }, 2000);\n        }\n    };\n\n})(mui, window);\n/**\n * Popup(alert,confirm,prompt)  \n * @param {Object} $\n * @param {Object} window\n * @param {Object} document\n */\n(function($, window, document) {\n    var CLASS_POPUP = 'mui-popup';\n    var CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n    var CLASS_POPUP_IN = 'mui-popup-in';\n    var CLASS_POPUP_OUT = 'mui-popup-out';\n    var CLASS_POPUP_INNER = 'mui-popup-inner';\n    var CLASS_POPUP_TITLE = 'mui-popup-title';\n    var CLASS_POPUP_TEXT = 'mui-popup-text';\n    var CLASS_POPUP_INPUT = 'mui-popup-input';\n    var CLASS_POPUP_BUTTONS = 'mui-popup-buttons';\n    var CLASS_POPUP_BUTTON = 'mui-popup-button';\n    var CLASS_POPUP_BUTTON_BOLD = 'mui-popup-button-bold';\n    var CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\n    var CLASS_ACTIVE = 'mui-active';\n\n    var popupStack = [];\n    var backdrop = (function() {\n        var element = document.createElement('div');\n        element.classList.add(CLASS_POPUP_BACKDROP);\n        element.addEventListener($.EVENT_MOVE, $.preventDefault);\n        element.addEventListener('webkitTransitionEnd', function() {\n            if (!this.classList.contains(CLASS_ACTIVE)) {\n                element.parentNode && element.parentNode.removeChild(element);\n            }\n        });\n        return element;\n    }());\n\n    var createInput = function(placeholder) {\n        return '<div class=\"' + CLASS_POPUP_INPUT + '\"><input type=\"text\" autofocus placeholder=\"' + (placeholder || '') + '\"/></div>';\n    };\n    var createInner = function(message, title, extra) {\n        return '<div class=\"' + CLASS_POPUP_INNER + '\"><div class=\"' + CLASS_POPUP_TITLE + '\">' + title + '</div><div class=\"' + CLASS_POPUP_TEXT + '\">' + message.replace(/\\r\\n/g, \"<br/>\").replace(/\\n/g, \"<br/>\") + '</div>' + (extra || '') + '</div>';\n    };\n    var createButtons = function(btnArray) {\n        var length = btnArray.length;\n        var btns = [];\n        for (var i = 0; i < length; i++) {\n            btns.push('<span class=\"' + CLASS_POPUP_BUTTON + (i === length - 1 ? (' ' + CLASS_POPUP_BUTTON_BOLD) : '') + '\">' + btnArray[i] + '</span>');\n        }\n        return '<div class=\"' + CLASS_POPUP_BUTTONS + '\">' + btns.join('') + '</div>';\n    };\n\n    var createPopup = function(html, callback) {\n        var popupElement = document.createElement('div');\n        popupElement.className = CLASS_POPUP;\n        popupElement.innerHTML = html;\n        var removePopupElement = function() {\n            popupElement.parentNode && popupElement.parentNode.removeChild(popupElement);\n            popupElement = null;\n        };\n        popupElement.addEventListener($.EVENT_MOVE, $.preventDefault);\n        popupElement.addEventListener('webkitTransitionEnd', function(e) {\n            if (popupElement && e.target === popupElement && popupElement.classList.contains(CLASS_POPUP_OUT)) {\n                removePopupElement();\n            }\n        });\n        popupElement.style.display = 'block';\n        document.body.appendChild(popupElement);\n        popupElement.offsetHeight;\n        popupElement.classList.add(CLASS_POPUP_IN);\n\n        if (!backdrop.classList.contains(CLASS_ACTIVE)) {\n            backdrop.style.display = 'block';\n            document.body.appendChild(backdrop);\n            backdrop.offsetHeight;\n            backdrop.classList.add(CLASS_ACTIVE);\n        }\n        var btns = $.qsa('.' + CLASS_POPUP_BUTTON, popupElement);\n        var input = popupElement.querySelector('.' + CLASS_POPUP_INPUT + ' input');\n        var popup = {\n            element: popupElement,\n            close: function(index, animate) {\n                if (popupElement) {\n                    callback && callback({\n                        index: index || 0,\n                        value: input && input.value || ''\n                    });\n                    if (animate !== false) {\n                        popupElement.classList.remove(CLASS_POPUP_IN);\n                        popupElement.classList.add(CLASS_POPUP_OUT);\n                    } else {\n                        removePopupElement();\n                    }\n                    popupStack.pop();\n                    //如果还有其他popup，则不remove backdrop\n                    if (popupStack.length) {\n                        popupStack[popupStack.length - 1]['show'](animate);\n                    } else {\n                        backdrop.classList.remove(CLASS_ACTIVE);\n                    }\n                }\n            }\n        };\n        var handleEvent = function(e) {\n            popup.close(btns.indexOf(e.target));\n        };\n        $(popupElement).on('tap', '.' + CLASS_POPUP_BUTTON, handleEvent);\n        if (popupStack.length) {\n            popupStack[popupStack.length - 1]['hide']();\n        }\n        popupStack.push({\n            close: popup.close,\n            show: function(animate) {\n                popupElement.style.display = 'block';\n                popupElement.offsetHeight;\n                popupElement.classList.add(CLASS_POPUP_IN);\n            },\n            hide: function() {\n                popupElement.style.display = 'none';\n                popupElement.classList.remove(CLASS_POPUP_IN);\n            }\n        });\n        return popup;\n    };\n    var createAlert = function(message, title, btnValue, callback, type) {\n        if (typeof message === 'undefined') {\n            return;\n        } else {\n            if (typeof title === 'function') {\n                callback = title;\n                type = btnValue;\n                title = null;\n                btnValue = null;\n            } else if (typeof btnValue === 'function') {\n                type = callback;\n                callback = btnValue;\n                btnValue = null;\n            }\n        }\n        if (!$.os.plus || type === 'div') {\n            return createPopup(createInner(message, title || '提示') + createButtons([btnValue || '确定']), callback);\n        }\n        return plus.nativeUI.alert(message, callback, title || '提示', btnValue || '确定');\n    };\n    var createConfirm = function(message, title, btnArray, callback, type) {\n        if (typeof message === 'undefined') {\n            return;\n        } else {\n            if (typeof title === 'function') {\n                callback = title;\n                type = btnArray;\n                title = null;\n                btnArray = null;\n            } else if (typeof btnArray === 'function') {\n                type = callback;\n                callback = btnArray;\n                btnArray = null;\n            }\n        }\n        if (!$.os.plus || type === 'div') {\n            return createPopup(createInner(message, title || '提示') + createButtons(btnArray || ['取消', '确认']), callback);\n        }\n        return plus.nativeUI.confirm(message, callback, title, btnArray || ['取消', '确认']);\n    };\n    var createPrompt = function(message, placeholder, title, btnArray, callback, type) {\n        if (typeof message === 'undefined') {\n            return;\n        } else {\n            if (typeof placeholder === 'function') {\n                callback = placeholder;\n                type = title;\n                placeholder = null;\n                title = null;\n                btnArray = null;\n            } else if (typeof title === 'function') {\n                callback = title;\n                type = btnArray;\n                title = null;\n                btnArray = null;\n            } else if (typeof btnArray === 'function') {\n                type = callback;\n                callback = btnArray;\n                btnArray = null;\n            }\n        }\n        if (!$.os.plus || type === 'div') {\n            return createPopup(createInner(message, title || '提示', createInput(placeholder)) + createButtons(btnArray || ['取消', '确认']), callback);\n        }\n        return plus.nativeUI.prompt(message, callback, title || '提示', placeholder, btnArray || ['取消', '确认']);\n    };\n    var closePopup = function() {\n        if (popupStack.length) {\n            popupStack[popupStack.length - 1]['close']();\n            return true;\n        } else {\n            return false;\n        }\n    };\n    var closePopups = function() {\n        while (popupStack.length) {\n            popupStack[popupStack.length - 1]['close']();\n        }\n    };\n\n    $.closePopup = closePopup;\n    $.closePopups = closePopups;\n    $.alert = createAlert;\n    $.confirm = createConfirm;\n    $.prompt = createPrompt;\n})(mui, window, document);\n(function($, document) {\n    var CLASS_PROGRESSBAR = 'mui-progressbar';\n    var CLASS_PROGRESSBAR_IN = 'mui-progressbar-in';\n    var CLASS_PROGRESSBAR_OUT = 'mui-progressbar-out';\n    var CLASS_PROGRESSBAR_INFINITE = 'mui-progressbar-infinite';\n\n    var SELECTOR_PROGRESSBAR = '.mui-progressbar';\n\n    var _findProgressbar = function(container) {\n        container = $(container || 'body');\n        if (container.length === 0) return;\n        container = container[0];\n        if (container.classList.contains(CLASS_PROGRESSBAR)) {\n            return container;\n        }\n        var progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR);\n        if (progressbars) {\n            for (var i = 0, len = progressbars.length; i < len; i++) {\n                var progressbar = progressbars[i];\n                if (progressbar.parentNode === container) {\n                    return progressbar;\n                }\n            }\n        }\n    };\n    /**\n     * 创建并显示进度条 \n     * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n     * @param {Object} progress 可选，undefined表示循环，数字表示具体进度\n     * @param {Object} color 可选，指定颜色样式(目前暂未提供实际样式，可暂时不暴露此参数)\n     */\n    var showProgressbar = function(container, progress, color) {\n        if (typeof container === 'number') {\n            color = progress;\n            progress = container;\n            container = 'body';\n        }\n        container = $(container || 'body');\n        if (container.length === 0) return;\n        container = container[0];\n        var progressbar;\n        if (container.classList.contains(CLASS_PROGRESSBAR)) {\n            progressbar = container;\n        } else {\n            var progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR + ':not(.' + CLASS_PROGRESSBAR_OUT + ')');\n            if (progressbars) {\n                for (var i = 0, len = progressbars.length; i < len; i++) {\n                    var _progressbar = progressbars[i];\n                    if (_progressbar.parentNode === container) {\n                        progressbar = _progressbar;\n                        break;\n                    }\n                }\n            }\n            if (!progressbar) {\n                progressbar = document.createElement('span');\n                progressbar.className = CLASS_PROGRESSBAR + ' ' + CLASS_PROGRESSBAR_IN + (typeof progress !== 'undefined' ? '' : (' ' + CLASS_PROGRESSBAR_INFINITE)) + (color ? (' ' + CLASS_PROGRESSBAR + '-' + color) : '');\n                if (typeof progress !== 'undefined') {\n                    progressbar.innerHTML = '<span></span>';\n                }\n                container.appendChild(progressbar);\n            } else {\n                progressbar.classList.add(CLASS_PROGRESSBAR_IN);\n            }\n        }\n        if (progress) setProgressbar(container, progress);\n        return progressbar;\n    };\n    /**\n     * 关闭进度条 \n     * @param {Object} container 可选，默认body，支持selector,DOM Node,mui wrapper\n     */\n    var hideProgressbar = function(container) {\n        var progressbar = _findProgressbar(container);\n        if (!progressbar) {\n            return;\n        }\n        var classList = progressbar.classList;\n        if (!classList.contains(CLASS_PROGRESSBAR_IN) || classList.contains(CLASS_PROGRESSBAR_OUT)) {\n            return;\n        }\n        classList.remove(CLASS_PROGRESSBAR_IN);\n        classList.add(CLASS_PROGRESSBAR_OUT);\n        progressbar.addEventListener('webkitAnimationEnd', function() {\n            progressbar.parentNode && progressbar.parentNode.removeChild(progressbar);\n            progressbar = null;\n        });\n        return;\n    };\n    /**\n     * 设置指定进度条进度 \n     * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\n     * @param {Object} progress 可选，默认0 取值范围[0-100]\n     * @param {Object} speed 进度条动画时间\n     */\n    var setProgressbar = function(container, progress, speed) {\n        if (typeof container === 'number') {\n            speed = progress;\n            progress = container;\n            container = false;\n        }\n        var progressbar = _findProgressbar(container);\n        if (!progressbar || progressbar.classList.contains(CLASS_PROGRESSBAR_INFINITE)) {\n            return;\n        }\n        if (progress) progress = Math.min(Math.max(progress, 0), 100);\n        progressbar.offsetHeight;\n        var span = progressbar.querySelector('span');\n        if (span) {\n            var style = span.style;\n            style.webkitTransform = 'translate3d(' + (-100 + progress) + '%,0,0)';\n            if (typeof speed !== 'undefined') {\n                style.webkitTransitionDuration = speed + 'ms';\n            } else {\n                style.webkitTransitionDuration = '';\n            }\n        }\n        return progressbar;\n    };\n    $.fn.progressbar = function(options) {\n        var progressbarApis = [];\n        options = options || {};\n        this.each(function() {\n            var self = this;\n            var progressbarApi = self.mui_plugin_progressbar;\n            if (!progressbarApi) {\n                self.mui_plugin_progressbar = progressbarApi = {\n                    options: options,\n                    setOptions: function(options) {\n                        this.options = options;\n                    },\n                    show: function() {\n                        return showProgressbar(self, this.options.progress, this.options.color);\n                    },\n                    setProgress: function(progress) {\n                        return setProgressbar(self, progress);\n                    },\n                    hide: function() {\n                        return hideProgressbar(self);\n                    }\n                };\n            } else if (options) {\n                progressbarApi.setOptions(options);\n            }\n            progressbarApis.push(progressbarApi);\n        });\n        return progressbarApis.length === 1 ? progressbarApis[0] : progressbarApis;\n    };\n    //\t$.setProgressbar = setProgressbar;\n    //\t$.showProgressbar = showProgressbar;\n    //\t$.hideProgressbar = hideProgressbar;\n})(mui, document);\n/**\n * Input(TODO resize)\n * @param {type} $\n * @param {type} window\n * @param {type} document\n * @returns {undefined}\n */\n(function($, window, document) {\n    var CLASS_ICON = 'mui-icon';\n    var CLASS_ICON_CLEAR = 'mui-icon-clear';\n    var CLASS_ICON_SPEECH = 'mui-icon-speech';\n    var CLASS_ICON_SEARCH = 'mui-icon-search';\n    var CLASS_ICON_PASSWORD = 'mui-icon-eye';\n    var CLASS_INPUT_ROW = 'mui-input-row';\n    var CLASS_PLACEHOLDER = 'mui-placeholder';\n    var CLASS_TOOLTIP = 'mui-tooltip';\n    var CLASS_HIDDEN = 'mui-hidden';\n    var CLASS_FOCUSIN = 'mui-focusin';\n    var SELECTOR_ICON_CLOSE = '.' + CLASS_ICON_CLEAR;\n    var SELECTOR_ICON_SPEECH = '.' + CLASS_ICON_SPEECH;\n    var SELECTOR_ICON_PASSWORD = '.' + CLASS_ICON_PASSWORD;\n    var SELECTOR_PLACEHOLDER = '.' + CLASS_PLACEHOLDER;\n    var SELECTOR_TOOLTIP = '.' + CLASS_TOOLTIP;\n\n    var findRow = function(target) {\n        for (; target && target !== document; target = target.parentNode) {\n            if (target.classList && target.classList.contains(CLASS_INPUT_ROW)) {\n                return target;\n            }\n        }\n        return null;\n    };\n    var Input = function(element, options) {\n        this.element = element;\n        this.options = options || {\n            actions: 'clear'\n        };\n        if (~this.options.actions.indexOf('slider')) { //slider\n            this.sliderActionClass = CLASS_TOOLTIP + ' ' + CLASS_HIDDEN;\n            this.sliderActionSelector = SELECTOR_TOOLTIP;\n        } else { //clear,speech,search\n            if (~this.options.actions.indexOf('clear')) {\n                this.clearActionClass = CLASS_ICON + ' ' + CLASS_ICON_CLEAR + ' ' + CLASS_HIDDEN;\n                this.clearActionSelector = SELECTOR_ICON_CLOSE;\n            }\n            if (~this.options.actions.indexOf('speech')) { //only for 5+\n                this.speechActionClass = CLASS_ICON + ' ' + CLASS_ICON_SPEECH;\n                this.speechActionSelector = SELECTOR_ICON_SPEECH;\n            }\n            if (~this.options.actions.indexOf('search')) {\n                this.searchActionClass = CLASS_PLACEHOLDER;\n                this.searchActionSelector = SELECTOR_PLACEHOLDER;\n            }\n            if (~this.options.actions.indexOf('password')) {\n                this.passwordActionClass = CLASS_ICON + ' ' + CLASS_ICON_PASSWORD;\n                this.passwordActionSelector = SELECTOR_ICON_PASSWORD;\n            }\n        }\n        this.init();\n    };\n    Input.prototype.init = function() {\n        this.initAction();\n        this.initElementEvent();\n    };\n    Input.prototype.initAction = function() {\n        var self = this;\n\n        var row = self.element.parentNode;\n        if (row) {\n            if (self.sliderActionClass) {\n                self.sliderAction = self.createAction(row, self.sliderActionClass, self.sliderActionSelector);\n            } else {\n                if (self.searchActionClass) {\n                    self.searchAction = self.createAction(row, self.searchActionClass, self.searchActionSelector);\n                    self.searchAction.addEventListener('tap', function(e) {\n                        $.focus(self.element);\n                        e.stopPropagation();\n                    });\n                }\n                if (self.speechActionClass) {\n                    self.speechAction = self.createAction(row, self.speechActionClass, self.speechActionSelector);\n                    self.speechAction.addEventListener('click', $.stopPropagation);\n                    self.speechAction.addEventListener('tap', function(event) {\n                        self.speechActionClick(event);\n                    });\n                }\n                if (self.clearActionClass) {\n                    self.clearAction = self.createAction(row, self.clearActionClass, self.clearActionSelector);\n                    self.clearAction.addEventListener('tap', function(event) {\n                        self.clearActionClick(event);\n                    });\n                }\n                if (self.passwordActionClass) {\n                    self.passwordAction = self.createAction(row, self.passwordActionClass, self.passwordActionSelector);\n                    self.passwordAction.addEventListener('tap', function(event) {\n                        self.passwordActionClick(event);\n                    });\n                }\n            }\n        }\n    };\n    Input.prototype.createAction = function(row, actionClass, actionSelector) {\n        var action = row.querySelector(actionSelector);\n        if (!action) {\n            var action = document.createElement('span');\n            action.className = actionClass;\n            if (actionClass === this.searchActionClass) {\n                action.innerHTML = '<span class=\"' + CLASS_ICON + ' ' + CLASS_ICON_SEARCH + '\"></span><span>' + this.element.getAttribute('placeholder') + '</span>';\n                this.element.setAttribute('placeholder', '');\n                if (this.element.value.trim()) {\n                    row.classList.add('mui-active');\n                }\n            }\n            row.insertBefore(action, this.element.nextSibling);\n        }\n        return action;\n    };\n    Input.prototype.initElementEvent = function() {\n        var element = this.element;\n\n        if (this.sliderActionClass) {\n            var tooltip = this.sliderAction;\n            var timer = null;\n            var showTip = function() { //每次重新计算是因为控件可能被隐藏，初始化时计算是不正确的\n                tooltip.classList.remove(CLASS_HIDDEN);\n                var offsetLeft = element.offsetLeft;\n                var width = element.offsetWidth - 28;\n                var tooltipWidth = tooltip.offsetWidth;\n                var distince = Math.abs(element.max - element.min);\n                var scaleWidth = (width / distince) * Math.abs(element.value - element.min);\n                tooltip.style.left = (14 + offsetLeft + scaleWidth - tooltipWidth / 2) + 'px';\n                tooltip.innerText = element.value;\n                if (timer) {\n                    clearTimeout(timer);\n                }\n                timer = setTimeout(function() {\n                    tooltip.classList.add(CLASS_HIDDEN);\n                }, 1000);\n            };\n            element.addEventListener('input', showTip);\n            element.addEventListener('tap', showTip);\n            element.addEventListener($.EVENT_MOVE, function(e) {\n                e.stopPropagation();\n            });\n        } else {\n            if (this.clearActionClass) {\n                var action = this.clearAction;\n                if (!action) {\n                    return;\n                }\n                $.each(['keyup', 'change', 'input', 'focus', 'cut', 'paste'], function(index, type) {\n                    (function(type) {\n                        element.addEventListener(type, function() {\n                            action.classList[element.value.trim() ? 'remove' : 'add'](CLASS_HIDDEN);\n                        });\n                    })(type);\n                });\n                element.addEventListener('blur', function() {\n                    action.classList.add(CLASS_HIDDEN);\n                });\n            }\n            if (this.searchActionClass) {\n                element.addEventListener('focus', function() {\n                    element.parentNode.classList.add('mui-active');\n                });\n                element.addEventListener('blur', function() {\n                    if (!element.value.trim()) {\n                        element.parentNode.classList.remove('mui-active');\n                    }\n                });\n            }\n        }\n    };\n    Input.prototype.setPlaceholder = function(text) {\n        if (this.searchActionClass) {\n            var placeholder = this.element.parentNode.querySelector(SELECTOR_PLACEHOLDER);\n            placeholder && (placeholder.getElementsByTagName('span')[1].innerText = text);\n        } else {\n            this.element.setAttribute('placeholder', text);\n        }\n    };\n    Input.prototype.passwordActionClick = function(event) {\n        if (this.element.type === 'text') {\n            this.element.type = 'password';\n        } else {\n            this.element.type = 'text';\n        }\n        this.passwordAction.classList.toggle('mui-active');\n        event.preventDefault();\n    };\n    Input.prototype.clearActionClick = function(event) {\n        var self = this;\n        self.element.value = '';\n        $.focus(self.element);\n        self.clearAction.classList.add(CLASS_HIDDEN);\n        event.preventDefault();\n    };\n    Input.prototype.speechActionClick = function(event) {\n        if (window.plus) {\n            var self = this;\n            var oldValue = self.element.value;\n            self.element.value = '';\n            document.body.classList.add(CLASS_FOCUSIN);\n            plus.speech.startRecognize({\n                engine: 'iFly'\n            }, function(s) {\n                self.element.value += s;\n                $.focus(self.element);\n                plus.speech.stopRecognize();\n                $.trigger(self.element, 'recognized', {\n                    value: self.element.value\n                });\n                if (oldValue !== self.element.value) {\n                    $.trigger(self.element, 'change');\n                    $.trigger(self.element, 'input');\n                }\n                // document.body.classList.remove(CLASS_FOCUSIN);\n            }, function(e) {\n                document.body.classList.remove(CLASS_FOCUSIN);\n            });\n        } else {\n            alert('only for 5+');\n        }\n        event.preventDefault();\n    };\n    $.fn.input = function(options) {\n        var inputApis = [];\n        this.each(function() {\n            var inputApi = null;\n            var actions = [];\n            var row = findRow(this.parentNode);\n            if (this.type === 'range' && row.classList.contains('mui-input-range')) {\n                actions.push('slider');\n            } else {\n                var classList = this.classList;\n                if (classList.contains('mui-input-clear')) {\n                    actions.push('clear');\n                }\n                if (!($.os.android && $.os.stream) && classList.contains('mui-input-speech')) {\n                    actions.push('speech');\n                }\n                if (classList.contains('mui-input-password')) {\n                    actions.push('password');\n                }\n                if (this.type === 'search' && row.classList.contains('mui-search')) {\n                    actions.push('search');\n                }\n            }\n            var id = this.getAttribute('data-input-' + actions[0]);\n            if (!id) {\n                id = ++$.uuid;\n                inputApi = $.data[id] = new Input(this, {\n                    actions: actions.join(',')\n                });\n                for (var i = 0, len = actions.length; i < len; i++) {\n                    this.setAttribute('data-input-' + actions[i], id);\n                }\n            } else {\n                inputApi = $.data[id];\n            }\n            inputApis.push(inputApi);\n        });\n        return inputApis.length === 1 ? inputApis[0] : inputApis;\n    };\n    $.ready(function() {\n        $('.mui-input-row input').input();\n    });\n})(mui, window, document);\n(function($, window) {\n    var rgbaRegex = /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/;\n    var getColor = function(colorStr) {\n        var matches = colorStr.match(rgbaRegex);\n        if (matches && matches.length === 5) {\n            return [\n                matches[1],\n                matches[2],\n                matches[3],\n                matches[4]\n            ];\n        }\n        return [];\n    };\n    var Transparent = function(element, options) {\n        this.element = element;\n        this.options = $.extend({\n            top: 0,\n            offset: 150,\n            duration: 16\n        }, options || {});\n        this._style = this.element.style;\n        this._bgColor = this._style.backgroundColor;\n        var color = getColor(mui.getStyles(this.element, 'backgroundColor'));\n        if (color.length) {\n            this._R = color[0];\n            this._G = color[1];\n            this._B = color[2];\n            this._A = color[3];\n            this._bufferFn = $.buffer(this.handleScroll, this.options.duration, this);\n            this.initEvent();\n        } else {\n            throw new Error(\"元素背景颜色必须为RGBA\");\n        }\n    };\n\n    Transparent.prototype.initEvent = function() {\n        window.addEventListener('scroll', this._bufferFn);\n        window.addEventListener($.EVENT_MOVE, this._bufferFn);\n    };\n    Transparent.prototype.handleScroll = function() {\n        this._style.backgroundColor = 'rgba(' + this._R + ',' + this._G + ',' + this._B + ',' + (window.scrollY - this.options.top) / this.options.offset + ')';\n    };\n    Transparent.prototype.destory = function() {\n        window.removeEventListener('scroll', this._bufferFn);\n        window.removeEventListener($.EVENT_MOVE, this._bufferFn);\n        this.element.style.backgroundColor = this._bgColor;\n        this.element.mui_plugin_transparent = null;\n    };\n    $.fn.transparent = function(options) {\n        options = options || {};\n        var transparentApis = [];\n        this.each(function() {\n            var transparentApi = this.mui_plugin_transparent;\n            if (!transparentApi) {\n                var top = this.getAttribute('data-top');\n                var offset = this.getAttribute('data-offset');\n                var duration = this.getAttribute('data-duration');\n                if (top !== null && typeof options.top === 'undefined') {\n                    options.top = top;\n                }\n                if (offset !== null && typeof options.offset === 'undefined') {\n                    options.offset = offset;\n                }\n                if (duration !== null && typeof options.duration === 'undefined') {\n                    options.duration = duration;\n                }\n                transparentApi = this.mui_plugin_transparent = new Transparent(this, options);\n            }\n            transparentApis.push(transparentApi);\n        });\n        return transparentApis.length === 1 ? transparentApis[0] : transparentApis;\n    };\n    $.ready(function() {\n        $('.mui-bar-transparent').transparent();\n    });\n})(mui, window);\n/**\n * 数字输入框\n * varstion 1.0.1\n * by Houfeng\n * Houfeng@DCloud.io\n */\n\n(function($) {\n\n    var touchSupport = ('ontouchstart' in document);\n    var tapEventName = touchSupport ? 'tap' : 'click';\n    var changeEventName = 'change';\n    var holderClassName = 'mui-numbox';\n    var plusClassSelector = '.mui-btn-numbox-plus,.mui-numbox-btn-plus';\n    var minusClassSelector = '.mui-btn-numbox-minus,.mui-numbox-btn-minus';\n    var inputClassSelector = '.mui-input-numbox,.mui-numbox-input';\n\n    var Numbox = $.Numbox = $.Class.extend({\n        /**\n         * 构造函数\n         **/\n        init: function(holder, options) {\n            var self = this;\n            if (!holder) {\n                throw \"构造 numbox 时缺少容器元素\";\n            }\n            self.holder = holder;\n            options = options || {};\n            options.step = parseInt(options.step || 1);\n            self.options = options;\n            self.input = $.qsa(inputClassSelector, self.holder)[0];\n            self.plus = $.qsa(plusClassSelector, self.holder)[0];\n            self.minus = $.qsa(minusClassSelector, self.holder)[0];\n            self.checkValue();\n            self.initEvent();\n        },\n        /**\n         * 初始化事件绑定\n         **/\n        initEvent: function() {\n            var self = this;\n            self.plus.addEventListener(tapEventName, function(event) {\n                var val = parseInt(self.input.value) + self.options.step;\n                self.input.value = val.toString();\n                $.trigger(self.input, changeEventName, null);\n            });\n            self.minus.addEventListener(tapEventName, function(event) {\n                var val = parseInt(self.input.value) - self.options.step;\n                self.input.value = val.toString();\n                $.trigger(self.input, changeEventName, null);\n            });\n            self.input.addEventListener(changeEventName, function(event) {\n                self.checkValue();\n                var val = parseInt(self.input.value);\n                //触发顶层容器\n                $.trigger(self.holder, changeEventName, {\n                    value: val\n                });\n            });\n        },\n        /**\n         * 获取当前值\n         **/\n        getValue: function() {\n            var self = this;\n            return parseInt(self.input.value);\n        },\n        /**\n         * 验证当前值是法合法\n         **/\n        checkValue: function() {\n            var self = this;\n            var val = self.input.value;\n            if (val == null || val == '' || isNaN(val)) {\n                self.input.value = self.options.min || 0;\n                self.minus.disabled = self.options.min != null;\n            } else {\n                var val = parseInt(val);\n                if (self.options.max != null && !isNaN(self.options.max) && val >= parseInt(self.options.max)) {\n                    val = self.options.max;\n                    self.plus.disabled = true;\n                } else {\n                    self.plus.disabled = false;\n                }\n                if (self.options.min != null && !isNaN(self.options.min) && val <= parseInt(self.options.min)) {\n                    val = self.options.min;\n                    self.minus.disabled = true;\n                } else {\n                    self.minus.disabled = false;\n                }\n                self.input.value = val;\n            }\n        },\n        /**\n         * 更新选项\n         **/\n        setOption: function(name, value) {\n            var self = this;\n            self.options[name] = value;\n        }\n    });\n\n    $.fn.numbox = function(options) {\n        var instanceArray = [];\n        //遍历选择的元素\n        this.each(function(i, element) {\n            if (element.numbox) {\n                return;\n            }\n            if (options) {\n                element.numbox = new Numbox(element, options);\n            } else {\n                var optionsText = element.getAttribute('data-numbox-options');\n                var options = optionsText ? JSON.parse(optionsText) : {};\n                options.step = element.getAttribute('data-numbox-step') || options.step;\n                options.min = element.getAttribute('data-numbox-min') || options.min;\n                options.max = element.getAttribute('data-numbox-max') || options.max;\n                element.numbox = new Numbox(element, options);\n            }\n        });\n        return this[0] ? this[0].numbox : null;\n    }\n\n    //自动处理 class='mui-locker' 的 dom\n    $.ready(function() {\n        $('.' + holderClassName).numbox();\n    });\n\n}(mui))\n\n\n// WEBPACK FOOTER //\n// ./src/assets/js/mui.js"],"sourceRoot":""}